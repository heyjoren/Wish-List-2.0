import{a as Q,b as fe,c as S,d as ue}from"./chunk-U77CYZAK.js";import"./chunk-CKR3AEJD.js";import{a as X}from"./chunk-SC3YRU6X.js";import{a as R,b as v,c as G,d as K,e as q,f as z,h as J,j as U,n as L,o as pe,p as $,r as Z,s as ee,t as de}from"./chunk-NQXXWMUG.js";import{a as j,b as k,c as P,d as O,f as W,g as ge,h as he}from"./chunk-74LW3V53.js";import"./chunk-HQHKN3AJ.js";import{$a as C,Ga as m,Ia as y,Ka as M,La as _,M as b,Oa as ae,P as oe,Pa as me,S as N,T as F,Wb as H,Ya as le,Za as T,_a as se,bb as ce,c as D,da as re,ea as c,fa as l,fb as A,gb as V,hb as I,na as h,pa as d,ta as n,ua as i,va as p,wa as B,ya as f,za as w}from"./chunk-VUSBVABX.js";var x=(()=>{let r=class r{transform(e){let t=e.lastIndexOf("\\")+1;return e.substring(t)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=oe({name:"imgName",type:r,pure:!0,standalone:!0});let a=r;return a})();function Oe(a,r){a&1&&(n(0,"span",14),m(1,"Je moet dit veld invullen"),i())}function ye(a,r){a&1&&(n(0,"span",14),m(1,"Je moet dit veld invullen"),i())}function Ee(a,r){a&1&&(n(0,"span",14),m(1,"Je moet dit veld invullen"),i())}var Ie=(()=>{let r=class r{constructor(e,t,o,s,u,E,we,Me){this.Dialogservice=e,this.dialogref=t,this.itemService=o,this.router=s,this.http=u,this.imgNamePipe=E,this.fb=we,this.auth=Me,this.filled=!1,this.toevoegenSwitch=!1,this.file=null}ngOnInit(){this.form=this.fb.group({naam:["",v.required],prijs:[0,[v.required,v.min(.01)]],beschrijving:[""],fabrikant:["",v.required]})}closeDialog(){if(!this.toevoegenSwitch){let e=this.form.value.prijs.toFixed(2).toString();if((this.form.value.naam!==""||this.form.value.fabrikant!==""||e!=="0.00")&&(this.filled=!0),this.filled&&!confirm("Je hebt nog niet opgeslagen. Ben je zeker dat je niet wilt opslaan?"))return}this.Dialogservice.closeDialog(this.dialogref),this.router.navigate(["items"])}toevoegen(){return D(this,null,function*(){if(this.form.valid){this.toevoegenSwitch=!0;let e={naam:this.form.value.naam,prijs:this.form.value.prijs.toFixed(2),beschrijving:this.form.value.beschrijving,fabrikant:this.form.value.fabrikant,img:"",uid:this.auth.getUid()??"",toegevoegOp:new Date},t=this.itemService.createItemId();if(this.file){let o="item/"+t+"/"+this.file.name;e.img=yield this.itemService.uploadImg(o,this.file)}else e.img="";this.itemService.addItems(e,t).subscribe({next:()=>{this.closeDialog(),this.router.navigate(["items"])},error:o=>{console.error("Error: ",o)}})}})}selectImg(e){let t=e.target;t.files&&t.files[0]&&(this.file=t.files[0])}};r.\u0275fac=function(t){return new(t||r)(l(X),l(he),l(S),l(I),l(ce),l(x),l(L),l(H))},r.\u0275cmp=b({type:r,selectors:[["app-new-item"]],standalone:!0,features:[M([x]),_],decls:37,vars:4,consts:[[1,"container"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"verplicht"],[1,"input_div","form-group"],["type","text","id","naam","formControlName","naam",1,"form-control"],["class","verplichtVeld",4,"ngIf"],["type","number","id","prijs","formControlName","prijs","step","0.01",1,"form-control"],["type","file","id","img",3,"change"],["type","text","id","fabrikant","formControlName","fabrikant",1,"form-control"],["id","beschrijving","formControlName","beschrijving",1,"form-control"],["mat-raised-button","","aria-label","Button that displays a tooltip when focused or hovered over","matTooltip","Voeg een bedrag toe","type","submit",1,"add"],["mat-raised-button","","aria-label","Button that displays a tooltip when focused or hovered over","matTooltip","Sluit het venster",1,"close",3,"click"],["mat-fab",""],[1,"verplichtVeld"]],template:function(t,o){if(t&1&&(n(0,"div",0)(1,"h1"),m(2,"Item toevoegen"),i(),n(3,"div",1)(4,"form",2),f("ngSubmit",function(){return o.toevoegen()}),n(5,"p",3),m(6,"* is verplicht"),i(),n(7,"div",4)(8,"label"),m(9,"Naam*:"),i(),p(10,"input",5),h(11,Oe,2,0,"span",6),i(),n(12,"div",4)(13,"label"),m(14,"Prijs* \u20AC:"),i(),p(15,"input",7),h(16,ye,2,0,"span",6),i(),n(17,"div",4)(18,"label"),m(19,"Afbeelding:"),i(),n(20,"input",8),f("change",function(u){return o.selectImg(u)}),i()(),n(21,"div",4)(22,"label"),m(23,"Fabrikant*:"),i(),p(24,"input",9),h(25,Ee,2,0,"span",6),i(),n(26,"div",4)(27,"label"),m(28,"Beschrijving:"),i(),n(29,"textarea",10),m(30,"                "),i()(),n(31,"div")(32,"button",11),m(33,"toevoegen"),i()()()(),n(34,"button",12),f("click",function(){return o.closeDialog()}),n(35,"mat-icon",13),m(36,"close"),i()()()),t&2){let s,u,E;c(4),d("formGroup",o.form),c(7),d("ngIf",(s=o.form.get("naam"))==null?null:s.invalid),c(5),d("ngIf",(u=o.form.get("prijs"))==null?null:u.invalid),c(9),d("ngIf",(E=o.form.get("fabrikant"))==null?null:E.invalid)}},dependencies:[k,j,O,P,$,q,R,z,G,K,J,U,C,T],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative}h1[_ngcontent-%COMP%]{margin-bottom:20px}.close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background-color:#000;width:40px;height:40px}.close[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;margin-top:5px;color:#fff}.form-container[_ngcontent-%COMP%]{width:80%;border:1px solid #ccc;padding:20px;margin-bottom:20px}.verplicht[_ngcontent-%COMP%]{margin-left:250px}.add[_ngcontent-%COMP%]{background-color:#adff2f;border:none;width:200px;height:40px;margin-left:225px}.input_div[_ngcontent-%COMP%]{margin-left:2%;margin-bottom:10px}#naam[_ngcontent-%COMP%]{width:80%;margin-left:9%}#prijs[_ngcontent-%COMP%]{width:80%;margin-left:8.7%}#img[_ngcontent-%COMP%]{width:80%;margin-left:3%}#fabrikant[_ngcontent-%COMP%]{width:80%;margin-left:4%}#beschrijving[_ngcontent-%COMP%]{width:80%;margin-left:1.2%;min-height:100px;max-height:calc(100vh - 400px)}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{border-radius:20px;padding:10px;border-color:#fff;background-color:#87cefa;color:#000}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button:hover{background-color:#000;color:#87cefa}.verplichtVeld[_ngcontent-%COMP%]{color:red}"]});let a=r;return a})();function Ne(a,r){if(a&1){let g=B();n(0,"div")(1,"app-show-item",9),f("click",function(){let t=N(g).$implicit,o=w();return F(o.onItemClick(t.id))}),i()()}if(a&2){let g=r.$implicit,e=w();c(),d("item",g)("showButtons",!0)("isSelected",e.selectedItemId===g.id)}}var Se=(()=>{let r=class r{constructor(e,t,o,s){this.bedragService=e,this.router=t,this.dialogService=o,this.itemService=s,this.selectedItemId=null}ngOnInit(){this.itemService.getItemsnPut(),this.bedragService.getBedragen(),this.bedragService.getBedragenPut()}onAdd(){this.dialogService.openInDialog(Ie).afterClosed().subscribe(()=>{this.itemService.getItemsnPut()})}onItemClick(e){this.router.navigate(["items",e]),this.selectedItemId=e}};r.\u0275fac=function(t){return new(t||r)(l(W),l(I),l(X),l(S))},r.\u0275cmp=b({type:r,selectors:[["app-item-component"]],standalone:!0,features:[_],decls:14,vars:3,consts:[[1,"container"],[1,"totaalBedrag"],[1,"add_delete"],["mat-raised-button","","aria-label","Button that displays a tooltip when focused or hovered over","matTooltip","Maak een nieuw bedrag aan. Om toe te voegen of af te halen.",3,"click"],["mat-fab",""],[1,"row"],[1,"col-md-6"],[4,"ngFor","ngForOf"],[1,"col-md-6","routerOutlet"],[3,"click","item","showButtons","isSelected"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1),p(2,"app-totaal-bedrag"),i(),n(3,"div",2)(4,"button",3),f("click",function(){return o.onAdd()}),n(5,"mat-icon",4),m(6,"add"),i()()(),n(7,"div",5)(8,"div",6)(9,"div"),h(10,Ne,2,3,"div",7),ae(11,"sortItemsByDate"),i()(),n(12,"div",8),p(13,"router-outlet"),i()()()),t&2&&(c(10),d("ngForOf",me(11,1,o.itemService.items)))},dependencies:[ue,ge,k,j,O,P,C,le,V,fe],styles:[".add_delete[_ngcontent-%COMP%]{padding:10px}.totaalBedrag[_ngcontent-%COMP%]{float:right;margin-top:25px}button[_ngcontent-%COMP%]{border-radius:20px;padding:10px;background-color:#adff2f;border-color:#fff}mat-icon[_ngcontent-%COMP%]{color:#000}button[_ngcontent-%COMP%]:hover{background-color:#000}button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#adff2f}.routerOutlet[_ngcontent-%COMP%]{margin-top:20px}app-show-item[_ngcontent-%COMP%]{cursor:pointer}"]});let a=r;return a})();function Fe(a,r){if(a&1&&p(0,"img",4),a&2){let g=w();d("src",g.item.img,re)("alt","afbeelding van "+g.item.naam)}}function Be(a,r){if(a&1){let g=B();n(0,"button",5),f("click",function(){N(g);let t=w();return F(t.koop())}),m(1,"Koop"),i()}}var ne=(()=>{let r=class r{constructor(e,t,o,s,u){this.itemService=e,this.route=t,this.router=o,this.bedragService=s,this.auth=u,this.item=new Q,this.myDate=new Date,this.showKoopButton=!0,this.saved=!1}ngOnInit(){this.route.params.subscribe(e=>{this.onLoadItem(e.id)}),this.route.data.subscribe(e=>{this.showKoopButton=e.showKoopButton})}onLoadItem(e){this.itemService.getItem(e).subscribe({next:t=>{t&&(this.item=t,this.item.id=e)},error:t=>console.log("error: ",t)})}koop(){let e={bedrag:Number(this.item.prijs),teken:"-",datum:new Date(this.myDate),uid:this.auth.getUid()??""};this.bedragService.addBedrag(e).subscribe({next:()=>{},error:t=>{console.error("Error: ",t)}}),this.item.toegevoegOp=this.getDate(this.item.toegevoegOp),this.itemService.deleteItem(this.item).subscribe(t=>{this.router.navigate(["items"])})}getDate(e){return e&&e.toDate?e.toDate():new Date(e)}};r.\u0275fac=function(t){return new(t||r)(l(S),l(A),l(I),l(W),l(H))},r.\u0275cmp=b({type:r,selectors:[["app-item-detail"]],standalone:!0,features:[M([se]),_],decls:13,vars:6,consts:[[3,"ngIf"],[1,"naam_fabrikant"],[1,"mb-0"],[3,"click",4,"ngIf"],[3,"src","alt"],[3,"click"]],template:function(t,o){t&1&&(n(0,"div"),h(1,Fe,1,2,"ng-template",0),n(2,"div",1)(3,"p",2),m(4),i(),n(5,"p",2),m(6),i()(),n(7,"p",2),m(8),i(),p(9,"br"),n(10,"p",2),m(11),i(),h(12,Be,2,0,"button",3),i()),t&2&&(c(),d("ngIf",o.item.img),c(3),y("Naam: ",o.item.naam,""),c(2),y("Fabrikant: ",o.item.fabrikant,""),c(2),y("Prijs: \u20AC",o.item.prijs,""),c(3),y("Beschrijving: ",o.item.beschrijving,""),c(),d("ngIf",o.showKoopButton))},dependencies:[C,T],styles:[".naam_fabrikant[_ngcontent-%COMP%]{display:flex;justify-content:space-between}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}button[_ngcontent-%COMP%]{border-radius:20px;padding:10px;border-color:#fff;background-color:#87cefa;color:#000}button[_ngcontent-%COMP%]:hover{background-color:#000;color:#87cefa}"]});let a=r;return a})();var xe=(()=>{let r=class r{constructor(e,t,o,s,u){this.itemService=e,this.route=t,this.router=o,this.imgNamePipe=s,this.fb=u,this.item=new Q,this.idFromRoute=null,this.saved=!1,this.aanpassenSwitch=!1,this.file=null,this.isSubmitting=!1}ngOnInit(){this.form=this.fb.group({naam:["",v.required],prijs:["",v.required],beschrijving:[""],fabrikant:["",v.required]}),this.route.paramMap.subscribe(e=>{this.idFromRoute=e.get("id"),this.route.params.subscribe(t=>{this.itemService.getItem(t.id).subscribe({next:o=>{o?(this.item=o,this.vulInput()):console.log("Geen item gevonden")},error:o=>console.log("error: ",o)})})})}vulInput(){this.form.setValue({naam:this.item.naam,prijs:this.item.prijs,beschrijving:this.item.beschrijving,fabrikant:this.item.fabrikant})}closeSccreen(){this.aanpassenSwitch||(this.form.value.naam!==this.item.naam||this.form.value.fabrikant!==this.item.fabrikant||this.form.value.prijs!==this.item.prijs.toString()?(console.log("if"),this.saved=!1):this.saved=!0),this.router.navigate(["items"])}aanpassen(){return D(this,null,function*(){if(!this.isSubmitting){if(this.isSubmitting=!0,this.saved=!0,this.aanpassenSwitch=!0,this.file){this.item.img&&(yield this.itemService.deleteImg(this.item.img));let e="item/"+this.idFromRoute+"/"+this.file.name;this.item.img=yield this.itemService.uploadImg(e,this.file)}this.item.naam=this.form.value.naam,this.item.prijs=this.form.value.prijs.toFixed(2),this.item.fabrikant=this.form.value.fabrikant,this.item.beschrijving=this.form.value.beschrijving,this.itemService.updateItem(this.item,this.idFromRoute).then(()=>{this.router.navigate(["items"])}).catch(e=>{console.log("error: ",e)})}})}canDeactivate(){return this.saved?!0:confirm("Je hebt nog niet opgeslagen. Ben je zeker dat je niet wilt opslaan?")}selectImg(e){let t=e.target;t.files&&t.files[0]&&(this.file=t.files[0])}};r.\u0275fac=function(t){return new(t||r)(l(S),l(A),l(I),l(x),l(L))},r.\u0275cmp=b({type:r,selectors:[["app-aanpas-item"]],standalone:!0,features:[M([x]),_],decls:35,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-6","routerOutlet"],[1,"col-md-6"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"input_div","form-group"],["type","string","id","naam","formControlName","naam",1,"form-control"],["type","number","id","prijs","step","0.01","formControlName","prijs",1,"form-control"],["type","file","id","img",3,"change"],["type","string","id","fabrikant","formControlName","fabrikant",1,"form-control"],["id","beschrijving","formControlName","beschrijving",1,"form-control"],["mat-raised-button","","aria-label","Button that displays a tooltip when focused or hovered over",1,"aanpassen",3,"click"],["mat-raised-button","","aria-label","Button that displays a tooltip when focused or hovered over","matTooltip","Sluit het venster",1,"close",3,"click"],["mat-fab",""]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),p(3,"router-outlet"),i(),n(4,"div",3)(5,"div")(6,"div",4)(7,"form",5),f("ngSubmit",function(){return o.aanpassen()}),n(8,"div",6)(9,"label"),m(10,"Naam:"),i(),p(11,"input",7),i(),n(12,"div",6)(13,"label"),m(14,"Prijs \u20AC:"),i(),p(15,"input",8),i(),n(16,"div",6)(17,"label"),m(18,"Afbeelding:"),i(),n(19,"input",9),f("change",function(u){return o.selectImg(u)}),i()(),n(20,"div",6)(21,"label"),m(22,"Fabrikant:"),i(),p(23,"input",10),i(),n(24,"div",6)(25,"label"),m(26,"Beschrijving:"),i(),n(27,"textarea",11),m(28,"                            "),i()(),n(29,"div")(30,"button",12),f("click",function(){return o.aanpassen()}),m(31,"Aanpassen"),i()()()()()()(),n(32,"button",13),f("click",function(){return o.closeSccreen()}),n(33,"mat-icon",14),m(34,"close"),i()()()),t&2&&(c(7),d("formGroup",o.form))},dependencies:[k,j,O,P,V,pe,q,R,z,G,K,C,$,J,U],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative}.close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background-color:#000;width:40px;height:40px}.close[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;margin-top:5px;color:#fff}.row[_ngcontent-%COMP%]{width:100%;margin-top:60px}.input_div[_ngcontent-%COMP%]{margin-left:2%;margin-bottom:10px}#naam[_ngcontent-%COMP%]{width:80%;margin-left:9%}#prijs[_ngcontent-%COMP%]{width:80%;margin-left:8.7%}#img[_ngcontent-%COMP%]{width:80%;margin-left:3%}#fabrikant[_ngcontent-%COMP%]{width:80%;margin-left:4%}#beschrijving[_ngcontent-%COMP%]{width:80%;margin-left:1.2%;min-height:100px;max-height:calc(100vh - 400px)}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{border-radius:20px;padding:10px;border-color:#fff;background-color:#87cefa;color:#000}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button:hover{background-color:#000;color:#87cefa}.aanpassen[_ngcontent-%COMP%]{border-radius:20px;padding:10px;border-color:#fff;background-color:#87cefa;color:#000}.aanpassen[_ngcontent-%COMP%]:hover{background-color:#000;color:#87cefa}"]});let a=r;return a})();var ht=[{path:"",component:Se,canActivate:[Z],canActivateChild:[ee],children:[{path:":id",component:ne,data:{showKoopButton:!0}}]},{path:":id/change",component:xe,canActivate:[Z],canActivateChild:[ee],canDeactivate:[de],children:[{path:"",component:ne,data:{showKoopButton:!1}}]}];export{ht as itemRoutes};
