var cN=Object.defineProperty,uN=Object.defineProperties;var lN=Object.getOwnPropertyDescriptors;var Gc=Object.getOwnPropertySymbols,dN=Object.getPrototypeOf,uw=Object.prototype.hasOwnProperty,lw=Object.prototype.propertyIsEnumerable,hN=Reflect.get;var cw=(t,e,n)=>e in t?cN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})uw.call(e,n)&&cw(t,n,e[n]);if(Gc)for(var n of Gc(e))lw.call(e,n)&&cw(t,n,e[n]);return t},Ne=(t,e)=>uN(t,lN(e));var Qh=(t,e)=>{var n={};for(var r in t)uw.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Gc)for(var r of Gc(t))e.indexOf(r)<0&&lw.call(t,r)&&(n[r]=t[r]);return n};var yr=(t,e,n)=>hN(dN(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});var dw=null;var Yh=1,hw=Symbol("SIGNAL");function me(t){let e=dw;return dw=t,e}var fw={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fN(t){if(!(Xh(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Yh)){if(!t.producerMustRecompute(t)&&!Jh(t)){t.dirty=!1,t.lastCleanEpoch=Yh;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Yh}}function pw(t){return t&&(t.nextProducerIndex=0),me(t)}function gw(t,e){if(me(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Xh(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Zh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Jh(t){Wc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(fN(n),r!==n.version))return!0}return!1}function mw(t){if(Wc(t),Xh(t))for(let e=0;e<t.producerNode.length;e++)Zh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Zh(t,e){if(pN(t),Wc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Zh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Wc(i),i.producerIndexOfThis[r]=e}}function Xh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Wc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function pN(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function gN(){throw new Error}var mN=gN;function yw(t){mN=t}function G(t){return typeof t=="function"}function es(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Kc=es(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ii(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Fe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(G(r))try{r()}catch(s){e=s instanceof Kc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{vw(s)}catch(o){e=e??[],o instanceof Kc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Kc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)vw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ii(n,e)}remove(e){let{_finalizers:n}=this;n&&ii(n,e),e instanceof t&&e._removeParent(this)}};Fe.EMPTY=(()=>{let t=new Fe;return t.closed=!0,t})();var ef=Fe.EMPTY;function Qc(t){return t instanceof Fe||t&&"closed"in t&&G(t.remove)&&G(t.add)&&G(t.unsubscribe)}function vw(t){G(t)?t():t.unsubscribe()}var en={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ts={setTimeout(t,e,...n){let{delegate:r}=ts;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ts;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Yc(t){ts.setTimeout(()=>{let{onUnhandledError:e}=en;if(e)e(t);else throw t})}function Ho(){}var _w=tf("C",void 0,void 0);function Iw(t){return tf("E",void 0,t)}function ww(t){return tf("N",t,void 0)}function tf(t,e,n){return{kind:t,value:e,error:n}}var si=null;function ns(t){if(en.useDeprecatedSynchronousErrorHandling){let e=!si;if(e&&(si={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=si;if(si=null,n)throw r}}else t()}function Ew(t){en.useDeprecatedSynchronousErrorHandling&&si&&(si.errorThrown=!0,si.error=t)}var oi=class extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qc(e)&&e.add(this)):this.destination=_N}static create(e,n,r){return new Bn(e,n,r)}next(e){this.isStopped?rf(ww(e),this):this._next(e)}error(e){this.isStopped?rf(Iw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?rf(_w,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},yN=Function.prototype.bind;function nf(t,e){return yN.call(t,e)}var sf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Jc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Jc(r)}else Jc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Jc(n)}}},Bn=class extends oi{constructor(e,n,r){super();let i;if(G(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&en.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&nf(e.next,s),error:e.error&&nf(e.error,s),complete:e.complete&&nf(e.complete,s)}):i=e}this.destination=new sf(i)}};function Jc(t){en.useDeprecatedSynchronousErrorHandling?Ew(t):Yc(t)}function vN(t){throw t}function rf(t,e){let{onStoppedNotification:n}=en;n&&ts.setTimeout(()=>n(t,e))}var _N={closed:!0,next:Ho,error:vN,complete:Ho};var rs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pt(t){return t}function Zc(...t){return of(t)}function of(t){return t.length===0?pt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=wN(n)?n:new Bn(n,r,i);return ns(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Tw(r),new r((i,s)=>{let o=new Bn({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[rs](){return this}pipe(...n){return of(n)(this)}toPromise(n){return n=Tw(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Tw(t){var e;return(e=t??en.Promise)!==null&&e!==void 0?e:Promise}function IN(t){return t&&G(t.next)&&G(t.error)&&G(t.complete)}function wN(t){return t&&t instanceof oi||IN(t)&&Qc(t)}function af(t){return G(t?.lift)}function re(t){return e=>{if(af(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function te(t,e,n,r,i){return new cf(t,e,n,r,i)}var cf=class extends oi{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function is(){return re((t,e)=>{let n=null;t._refCount++;let r=te(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ss=class extends ne{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,af(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fe;let n=this.getSubject();e.add(this.source.subscribe(te(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fe.EMPTY)}return e}refCount(){return is()(this)}};var Dw=es(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var We=(()=>{class t extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Xc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Dw}next(n){ns(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ns(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ns(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ef:(this.currentObservers=null,s.push(n),new Fe(()=>{this.currentObservers=null,ii(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ne;return n.source=this,n}}return t.create=(e,n)=>new Xc(e,n),t})(),Xc=class extends We{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ef}};var Xe=class extends We{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var uf={now(){return(uf.delegate||Date).now()},delegate:void 0};var eu=class extends Fe{constructor(e,n){super()}schedule(e,n=0){return this}};var Go={setInterval(t,e,...n){let{delegate:r}=Go;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Go;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var os=class extends eu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Go.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Go.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ii(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var as=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};as.now=uf.now;var cs=class extends as{constructor(e,n=as.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var vr=new cs(os),lf=vr;var tu=class extends os{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var nu=class extends cs{};var df=new nu(tu);var gt=new ne(t=>t.complete());function ru(t){return t&&G(t.schedule)}function hf(t){return t[t.length-1]}function iu(t){return G(hf(t))?t.pop():void 0}function gn(t){return ru(hf(t))?t.pop():void 0}function bw(t,e){return typeof hf(t)=="number"?t.pop():e}function ff(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Aw(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Cw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ai(t){return this instanceof ai?(this.v=t,this):new ai(t)}function Sw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(v){return new Promise(function(A,N){s.push([m,v,A,N])>1||a(m,v)})})}function a(m,v){try{u(r[m](v))}catch(A){p(s[0][3],A)}}function u(m){m.value instanceof ai?Promise.resolve(m.value.v).then(l,h):p(s[0][2],m)}function l(m){a("next",m)}function h(m){a("throw",m)}function p(m,v){m(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Rw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Cw=="function"?Cw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var us=t=>t&&typeof t.length=="number"&&typeof t!="function";function su(t){return G(t?.then)}function ou(t){return G(t[rs])}function au(t){return Symbol.asyncIterator&&G(t?.[Symbol.asyncIterator])}function cu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function EN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var uu=EN();function lu(t){return G(t?.[uu])}function du(t){return Sw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ai(n.read());if(i)return yield ai(void 0);yield yield ai(r)}}finally{n.releaseLock()}})}function hu(t){return G(t?.getReader)}function Ie(t){if(t instanceof ne)return t;if(t!=null){if(ou(t))return TN(t);if(us(t))return DN(t);if(su(t))return bN(t);if(au(t))return Nw(t);if(lu(t))return CN(t);if(hu(t))return AN(t)}throw cu(t)}function TN(t){return new ne(e=>{let n=t[rs]();if(G(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function DN(t){return new ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function bN(t){return new ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Yc)})}function CN(t){return new ne(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Nw(t){return new ne(e=>{SN(t,e).catch(n=>e.error(n))})}function AN(t){return Nw(du(t))}function SN(t,e){var n,r,i,s;return Aw(this,void 0,void 0,function*(){try{for(n=Rw(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function wt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function _r(t,e=0){return re((n,r)=>{n.subscribe(te(r,i=>wt(r,t,()=>r.next(i),e),()=>wt(r,t,()=>r.complete(),e),i=>wt(r,t,()=>r.error(i),e)))})}function Ir(t,e=0){return re((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function xw(t,e){return Ie(t).pipe(Ir(e),_r(e))}function Mw(t,e){return Ie(t).pipe(Ir(e),_r(e))}function Pw(t,e){return new ne(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Ow(t,e){return new ne(n=>{let r;return wt(n,e,()=>{r=t[uu](),wt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>G(r?.return)&&r.return()})}function fu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ne(n=>{wt(n,e,()=>{let r=t[Symbol.asyncIterator]();wt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function kw(t,e){return fu(du(t),e)}function Fw(t,e){if(t!=null){if(ou(t))return xw(t,e);if(us(t))return Pw(t,e);if(su(t))return Mw(t,e);if(au(t))return fu(t,e);if(lu(t))return Ow(t,e);if(hu(t))return kw(t,e)}throw cu(t)}function Te(t,e){return e?Fw(t,e):Ie(t)}function W(...t){let e=gn(t);return Te(t,e)}function ls(t,e){let n=G(t)?t:()=>t,r=i=>i.error(n());return new ne(e?i=>e.schedule(r,0,i):r)}function pf(t){return!!t&&(t instanceof ne||G(t.lift)&&G(t.subscribe))}var $n=es(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Lw(t){return t instanceof Date&&!isNaN(t)}function Z(t,e){return re((n,r)=>{let i=0;n.subscribe(te(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:RN}=Array;function NN(t,e){return RN(e)?t(...e):t(e)}function ds(t){return Z(e=>NN(t,e))}var{isArray:xN}=Array,{getPrototypeOf:MN,prototype:PN,keys:ON}=Object;function pu(t){if(t.length===1){let e=t[0];if(xN(e))return{args:e,keys:null};if(kN(e)){let n=ON(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function kN(t){return t&&typeof t=="object"&&MN(t)===PN}function gu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Wo(...t){let e=gn(t),n=iu(t),{args:r,keys:i}=pu(t);if(r.length===0)return Te([],e);let s=new ne(FN(r,e,i?o=>gu(i,o):pt));return n?s.pipe(ds(n)):s}function FN(t,e,n=pt){return r=>{Vw(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)Vw(e,()=>{let l=Te(t[u],e),h=!1;l.subscribe(te(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Vw(t,e,n){t?wt(n,t,e):e()}function Uw(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?A(N):u.push(N),A=N=>{s&&e.next(N),l++;let R=!1;Ie(n(N,h++)).subscribe(te(e,M=>{i?.(M),s?v(M):e.next(M)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let M=u.shift();o?wt(e,o,()=>A(M)):A(M)}m()}catch(M){e.error(M)}}))};return t.subscribe(te(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Oe(t,e,n=1/0){return G(e)?Oe((r,i)=>Z((s,o)=>e(r,s,i,o))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),re((r,i)=>Uw(r,i,t,n)))}function mn(t=1/0){return Oe(pt,t)}function jw(){return mn(1)}function hs(...t){return jw()(Te(t,gn(t)))}function mu(t){return new ne(e=>{Ie(t()).subscribe(e)})}function LN(...t){let e=iu(t),{args:n,keys:r}=pu(t),i=new ne(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Ie(n[h]).subscribe(te(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?gu(r,a):a),s.complete())}))}});return e?i.pipe(ds(e)):i}var VN=["addListener","removeListener"],UN=["addEventListener","removeEventListener"],jN=["on","off"];function gf(t,e,n,r){if(G(n)&&(r=n,n=void 0),r)return gf(t,e,n).pipe(ds(r));let[i,s]=qN(t)?UN.map(o=>a=>t[o](e,a,n)):BN(t)?VN.map(Bw(t,e)):$N(t)?jN.map(Bw(t,e)):[];if(!i&&us(t))return Oe(o=>gf(o,e,n))(Ie(t));if(!i)throw new TypeError("Invalid event target");return new ne(o=>{let a=(...u)=>o.next(1<u.length?u:u[0]);return i(a),()=>s(a)})}function Bw(t,e){return n=>r=>t[n](e,r)}function BN(t){return G(t.addListener)&&G(t.removeListener)}function $N(t){return G(t.on)&&G(t.off)}function qN(t){return G(t.addEventListener)&&G(t.removeEventListener)}function $w(t=0,e,n=lf){let r=-1;return e!=null&&(ru(e)?n=e:r=e),new ne(i=>{let s=Lw(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function zN(...t){let e=gn(t),n=bw(t,1/0),r=t;return r.length?r.length===1?Ie(r[0]):mn(n)(Te(r,e)):gt}function et(t,e){return re((n,r)=>{let i=0;n.subscribe(te(r,s=>t.call(e,s,i++)&&r.next(s)))})}function qw(t){return re((e,n)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let l=i;i=null,n.next(l)}o&&n.complete()},u=()=>{s=null,o&&n.complete()};e.subscribe(te(n,l=>{r=!0,i=l,s||Ie(t(l)).subscribe(s=te(n,a,u))},()=>{o=!0,(!r||!s||s.closed)&&n.complete()}))})}function HN(t,e=vr){return qw(()=>$w(t,e))}function wr(t){return re((e,n)=>{let r=null,i=!1,s;r=e.subscribe(te(n,void 0,void 0,o=>{s=Ie(t(o,wr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function zw(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(te(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function qn(t,e){return G(e)?Oe(t,e,1):Oe(t,1)}function GN(t,e=vr){return re((n,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function u(){let l=o+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(te(r,l=>{s=l,o=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Er(t){return re((e,n)=>{let r=!1;e.subscribe(te(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function zn(t){return t<=0?()=>gt:re((e,n)=>{let r=0;e.subscribe(te(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function mf(t){return Z(()=>t)}function Hw(t,e=pt){return t=t??WN,re((n,r)=>{let i,s=!0;n.subscribe(te(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function WN(t,e){return t===e}function yu(t=KN){return re((e,n)=>{let r=!1;e.subscribe(te(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function KN(){return new $n}function ci(t){return re((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function yn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?et((i,s)=>t(i,s,r)):pt,zn(1),n?Er(e):yu(()=>new $n))}function fs(t){return t<=0?()=>gt:re((e,n)=>{let r=[];e.subscribe(te(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function yf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?et((i,s)=>t(i,s,r)):pt,fs(1),n?Er(e):yu(()=>new $n))}function vu(t,e){return re(zw(t,e,arguments.length>=2,!0))}function QN(t={}){let{connector:e=()=>new We,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),o=u=void 0,h=p=!1},A=()=>{let N=o;v(),N?.unsubscribe()};return re((N,R)=>{l++,!p&&!h&&m();let M=u=u??e();R.add(()=>{l--,l===0&&!p&&!h&&(a=vf(A,i))}),M.subscribe(R),!o&&l>0&&(o=new Bn({next:B=>M.next(B),error:B=>{p=!0,m(),a=vf(v,n,B),M.error(B)},complete:()=>{h=!0,m(),a=vf(v,r),M.complete()}}),Ie(N).subscribe(o))})(s)}}function vf(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Bn({next:()=>{r.unsubscribe(),t()}});return Ie(e(...n)).subscribe(r)}function YN(t){return et((e,n)=>t<=n)}function _u(...t){let e=gn(t);return re((n,r)=>{(e?hs(t,n,e):hs(t,n)).subscribe(r)})}function Et(t,e){return re((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(te(r,u=>{i?.unsubscribe();let l=0,h=s++;Ie(t(u,h)).subscribe(i=te(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function _f(t){return re((e,n)=>{Ie(t).subscribe(te(n,()=>n.complete(),Ho)),!n.closed&&e.subscribe(n)})}function Ue(t,e,n){let r=G(t)||e||n?{next:t,error:e,complete:n}:t;return r?re((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(te(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):pt}var ME="https://g.co/ng/security#xss",$=class extends Error{constructor(e,n){super(Zu(e,n)),this.code=e}};function Zu(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function oa(t){return{toString:t}.toString()}var Iu="__parameters__";function JN(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function PE(t,e,n){return oa(()=>{let r=JN(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Iu)?u[Iu]:Object.defineProperty(u,Iu,{value:[]})[Iu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var St=globalThis;function De(t){for(let e in t)if(t[e]===De)return e;throw Error("Could not find renamed property on target object.")}function ZN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function yt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(yt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Ff(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var XN=De({__forward_ref__:De});function OE(t){return t.__forward_ref__=OE,t.toString=function(){return yt(this())},t}function mt(t){return kE(t)?t():t}function kE(t){return typeof t=="function"&&t.hasOwnProperty(XN)&&t.__forward_ref__===OE}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function jt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Xu(t){return Gw(t,LE)||Gw(t,VE)}function FE(t){return Xu(t)!==null}function Gw(t,e){return t.hasOwnProperty(e)?t[e]:null}function ex(t){let e=t&&(t[LE]||t[VE]);return e||null}function Ww(t){return t&&(t.hasOwnProperty(Kw)||t.hasOwnProperty(tx))?t[Kw]:null}var LE=De({\u0275prov:De}),Kw=De({\u0275inj:De}),VE=De({ngInjectableDef:De}),tx=De({ngInjectorDef:De}),q=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function UE(t){return t&&!!t.\u0275providers}var nx=De({\u0275cmp:De}),rx=De({\u0275dir:De}),ix=De({\u0275pipe:De}),sx=De({\u0275mod:De}),Mu=De({\u0275fac:De}),Ko=De({__NG_ELEMENT_ID__:De}),Qw=De({__NG_ENV_ID__:De});function Is(t){return typeof t=="string"?t:t==null?"":String(t)}function ox(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Is(t)}function ax(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,t)}function Up(t,e){throw new $(-201,!1)}var ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ce||{}),Lf;function jE(){return Lf}function Tt(t){let e=Lf;return Lf=t,e}function BE(t,e,n){let r=Xu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ce.Optional)return null;if(e!==void 0)return e;Up(t,"Injector")}var cx={},Qo=cx,Vf="__NG_DI_FLAG__",Pu="ngTempTokenPath",ux="ngTokenPath",lx=/\n/gm,dx="\u0275",Yw="__source",vs;function hx(){return vs}function Tr(t){let e=vs;return vs=t,e}function fx(t,e=ce.Default){if(vs===void 0)throw new $(-203,!1);return vs===null?BE(t,void 0,e):vs.get(t,e&ce.Optional?null:void 0,e)}function U(t,e=ce.Default){return(jE()||fx)(mt(t),e)}function k(t,e=ce.Default){return U(t,el(e))}function el(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Uf(t){let e=[];for(let n=0;n<t.length;n++){let r=mt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,s=ce.Default;for(let o=0;o<r.length;o++){let a=r[o],u=px(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(U(i,s))}else e.push(U(r))}return e}function $E(t,e){return t[Vf]=e,t.prototype[Vf]=e,t}function px(t){return t[Vf]}function gx(t,e,n,r){let i=t[Pu];throw e[Yw]&&i.unshift(e[Yw]),t.message=mx(`
`+t.message,i,n,r),t[ux]=i,t[Pu]=null,t}function mx(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==dx?t.slice(2):t;let i=yt(e);if(Array.isArray(e))i=e.map(yt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):yt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(lx,`
  `)}`}var ct=$E(PE("Optional"),8);var jp=$E(PE("SkipSelf"),4);function hi(t,e){let n=t.hasOwnProperty(Mu);return n?t[Mu]:null}function yx(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function vx(t){return t.flat(Number.POSITIVE_INFINITY)}function Bp(t,e){t.forEach(n=>Array.isArray(n)?Bp(n,e):e(n))}function qE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ou(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function _x(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function Ix(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function $p(t,e,n){let r=aa(t,e);return r>=0?t[r|1]=n:(r=~r,Ix(t,r,e,n)),r}function If(t,e){let n=aa(t,e);if(n>=0)return t[n|1]}function aa(t,e){return wx(t,e,1)}function wx(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var ws={},Dt=[],Es=new q(""),zE=new q("",-1),HE=new q(""),ku=class{get(e,n=Qo){if(n===Qo){let r=new Error(`NullInjectorError: No provider for ${yt(e)}!`);throw r.name="NullInjectorError",r}return n}},GE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(GE||{}),In=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(In||{}),Vt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Vt||{});function Ex(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function jf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];Tx(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function WE(t){return t===3||t===4||t===6}function Tx(t){return t.charCodeAt(0)===64}function Yo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Jw(t,n,i,null,e[++r]):Jw(t,n,i,null,null))}}return t}function Jw(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var KE="ng-template";function Dx(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Ex(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(qp(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function qp(t){return t.type===4&&t.value!==KE}function bx(t,e,n){let r=t.type===4&&!n?KE:t.value;return e===r}function Cx(t,e,n){let r=4,i=t.attrs,s=i!==null?Rx(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!tn(r)&&!tn(u))return!1;if(o&&tn(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!bx(t,u,n)||u===""&&e.length===1){if(tn(r))return!1;o=!0}}else if(r&8){if(i===null||!Dx(t,i,u,n)){if(tn(r))return!1;o=!0}}else{let l=e[++a],h=Ax(u,i,qp(t),n);if(h===-1){if(tn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(tn(r))return!1;o=!0}}}}return tn(r)||o}function tn(t){return(t&1)===0}function Ax(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Nx(e,t)}function QE(t,e,n=!1){for(let r=0;r<e.length;r++)if(Cx(t,e[r],n))return!0;return!1}function Sx(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function Rx(t){for(let e=0;e<t.length;e++){let n=t[e];if(WE(n))return e}return t.length}function Nx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function xx(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function Zw(t,e){return t?":not("+e.trim()+")":e}function Mx(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!tn(o)&&(e+=Zw(s,i),i=""),r=o,s=s||!tn(r);n++}return i!==""&&(e+=Zw(s,i)),e}function Px(t){return t.map(Mx).join(",")}function Ox(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!tn(i))break;i=s}r++}return{attrs:e,classes:n}}function YE(t){return oa(()=>{let e=nT(t),n=Ne(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===GE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||In.Emulated,styles:t.styles||Dt,_:null,schemas:t.schemas||null,tView:null,id:""});rT(n);let r=t.dependencies;return n.directiveDefs=eE(r,!1),n.pipeDefs=eE(r,!0),n.id=Lx(n),n})}function kx(t){return br(t)||ZE(t)}function Fx(t){return t!==null}function Bt(t){return oa(()=>({type:t.type,bootstrap:t.bootstrap||Dt,declarations:t.declarations||Dt,imports:t.imports||Dt,exports:t.exports||Dt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Xw(t,e){if(t==null)return ws;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Vt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Vt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Rr(t){return oa(()=>{let e=nT(t);return rT(e),e})}function JE(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function br(t){return t[nx]||null}function ZE(t){return t[rx]||null}function XE(t){return t[ix]||null}function eT(t){let e=br(t)||ZE(t)||XE(t);return e!==null?e.standalone:!1}function tT(t,e){let n=t[sx]||null;if(!n&&e===!0)throw new Error(`Type ${yt(t)} does not have '\u0275mod' property.`);return n}function nT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ws,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Dt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xw(t.inputs,e),outputs:Xw(t.outputs),debugInfo:null}}function rT(t){t.features?.forEach(e=>e(t))}function eE(t,e){if(!t)return null;let n=e?XE:kx;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Fx)}function Lx(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ss(t){return{\u0275providers:t}}function Vx(...t){return{\u0275providers:iT(!0,t),\u0275fromNgModule:!0}}function iT(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Bp(e,o=>{let a=o;Bf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&sT(i,s),n}function sT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];zp(i,s=>{e(s,r)})}}function Bf(t,e,n,r){if(t=mt(t),!t)return!1;let i=null,s=Ww(t),o=!s&&br(t);if(!s&&!o){let u=t.ngModule;if(s=Ww(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Bf(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Bp(s.imports,h=>{Bf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&sT(l,e)}if(!a){let l=hi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dt},i),e({provide:HE,useValue:i,multi:!0},i),e({provide:Es,useValue:()=>U(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;zp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function zp(t,e){for(let n of t)UE(n)&&(n=n.\u0275providers),Array.isArray(n)?zp(n,e):e(n)}var Ux=De({provide:String,useValue:De});function oT(t){return t!==null&&typeof t=="object"&&Ux in t}function jx(t){return!!(t&&t.useExisting)}function Bx(t){return!!(t&&t.useFactory)}function Ts(t){return typeof t=="function"}function $x(t){return!!t.useClass}var tl=new q(""),Cu={},qx={},wf;function Hp(){return wf===void 0&&(wf=new ku),wf}var vt=class{},Jo=class extends vt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qf(e,o=>this.processProvider(o)),this.records.set(zE,ps(void 0,this)),i.has("environment")&&this.records.set(vt,ps(void 0,this));let s=this.records.get(tl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(HE,Dt,ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Tr(this),r=Tt(void 0),i;try{return e()}finally{Tr(n),Tt(r)}}get(e,n=Qo,r=ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Qw))return e[Qw](this);r=el(r);let i,s=Tr(this),o=Tt(void 0);try{if(!(r&ce.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=Kx(e)&&Xu(e);l&&this.injectableDefInScope(l)?u=ps($f(e),Cu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ce.Self?Hp():this.parent;return n=r&ce.Optional&&n===Qo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Pu]=a[Pu]||[]).unshift(yt(e)),s)throw a;return gx(a,e,"R3InjectorError",this.source)}else throw a}finally{Tt(o),Tr(s)}}resolveInjectorInitializers(){let e=me(null),n=Tr(this),r=Tt(void 0),i;try{let s=this.get(Es,Dt,ce.Self);for(let o of s)o()}finally{Tr(n),Tt(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(yt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){e=mt(e);let n=Ts(e)?e:mt(e&&e.provide),r=Hx(e);if(!Ts(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ps(void 0,Cu,!0),i.factory=()=>Uf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=me(null);try{return n.value===Cu&&(n.value=qx,n.value=n.factory()),typeof n.value=="object"&&n.value&&Wx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=mt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function $f(t){let e=Xu(t),n=e!==null?e.factory:hi(t);if(n!==null)return n;if(t instanceof q)throw new $(204,!1);if(t instanceof Function)return zx(t);throw new $(204,!1)}function zx(t){if(t.length>0)throw new $(204,!1);let n=ex(t);return n!==null?()=>n.factory(t):()=>new t}function Hx(t){if(oT(t))return ps(void 0,t.useValue);{let e=aT(t);return ps(e,Cu)}}function aT(t,e,n){let r;if(Ts(t)){let i=mt(t);return hi(i)||$f(i)}else if(oT(t))r=()=>mt(t.useValue);else if(Bx(t))r=()=>t.useFactory(...Uf(t.deps||[]));else if(jx(t))r=()=>U(mt(t.useExisting));else{let i=mt(t&&(t.useClass||t.provide));if(Gx(t))r=()=>new i(...Uf(t.deps));else return hi(i)||$f(i)}return r}function ps(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Gx(t){return!!t.deps}function Wx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Kx(t){return typeof t=="function"||typeof t=="object"&&t instanceof q}function qf(t,e){for(let n of t)Array.isArray(n)?qf(n,e):n&&UE(n)?qf(n.\u0275providers,e):e(n)}function cn(t,e){t instanceof Jo&&t.assertNotDestroyed();let n,r=Tr(t),i=Tt(void 0);try{return e()}finally{Tr(r),Tt(i)}}function cT(){return jE()!==void 0||hx()!=null}function Qx(t){if(!cT())throw new $(-203,!1)}function Yx(t){return typeof t=="function"}var Qn=0,oe=1,Q=2,tt=3,rn=4,xt=5,Zo=6,Xo=7,sn=8,Ds=9,on=10,je=11,ea=12,tE=13,Rs=14,an=15,ca=16,gs=17,Hn=18,nl=19,uT=20,Dr=21,Ef=22,fi=23,Ut=25,lT=1;var pi=7,Fu=8,bs=9,Nt=10,Gp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Gp||{});function li(t){return Array.isArray(t)&&typeof t[lT]=="object"}function Yn(t){return Array.isArray(t)&&t[lT]===!0}function dT(t){return(t.flags&4)!==0}function rl(t){return t.componentOffset>-1}function Wp(t){return(t.flags&1)===1}function Cr(t){return!!t.template}function Jx(t){return(t[Q]&512)!==0}var zf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function hT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ns(){return fT}function fT(t){return t.type.prototype.ngOnChanges&&(t.setInput=Xx),Zx}Ns.ngInherit=!0;function Zx(){let t=gT(this),e=t?.current;if(e){let n=t.previous;if(n===ws)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Xx(t,e,n,r,i){let s=this.declaredInputs[r],o=gT(t)||eM(t,{previous:ws,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new zf(l&&l.currentValue,n,u===ws),hT(t,e,i,n)}var pT="__ngSimpleChanges__";function gT(t){return t[pT]||null}function eM(t,e){return t[pT]=e}var nE=null;var vn=function(t,e,n){nE?.(t,e,n)},tM="svg",nM="math",rM=!1;function iM(){return rM}function wn(t){for(;Array.isArray(t);)t=t[Qn];return t}function mT(t,e){return wn(e[t])}function $t(t,e){return wn(e[t.index])}function yT(t,e){return t.data[e]}function vT(t,e){return t[e]}function Nr(t,e){let n=e[t];return li(n)?n:n[Qn]}function sM(t){return(t[Q]&4)===4}function Kp(t){return(t[Q]&128)===128}function oM(t){return Yn(t[tt])}function Lu(t,e){return e==null?null:t[e]}function _T(t){t[gs]=0}function aM(t){t[Q]&1024||(t[Q]|=1024,Kp(t)&&ta(t))}function cM(t,e){for(;t>0;)e=e[Rs],t--;return e}function Qp(t){return!!(t[Q]&9216||t[fi]?.dirty)}function Hf(t){t[on].changeDetectionScheduler?.notify(1),Qp(t)?ta(t):t[Q]&64&&(iM()?(t[Q]|=1024,ta(t)):t[on].changeDetectionScheduler?.notify())}function ta(t){t[on].changeDetectionScheduler?.notify();let e=na(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Kp(e)));)e=na(e)}function IT(t,e){if((t[Q]&256)===256)throw new $(911,!1);t[Dr]===null&&(t[Dr]=[]),t[Dr].push(e)}function uM(t,e){if(t[Dr]===null)return;let n=t[Dr].indexOf(e);n!==-1&&t[Dr].splice(n,1)}function na(t){let e=t[tt];return Yn(e)?e[tt]:e}var ae={lFrame:RT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function lM(){return ae.lFrame.elementDepthCount}function dM(){ae.lFrame.elementDepthCount++}function hM(){ae.lFrame.elementDepthCount--}function wT(){return ae.bindingsEnabled}function ET(){return ae.skipHydrationRootTNode!==null}function fM(t){return ae.skipHydrationRootTNode===t}function pM(){ae.skipHydrationRootTNode=null}function ue(){return ae.lFrame.lView}function Ke(){return ae.lFrame.tView}function N6(t){return ae.lFrame.contextLView=t,t[sn]}function x6(t){return ae.lFrame.contextLView=null,t}function bt(){let t=TT();for(;t!==null&&t.type===64;)t=t.parent;return t}function TT(){return ae.lFrame.currentTNode}function gM(){let t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ua(t,e){let n=ae.lFrame;n.currentTNode=t,n.isParent=e}function DT(){return ae.lFrame.isParent}function bT(){ae.lFrame.isParent=!1}function mM(){return ae.lFrame.contextLView}function Yp(){let t=ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function yM(){return ae.lFrame.bindingIndex}function vM(t){return ae.lFrame.bindingIndex=t}function il(){return ae.lFrame.bindingIndex++}function Jp(t){let e=ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function _M(){return ae.lFrame.inI18n}function IM(t,e){let n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,Gf(e)}function wM(){return ae.lFrame.currentDirectiveIndex}function Gf(t){ae.lFrame.currentDirectiveIndex=t}function EM(t){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function CT(){return ae.lFrame.currentQueryIndex}function Zp(t){ae.lFrame.currentQueryIndex=t}function TM(t){let e=t[oe];return e.type===2?e.declTNode:e.type===1?t[xt]:null}function AT(t,e,n){if(n&ce.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ce.Host);)if(i=TM(s),i===null||(s=s[Rs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ae.lFrame=ST();return r.currentTNode=e,r.lView=t,!0}function Xp(t){let e=ST(),n=t[oe];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ST(){let t=ae.lFrame,e=t===null?null:t.child;return e===null?RT(t):e}function RT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function NT(){let t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var xT=NT;function eg(){let t=NT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function DM(t){return(ae.lFrame.contextLView=cM(t,ae.lFrame.contextLView))[sn]}function xr(){return ae.lFrame.selectedIndex}function gi(t){ae.lFrame.selectedIndex=t}function tg(){let t=ae.lFrame;return yT(t.tView,t.selectedIndex)}function bM(){return ae.lFrame.currentNamespace}var MT=!0;function ng(){return MT}function rg(t){MT=t}function CM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=fT(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function ig(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Au(t,e,n){PT(t,e,3,n)}function Su(t,e,n,r){(t[Q]&3)===n&&PT(t,e,n,r)}function Tf(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function PT(t,e,n,r){let i=r!==void 0?t[gs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[gs]+=65536),(a<s||s==-1)&&(AM(t,n,e,u),t[gs]=(t[gs]&4294901760)+u+2),u++}function rE(t,e){vn(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),vn(5,t,e)}}function AM(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Q]>>14<t[gs]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,rE(a,s)):rE(a,s)}var _s=-1,mi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function SM(t){return t instanceof mi}function RM(t){return(t.flags&8)!==0}function NM(t){return(t.flags&16)!==0}function OT(t){return t!==_s}function Vu(t){return t&32767}function xM(t){return t>>16}function Uu(t,e){let n=xM(t),r=e;for(;n>0;)r=r[Rs],n--;return r}var Wf=!0;function ju(t){let e=Wf;return Wf=t,e}var MM=256,kT=MM-1,FT=5,PM=0,_n={};function OM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ko)&&(r=n[Ko]),r==null&&(r=n[Ko]=PM++);let i=r&kT,s=1<<i;e.data[t+(i>>FT)]|=s}function Bu(t,e){let n=LT(t,e);if(n!==-1)return n;let r=e[oe];r.firstCreatePass&&(t.injectorIndex=e.length,Df(r.data,t),Df(e,null),Df(r.blueprint,null));let i=sg(t,e),s=t.injectorIndex;if(OT(i)){let o=Vu(i),a=Uu(i,e),u=a[oe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Df(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function sg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=$T(i),r===null)return _s;if(n++,i=i[Rs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return _s}function Kf(t,e,n){OM(t,e,n)}function kM(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(WE(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function VT(t,e,n){if(n&ce.Optional||t!==void 0)return t;Up(e,"NodeInjector")}function UT(t,e,n,r){if(n&ce.Optional&&r===void 0&&(r=null),!(n&(ce.Self|ce.Host))){let i=t[Ds],s=Tt(void 0);try{return i?i.get(e,r,n&ce.Optional):BE(e,r,n&ce.Optional)}finally{Tt(s)}}return VT(r,e,n)}function jT(t,e,n,r=ce.Default,i){if(t!==null){if(e[Q]&2048&&!(r&ce.Self)){let o=UM(t,e,n,r,_n);if(o!==_n)return o}let s=BT(t,e,n,r,_n);if(s!==_n)return s}return UT(e,n,r,i)}function BT(t,e,n,r,i){let s=LM(n);if(typeof s=="function"){if(!AT(e,t,r))return r&ce.Host?VT(i,n,r):UT(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ce.Optional))Up(n);else return o}finally{xT()}}else if(typeof s=="number"){let o=null,a=LT(t,e),u=_s,l=r&ce.Host?e[an][xt]:null;for((a===-1||r&ce.SkipSelf)&&(u=a===-1?sg(t,e):e[a+8],u===_s||!sE(r,!1)?a=-1:(o=e[oe],a=Vu(u),e=Uu(u,e)));a!==-1;){let h=e[oe];if(iE(s,a,h.data)){let p=FM(a,e,n,o,r,l);if(p!==_n)return p}u=e[a+8],u!==_s&&sE(r,e[oe].data[a+8]===l)&&iE(s,a,e)?(o=h,a=Vu(u),e=Uu(u,e)):a=-1}}return i}function FM(t,e,n,r,i,s){let o=e[oe],a=o.data[t+8],u=r==null?rl(a)&&Wf:r!=o&&(a.type&3)!==0,l=i&ce.Host&&s===a,h=Ru(a,o,n,u,l);return h!==null?yi(e,o,h,a):_n}function Ru(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let A=o[v];if(v<u&&n===A||v>=u&&A.type===n)return v}if(i){let v=o[u];if(v&&Cr(v)&&v.type===n)return u}return null}function yi(t,e,n,r){let i=t[n],s=e.data;if(SM(i)){let o=i;o.resolving&&ax(ox(s[n]));let a=ju(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Tt(o.injectImpl):null,h=AT(t,r,ce.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&CM(n,s[n],e)}finally{l!==null&&Tt(l),ju(a),o.resolving=!1,xT()}}return i}function LM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ko)?t[Ko]:void 0;return typeof e=="number"?e>=0?e&kT:VM:e}function iE(t,e,n){let r=1<<t;return!!(n[e+(t>>FT)]&r)}function sE(t,e){return!(t&ce.Self)&&!(t&ce.Host&&e)}var di=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return jT(this._tNode,this._lView,e,el(r),n)}};function VM(){return new di(bt(),ue())}function og(t){return oa(()=>{let e=t.prototype.constructor,n=e[Mu]||Qf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Mu]||Qf(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Qf(t){return kE(t)?()=>{let e=Qf(mt(t));return e&&e()}:hi(t)}function UM(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=BT(s,o,n,r|ce.Self,_n);if(a!==_n)return a;let u=s.parent;if(!u){let l=o[uT];if(l){let h=l.get(n,_n,r);if(h!==_n)return h}u=$T(o),o=o[Rs]}s=u}return i}function $T(t){let e=t[oe],n=e.type;return n===2?e.declTNode:n===1?t[xt]:null}function ag(t){return kM(bt(),t)}function oE(t,e=null,n=null,r){let i=qT(t,e,n,r);return i.resolveInjectorInitializers(),i}function qT(t,e=null,n=null,r,i=new Set){let s=[n||Dt,Vx(t)];return r=r||(typeof t=="object"?void 0:yt(t)),new Jo(s,e||Hp(),r||null,i)}var Ct=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return oE({name:""},i,r,"");{let s=r.name??"";return oE({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Qo,e.NULL=new ku,e.\u0275prov=j({token:e,providedIn:"any",factory:()=>U(zE)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var jM="ngOriginalError";function bf(t){return t[jM]}var En=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&bf(e);for(;n&&bf(n);)n=bf(n);return n||null}},zT=new q("",{providedIn:"root",factory:()=>k(En).handleError.bind(void 0)}),cg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=BM,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Yf=class extends cg{constructor(e){super(),this._lView=e}onDestroy(e){return IT(this._lView,e),()=>uM(this._lView,e)}};function BM(){return new Yf(ue())}function $M(){return xs(bt(),ue())}function xs(t,e){return new Tn($t(t,e))}var Tn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=$M;let t=e;return t})();function qM(t){return t instanceof Tn?t.nativeElement:t}var Jf=class extends We{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,cT()&&(this.destroyRef=k(cg,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Cf(s),i&&(i=Cf(i)),o&&(o=Cf(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Fe&&e.add(a),a}};function Cf(t){return e=>{setTimeout(t,void 0,e)}}var Rt=Jf;function zM(){return this._results[Symbol.iterator]()}var Zf=class t{get changes(){return this._changes??=new Rt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=zM)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=vx(e);(this._changesDetected=!yx(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function HT(t){return(t.flags&128)===128}var GT=new Map,HM=0;function GM(){return HM++}function WM(t){GT.set(t[nl],t)}function KM(t){GT.delete(t[nl])}var aE="__ngContext__";function vi(t,e){li(e)?(t[aE]=e[nl],WM(e)):t[aE]=e}function WT(t){return QT(t[ea])}function KT(t){return QT(t[rn])}function QT(t){for(;t!==null&&!Yn(t);)t=t[rn];return t}var Xf;function YT(t){Xf=t}function QM(){if(Xf!==void 0)return Xf;if(typeof document<"u")return document;throw new $(210,!1)}var ug=new q("",{providedIn:"root",factory:()=>YM}),YM="ng",lg=new q(""),qt=new q("",{providedIn:"platform",factory:()=>"unknown"});var M6=new q(""),dg=new q("",{providedIn:"root",factory:()=>QM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var JM="h",ZM="b";var XM=()=>null;function hg(t,e,n=!1){return XM(t,e,n)}var JT=!1,eP=new q("",{providedIn:"root",factory:()=>JT});var wu;function tP(){if(wu===void 0&&(wu=null,St.trustedTypes))try{wu=St.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return wu}function sl(t){return tP()?.createHTML(t)||t}var Eu;function nP(){if(Eu===void 0&&(Eu=null,St.trustedTypes))try{Eu=St.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Eu}function cE(t){return nP()?.createScriptURL(t)||t}var Gn=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ME})`}},ep=class extends Gn{getTypeName(){return"HTML"}},tp=class extends Gn{getTypeName(){return"Style"}},np=class extends Gn{getTypeName(){return"Script"}},rp=class extends Gn{getTypeName(){return"URL"}},ip=class extends Gn{getTypeName(){return"ResourceURL"}};function un(t){return t instanceof Gn?t.changingThisBreaksApplicationSecurity:t}function Mr(t,e){let n=rP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ME})`)}return n===e}function rP(t){return t instanceof Gn&&t.getTypeName()||null}function ZT(t){return new ep(t)}function XT(t){return new tp(t)}function eD(t){return new np(t)}function tD(t){return new rp(t)}function nD(t){return new ip(t)}function iP(t){let e=new op(t);return sP()?new sp(e):e}var sp=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(sl(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},op=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=sl(e),n}};function sP(){try{return!!new window.DOMParser().parseFromString(sl(""),"text/html")}catch{return!1}}var oP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ol(t){return t=String(t),t.match(oP)?t:"unsafe:"+t}function Jn(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function la(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var rD=Jn("area,br,col,hr,img,wbr"),iD=Jn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sD=Jn("rp,rt"),aP=la(sD,iD),cP=la(iD,Jn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),uP=la(sD,Jn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),uE=la(rD,cP,uP,aP),oD=Jn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lP=Jn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),dP=Jn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),hP=la(oD,lP,dP),fP=Jn("script,style,template"),ap=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=mP(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=gP(n);if(s){n=s;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=lE(e).toLowerCase();if(!uE.hasOwnProperty(n))return this.sanitizedSomething=!0,!fP.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!hP.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;oD[a]&&(u=ol(u)),this.buf.push(" ",o,'="',dE(u),'"')}return this.buf.push(">"),!0}endElement(e){let n=lE(e).toLowerCase();uE.hasOwnProperty(n)&&!rD.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(dE(e))}};function pP(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function gP(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw aD(e);return e}function mP(t){let e=t.firstChild;if(e&&pP(t,e))throw aD(e);return e}function lE(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function aD(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var yP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vP=/([^\#-~ |!])/g;function dE(t){return t.replace(/&/g,"&amp;").replace(yP,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(vP,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Tu;function cD(t,e){let n=null;try{Tu=Tu||iP(t);let r=e?String(e):"";n=Tu.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Tu.getInertBodyElement(r)}while(r!==s);let a=new ap().sanitizeChildren(hE(n)||n);return sl(a)}finally{if(n){let r=hE(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function hE(t){return"content"in t&&_P(t)?t.content:null}function _P(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Dn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Dn||{});function IP(t){let e=lD();return e?e.sanitize(Dn.URL,t)||"":Mr(t,"URL")?un(t):ol(Is(t))}function wP(t){let e=lD();if(e)return cE(e.sanitize(Dn.RESOURCE_URL,t)||"");if(Mr(t,"ResourceURL"))return cE(un(t));throw new $(904,!1)}function EP(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?wP:IP}function uD(t,e,n){return EP(e,n)(t)}function lD(){let t=ue();return t&&t[on].sanitizer}function dD(t){return t instanceof Function?t():t}function TP(t){return(t??k(Ct)).get(qt)==="browser"}var Wn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Wn||{}),DP;function fg(t,e){return DP(t,e)}function ms(t,e,n,r,i){if(r!=null){let s,o=!1;Yn(r)?s=r:li(r)&&(o=!0,r=r[Qn]);let a=wn(r);t===0&&n!==null?i==null?yD(e,n,a):$u(e,n,a,i||null,!0):t===1&&n!==null?$u(e,n,a,i||null,!0):t===2?UP(e,a,o):t===3&&e.destroyNode(a),s!=null&&BP(e,t,s,n,i)}}function bP(t,e){return t.createText(e)}function CP(t,e,n){t.setValue(e,n)}function hD(t,e,n){return t.createElement(e,n)}function AP(t,e){fD(t,e),e[Qn]=null,e[xt]=null}function SP(t,e,n,r,i,s){r[Qn]=i,r[xt]=e,al(t,r,n,1,i,s)}function fD(t,e){e[on].changeDetectionScheduler?.notify(1),al(t,e,e[je],2,null,null)}function RP(t){let e=t[ea];if(!e)return Af(t[oe],t);for(;e;){let n=null;if(li(e))n=e[ea];else{let r=e[Nt];r&&(n=r)}if(!n){for(;e&&!e[rn]&&e!==t;)li(e)&&Af(e[oe],e),e=e[tt];e===null&&(e=t),li(e)&&Af(e[oe],e),n=e&&e[rn]}e=n}}function NP(t,e,n,r){let i=Nt+r,s=n.length;r>0&&(n[i-1][rn]=e),r<s-Nt?(e[rn]=n[i],qE(n,Nt+r,e)):(n.push(e),e[rn]=null),e[tt]=n;let o=e[ca];o!==null&&n!==o&&xP(o,e);let a=e[Hn];a!==null&&a.insertView(t),Hf(e),e[Q]|=128}function xP(t,e){let n=t[bs],i=e[tt][tt][an];e[an]!==i&&(t[Q]|=Gp.HasTransplantedViews),n===null?t[bs]=[e]:n.push(e)}function pD(t,e){let n=t[bs],r=n.indexOf(e);n.splice(r,1)}function cp(t,e){if(t.length<=Nt)return;let n=Nt+e,r=t[n];if(r){let i=r[ca];i!==null&&i!==t&&pD(i,r),e>0&&(t[n-1][rn]=r[rn]);let s=Ou(t,Nt+e);AP(r[oe],r);let o=s[Hn];o!==null&&o.detachView(s[oe]),r[tt]=null,r[rn]=null,r[Q]&=-129}return r}function gD(t,e){if(!(e[Q]&256)){let n=e[je];n.destroyNode&&al(t,e,n,3,null,null),RP(e)}}function Af(t,e){if(e[Q]&256)return;let n=me(null);try{e[Q]&=-129,e[Q]|=256,e[fi]&&mw(e[fi]),PP(t,e),MP(t,e),e[oe].type===1&&e[je].destroy();let r=e[ca];if(r!==null&&Yn(e[tt])){r!==e[tt]&&pD(r,e);let i=e[Hn];i!==null&&i.detachView(t)}KM(e)}finally{me(n)}}function MP(t,e){let n=t.cleanup,r=e[Xo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Xo]=null);let i=e[Dr];if(i!==null){e[Dr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function PP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof mi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];vn(4,a,u);try{u.call(a)}finally{vn(5,a,u)}}else{vn(4,i,s);try{s.call(i)}finally{vn(5,i,s)}}}}}function mD(t,e,n){return OP(t,e.parent,n)}function OP(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Qn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===In.None||s===In.Emulated)return null}return $t(r,n)}}function $u(t,e,n,r,i){t.insertBefore(e,n,r,i)}function yD(t,e,n){t.appendChild(e,n)}function fE(t,e,n,r,i){r!==null?$u(t,e,n,r,i):yD(t,e,n)}function kP(t,e,n,r){t.removeChild(e,n,r)}function pg(t,e){return t.parentNode(e)}function FP(t,e){return t.nextSibling(e)}function vD(t,e,n){return VP(t,e,n)}function LP(t,e,n){return t.type&40?$t(t,n):null}var VP=LP,pE;function gg(t,e,n,r){let i=mD(t,r,e),s=e[je],o=r.parent||e[xt],a=vD(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)fE(s,i,n[u],a,!1);else fE(s,i,n,a,!1);pE!==void 0&&pE(s,r,e,n,i)}function Nu(t,e){if(e!==null){let n=e.type;if(n&3)return $t(e,t);if(n&4)return up(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Nu(t,r);{let i=t[e.index];return Yn(i)?up(-1,i):wn(i)}}else{if(n&32)return fg(e,t)()||wn(t[e.index]);{let r=_D(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=na(t[an]);return Nu(i,r)}else return Nu(t,e.next)}}}return null}function _D(t,e){if(e!==null){let r=t[an][xt],i=e.projection;return r.projection[i]}return null}function up(t,e){let n=Nt+t+1;if(n<e.length){let r=e[n],i=r[oe].firstChild;if(i!==null)return Nu(r,i)}return e[pi]}function UP(t,e,n){let r=pg(t,e);r&&kP(t,r,e,n)}function mg(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&vi(wn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)mg(t,e,n.child,r,i,s,!1),ms(e,t,i,a,s);else if(u&32){let l=fg(n,r),h;for(;h=l();)ms(e,t,i,h,s);ms(e,t,i,a,s)}else u&16?ID(t,e,r,n,i,s):ms(e,t,i,a,s);n=o?n.projectionNext:n.next}}function al(t,e,n,r,i,s){mg(n,r,t.firstChild,e,i,s,!1)}function jP(t,e,n){let r=e[je],i=mD(t,n,e),s=n.parent||e[xt],o=vD(s,n,e);ID(r,0,e,n,i,o)}function ID(t,e,n,r,i,s){let o=n[an],u=o[xt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ms(e,t,i,h,s)}else{let l=u,h=o[tt];HT(r)&&(l.flags|=128),mg(t,e,l,h,i,s,!0)}}function BP(t,e,n,r,i){let s=n[pi],o=wn(n);s!==o&&ms(e,t,r,s,i);for(let a=Nt;a<n.length;a++){let u=n[a];al(u[oe],u,t,e,r,s)}}function $P(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Wn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Wn.Important),t.setStyle(n,r,i,s))}}function qP(t,e,n){t.setAttribute(e,"style",n)}function wD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ED(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&jf(t,e,r),i!==null&&wD(t,e,i),s!==null&&qP(t,e,s)}var zt={};function P6(t=1){TD(Ke(),ue(),xr()+t,!1)}function TD(t,e,n,r){if(!r)if((e[Q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Au(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Su(e,s,0,n)}gi(n)}function Ae(t,e=ce.Default){let n=ue();if(n===null)return U(t,e);let r=bt();return jT(r,n,mt(t),e)}function DD(){let t="invalid";throw new Error(t)}function bD(t,e,n,r,i,s){let o=me(null);try{let a=null;i&Vt.SignalBased&&(a=e[r][hw]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Vt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):hT(e,a,r,s)}finally{me(o)}}function zP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)gi(~i);else{let s=i,o=n[++r],a=n[++r];IM(o,s);let u=e[s];a(2,u)}}}finally{gi(-1)}}function cl(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Qn]=i,p[Q]=r|4|128|8|64,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),_T(p),p[tt]=p[Rs]=t,p[sn]=n,p[on]=o||t&&t[on],p[je]=a||t&&t[je],p[Ds]=u||t&&t[Ds]||null,p[xt]=s,p[nl]=GM(),p[Zo]=h,p[uT]=l,p[an]=e.type==2?t[an]:p,p}function da(t,e,n,r,i){let s=t.data[e];if(s===null)s=HP(t,e,n,r,i),_M()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=gM();s.injectorIndex=o===null?-1:o.injectorIndex}return ua(s,!0),s}function HP(t,e,n,r,i){let s=TT(),o=DT(),a=o?s:s&&s.parent,u=t.data[e]=JP(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function CD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function AD(t,e,n,r,i){let s=xr(),o=r&2;try{gi(-1),o&&e.length>Ut&&TD(t,e,Ut,!1),vn(o?2:0,i),n(r,i)}finally{gi(s),vn(o?3:1,i)}}function SD(t,e,n){if(dT(e)){let r=me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{me(r)}}}function RD(t,e,n){wT()&&(rO(t,e,n,$t(n,e)),(n.flags&64)===64&&kD(t,e,n))}function ND(t,e,n=$t){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function xD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=yg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function yg(t,e,n,r,i,s,o,a,u,l,h){let p=Ut+r,m=p+i,v=GP(p,m),A=typeof l=="function"?l():l;return v[oe]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function GP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:zt);return n}function WP(t,e,n,r){let s=r.get(eP,JT)||n===In.ShadowDom,o=t.selectRootElement(e,s);return KP(o),o}function KP(t){QP(t)}var QP=()=>null;function YP(t,e,n,r){let i=VD(e);i.push(n),t.firstCreatePass&&UD(t).push(r,i.length-1)}function JP(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return ET()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function gE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Vt.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?mE(r,n,l,a,u):mE(r,n,l,a)}return r}function mE(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function ZP(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,v=m?m.inputs:null,A=m?m.outputs:null;u=gE(0,p.inputs,h,u,v),l=gE(1,p.outputs,h,l,A);let N=u!==null&&o!==null&&!qp(e)?pO(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function XP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function MD(t,e,n,r,i,s,o,a){let u=$t(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(vg(t,n,h,r,i),rl(e)&&eO(n,e.index)):e.type&3?(r=XP(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function eO(t,e){let n=Nr(e,t);n[Q]&16||(n[Q]|=64)}function PD(t,e,n,r){if(wT()){let i=r===null?null:{"":-1},s=sO(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&OD(t,e,n,o,i,a),i&&oO(n,r,i)}n.mergedAttrs=Yo(n.mergedAttrs,n.attrs)}function OD(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Kf(Bu(n,e),t,r[l].type);cO(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=CD(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Yo(n.mergedAttrs,h.hostAttrs),uO(t,n,e,u,h),aO(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}ZP(t,n,s)}function tO(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;nO(o)!=a&&o.push(a),o.push(n,r,s)}}function nO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function rO(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;rl(n)&&lO(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Bu(n,e),vi(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=yi(e,t,a,n);if(vi(l,e),o!==null&&fO(e,a-i,l,u,n,o),Cr(u)){let h=Nr(n.index,e);h[sn]=yi(e,t,a,n)}}}function kD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=wM();try{gi(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Gf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&iO(u,l)}}finally{gi(-1),Gf(o)}}function iO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function sO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(QE(e,o.selectors,!1))if(r||(r=[]),Cr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;lp(t,e,u)}else r.unshift(o),lp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function lp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function oO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new $(-301,!1);r.push(e[i],s)}}}function aO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Cr(e)&&(n[""]=t)}}function cO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function uO(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=hi(i.type,!0)),o=new mi(s,Cr(i),Ae);t.blueprint[r]=o,n[r]=o,tO(t,e,r,CD(t,n,i.hostVars,zt),i)}function lO(t,e,n){let r=$t(e,t),i=xD(n),s=t[on].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=ul(t,cl(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function dO(t,e,n,r,i,s){let o=$t(t,e);hO(e[je],o,s,t.value,n,r,i)}function hO(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Is(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function fO(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];bD(r,n,u,l,h,p)}}function pO(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function FD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function LD(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Zp(s),a.contentQueries(2,e[o],o)}}}finally{me(r)}}}function ul(t,e){return t[ea]?t[tE][rn]=e:t[ea]=e,t[tE]=e,e}function dp(t,e,n){Zp(0);let r=me(null);try{e(t,n)}finally{me(r)}}function VD(t){return t[Xo]||(t[Xo]=[])}function UD(t){return t.cleanup||(t.cleanup=[])}function jD(t,e){let n=t[Ds],r=n?n.get(En,null):null;r&&r.handleError(e)}function vg(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];bD(h,l,r,a,u,i)}}function BD(t,e,n){let r=mT(e,t);CP(t[je],r,n)}function gO(t,e){let n=Nr(e,t),r=n[oe];mO(r,n);let i=n[Qn];i!==null&&n[Zo]===null&&(n[Zo]=hg(i,n[Ds])),_g(r,n,n[sn])}function mO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function _g(t,e,n){Xp(e);try{let r=t.viewQuery;r!==null&&dp(1,r,n);let i=t.template;i!==null&&AD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Hn]?.finishViewCreation(t),t.staticContentQueries&&LD(t,e),t.staticViewQueries&&dp(2,t.viewQuery,n);let s=t.components;s!==null&&yO(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,eg()}}function yO(t,e){for(let n=0;n<e.length;n++)gO(t,e[n])}function vO(t,e,n,r){let i=me(null);try{let s=e.tView,a=t[Q]&4096?4096:16,u=cl(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ca]=l;let h=t[Hn];return h!==null&&(u[Hn]=h.createEmbeddedView(s)),_g(s,u,n),u}finally{me(i)}}function yE(t,e){return!e||e.firstChild===null||HT(t)}function _O(t,e,n,r=!0){let i=e[oe];if(NP(i,e,t,n),r){let o=up(n,t),a=e[je],u=pg(a,t[pi]);u!==null&&SP(i,t[xt],a,e,u,o)}let s=e[Zo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function qu(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(wn(s)),Yn(s)&&IO(s,r);let o=n.type;if(o&8)qu(t,e,n.child,r);else if(o&32){let a=fg(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=_D(e,n);if(Array.isArray(a))r.push(...a);else{let u=na(e[an]);qu(u[oe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function IO(t,e){for(let n=Nt;n<t.length;n++){let r=t[n],i=r[oe].firstChild;i!==null&&qu(r[oe],r,i,e)}t[pi]!==t[Qn]&&e.push(t[pi])}var $D=[];function wO(t){return t[fi]??EO(t)}function EO(t){let e=$D.pop()??Object.create(DO);return e.lView=t,e}function TO(t){t.lView[fi]!==t&&(t.lView=null,$D.push(t))}var DO=Ne(L({},fw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ta(t.lView)},consumerOnSignalRead(){this.lView[fi]=this}}),qD=100;function zD(t,e=!0,n=0){let r=t[on],i=r.rendererFactory,s=!1;s||i.begin?.();try{bO(t,n)}catch(o){throw e&&jD(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function bO(t,e){hp(t,e);let n=0;for(;Qp(t);){if(n===qD)throw new $(103,!1);n++,hp(t,1)}}function CO(t,e,n,r){let i=e[Q];if((i&256)===256)return;let s=!1;!s&&e[on].inlineEffectRunner?.flush(),Xp(e);let o=null,a=null;!s&&AO(t)&&(a=wO(e),o=pw(a));try{_T(e),vM(t.bindingStartIndex),n!==null&&AD(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&Au(e,p,null)}else{let p=t.preOrderHooks;p!==null&&Su(e,p,0,null),Tf(e,0)}if(SO(e),HD(e,0),t.contentQueries!==null&&LD(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&Au(e,p)}else{let p=t.contentHooks;p!==null&&Su(e,p,1),Tf(e,1)}zP(t,e);let l=t.components;l!==null&&WD(e,l,0);let h=t.viewQuery;if(h!==null&&dp(2,h,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&Au(e,p)}else{let p=t.viewHooks;p!==null&&Su(e,p,2),Tf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ef]){for(let p of e[Ef])p();e[Ef]=null}s||(e[Q]&=-73)}catch(u){throw ta(e),u}finally{a!==null&&(gw(a,o),TO(a)),eg()}}function AO(t){return t.type!==2}function HD(t,e){for(let n=WT(t);n!==null;n=KT(n))for(let r=Nt;r<n.length;r++){let i=n[r];GD(i,e)}}function SO(t){for(let e=WT(t);e!==null;e=KT(e)){if(!(e[Q]&Gp.HasTransplantedViews))continue;let n=e[bs];for(let r=0;r<n.length;r++){let i=n[r],s=i[tt];aM(i)}}}function RO(t,e,n){let r=Nr(e,t);GD(r,n)}function GD(t,e){Kp(t)&&hp(t,e)}function hp(t,e){let r=t[oe],i=t[Q],s=t[fi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Jh(s)),s&&(s.dirty=!1),t[Q]&=-9217,o)CO(r,t,r.template,t[sn]);else if(i&8192){HD(t,1);let a=r.components;a!==null&&WD(t,a,1)}}function WD(t,e,n){for(let r=0;r<e.length;r++)RO(t,e[r],n)}function Ig(t){for(t[on].changeDetectionScheduler?.notify();t;){t[Q]|=64;let e=na(t);if(Jx(t)&&!e)return t;t=e}return null}var _i=class{get rootNodes(){let e=this._lView,n=e[oe];return qu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[sn]}set context(e){this._lView[sn]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tt];if(Yn(e)){let n=e[Fu],r=n?n.indexOf(this):-1;r>-1&&(cp(e,r),Ou(n,r))}this._attachedToViewContainer=!1}gD(this._lView[oe],this._lView)}onDestroy(e){IT(this._lView,e)}markForCheck(){Ig(this._cdRefInjectingView||this._lView)}detach(){this._lView[Q]&=-129}reattach(){Hf(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,zD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,fD(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e,Hf(this._lView)}},Ii=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=MO;let t=e;return t})(),NO=Ii,xO=class extends NO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=vO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new _i(i)}};function MO(){return wg(bt(),ue())}function wg(t,e){return t.type&4?new xO(e,t,xs(t,e)):null}var k6=new RegExp(`^(\\d+)*(${ZM}|${JM})*(.*)`);var PO=()=>null;function vE(t,e){return PO(t,e)}var zu=class{},fp=class{},Hu=class{};function OO(t){let e=Error(`No component factory found for ${yt(t)}.`);return e[kO]=t,e}var kO="ngComponent";var pp=class{resolveComponentFactory(e){throw OO(e)}},ll=(()=>{let e=class e{};e.NULL=new pp;let t=e;return t})(),ra=class{},Ms=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>FO();let t=e;return t})();function FO(){let t=ue(),e=bt(),n=Nr(e.index,t);return(li(n)?n:t)[je]}var LO=(()=>{let e=class e{};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Sf={};var _E=new Set;function dl(t){_E.has(t)||(_E.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function IE(...t){}function VO(){let t=typeof St.requestAnimationFrame=="function",e=St[t?"requestAnimationFrame":"setTimeout"],n=St[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var pe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rt(!1),this.onMicrotaskEmpty=new Rt(!1),this.onStable=new Rt(!1),this.onError=new Rt(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=VO().nativeRequestAnimationFrame,BO(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,UO,IE,IE);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},UO={};function Eg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function jO(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(St,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gp(t),t.isCheckStableRunning=!0,Eg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gp(t))}function BO(t){let e=()=>{jO(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if($O(a))return n.invokeTask(i,s,o,a);try{return wE(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),EE(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return wE(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),EE(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,gp(t),Eg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function gp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function wE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function EE(t){t._nesting--,Eg(t)}function $O(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var ys=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ys||{}),qO={destroy(){}};function Tg(t,e){!e&&Qx(Tg);let n=e?.injector??k(Ct);if(!TP(n))return qO;dl("NgAfterNextRender");let r=n.get(Dg),i=r.handler??=new yp,s=e?.phase??ys.MixedReadWrite,o=()=>{i.unregister(u),a()},a=n.get(cg).onDestroy(o),u=cn(n,()=>new mp(s,()=>{o(),t()}));return i.register(u),{destroy:o}}var mp=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=k(pe),this.errorHandler=k(En,{optional:!0}),k(zu,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},yp=class{constructor(){this.executingCallbacks=!1,this.buckets={[ys.EarlyRead]:new Set,[ys.Write]:new Set,[ys.MixedReadWrite]:new Set,[ys.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Dg=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function vp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Ff(i,a);else if(s==2){let u=a,l=e[++o];r=Ff(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Gu=class extends ll{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=br(e);return new Cs(n,this.ngModule)}};function TE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function zO(t){let e=t.toLowerCase();return e==="svg"?tM:e==="math"?nM:null}var _p=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=el(r);let i=this.injector.get(e,Sf,r);return i!==Sf||n===Sf?i:this.parentInjector.get(e,n,r)}},Cs=class extends Hu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=TE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return TE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Px(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=me(null);try{i=i||this.ngModule;let o=i instanceof vt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new _p(e,o):e,u=a.get(ra,null);if(u===null)throw new $(407,!1);let l=a.get(LO,null),h=a.get(Dg,null),p=a.get(zu,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},v=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",N=r?WP(v,r,this.componentDef.encapsulation,a):hD(v,A,zO(A)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let M=null;N!==null&&(M=hg(N,a,!0));let B=yg(0,null,null,1,0,null,null,null,null,null,null),z=cl(null,B,null,R,null,null,m,v,a,null,M);Xp(z);let K,Ce;try{let ee=this.componentDef,T,y=null;ee.findHostDirectiveDefs?(T=[],y=new Map,ee.findHostDirectiveDefs(ee,T,y),T.push(ee)):T=[ee];let I=HO(z,N),E=GO(I,N,ee,T,z,m,v);Ce=yT(B,Ut),N&&QO(v,ee,N,r),n!==void 0&&YO(Ce,this.ngContentSelectors,n),K=KO(E,ee,T,y,z,[JO]),_g(B,z,null)}finally{eg()}return new Ip(this.componentType,K,xs(Ce,z),z,Ce)}finally{me(s)}}},Ip=class extends fp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new _i(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;vg(s[oe],s,i,e,n),this.previousInputValues.set(e,n);let o=Nr(this._tNode.index,s);Ig(o)}}get injector(){return new di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function HO(t,e){let n=t[oe],r=Ut;return t[r]=e,da(n,r,2,"#host",null)}function GO(t,e,n,r,i,s,o){let a=i[oe];WO(r,t,e,o);let u=null;e!==null&&(u=hg(e,i[Ds]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=cl(i,xD(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&lp(a,t,r.length-1),ul(i,p),i[t.index]=p}function WO(t,e,n,r){for(let i of t)e.mergedAttrs=Yo(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(vp(e,e.mergedAttrs,!0),n!==null&&ED(r,n,e))}function KO(t,e,n,r,i,s){let o=bt(),a=i[oe],u=$t(o,i);OD(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=yi(i,a,p,o);vi(m,i)}kD(a,i,o),u&&vi(u,i);let l=yi(i,a,o.directiveStart+o.componentOffset,o);if(t[sn]=i[sn]=l,s!==null)for(let h of s)h(l,e);return SD(a,o,i),l}function QO(t,e,n,r){if(r)jf(t,n,["ng-version","17.3.4"]);else{let{attrs:i,classes:s}=Ox(e.selectors[0]);i&&jf(t,n,i),s&&s.length>0&&wD(t,n,s.join(" "))}}function YO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function JO(){let t=bt();ig(ue()[oe],t)}var Pr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ZO;let t=e;return t})();function ZO(){let t=bt();return QD(t,ue())}var XO=Pr,KD=class extends XO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return xs(this._hostTNode,this._hostLView)}get injector(){return new di(this._hostTNode,this._hostLView)}get parentInjector(){let e=sg(this._hostTNode,this._hostLView);if(OT(e)){let n=Uu(e,this._hostLView),r=Vu(e),i=n[oe].data[r+8];return new di(i,n)}else return new di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=DE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Nt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=vE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,yE(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!Yx(e),a;if(o)a=n;else{let A=n||{};a=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new Cs(br(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(vt,null);N&&(s=N)}let h=br(u.componentType??{}),p=vE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,s);return this.insertImpl(v.hostView,a,yE(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(oM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[tt],l=new KD(u,u[xt],u[tt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return _O(o,i,s,r),e.attachToViewContainerRef(),qE(Rf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=DE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=cp(this._lContainer,n);r&&(Ou(Rf(this._lContainer),n),gD(r[oe],r))}detach(e){let n=this._adjustIndex(e,-1),r=cp(this._lContainer,n);return r&&Ou(Rf(this._lContainer),n)!=null?new _i(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function DE(t){return t[Fu]}function Rf(t){return t[Fu]||(t[Fu]=[])}function QD(t,e){let n,r=e[t.index];return Yn(r)?n=r:(n=FD(r,e,null,t),e[t.index]=n,ul(e,n)),tk(n,e,t,r),new KD(n,t,e)}function ek(t,e){let n=t[je],r=n.createComment(""),i=$t(e,t),s=pg(n,i);return $u(n,s,r,FP(n,i),!1),r}var tk=ik,nk=()=>!1;function rk(t,e,n){return nk(t,e,n)}function ik(t,e,n,r){if(t[pi])return;let i;n.type&8?i=wn(r):i=ek(e,n),t[pi]=i}var wp=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Ep=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)bg(e,n).matches!==null&&this.queries[n].setDirty()}},Wu=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=hk(e):this.predicate=e}},Tp=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Dp=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,sk(n,s)),this.matchTNodeWithReadOption(e,n,Ru(n,e,s,!1,!1))}else r===Ii?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ru(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Tn||i===Pr||i===Ii&&n.type&4)this.addMatch(n.index,-2);else{let s=Ru(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function sk(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function ok(t,e){return t.type&11?xs(t,e):t.type&4?wg(t,e):null}function ak(t,e,n,r){return n===-1?ok(e,t):n===-2?ck(t,e,r):yi(t,t[oe],n,e)}function ck(t,e,n){if(n===Tn)return xs(e,t);if(n===Ii)return wg(e,t);if(n===Pr)return QD(e,t)}function YD(t,e,n,r){let i=e[Hn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let u=0;o!==null&&u<o.length;u+=2){let l=o[u];if(l<0)a.push(null);else{let h=s[l];a.push(ak(e,h,o[u+1],n.metadata.read))}}i.matches=a}return i.matches}function bp(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=YD(t,e,i,n);for(let a=0;a<s.length;a+=2){let u=s[a];if(u>0)r.push(o[a/2]);else{let l=s[a+1],h=e[-u];for(let p=Nt;p<h.length;p++){let m=h[p];m[ca]===m[tt]&&bp(m[oe],m,l,r)}if(h[bs]!==null){let p=h[bs];for(let m=0;m<p.length;m++){let v=p[m];bp(v[oe],v,l,r)}}}}}return r}function uk(t,e){return t[Hn].queries[e].queryList}function JD(t,e,n){let r=new Zf((n&4)===4);return YP(t,e,r,r.destroy),(e[Hn]??=new Ep).queries.push(new wp(r))-1}function lk(t,e,n){let r=Ke();return r.firstCreatePass&&(ZD(r,new Wu(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),JD(r,ue(),e)}function dk(t,e,n,r){let i=Ke();if(i.firstCreatePass){let s=bt();ZD(i,new Wu(e,n,r),s.index),fk(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return JD(i,ue(),n)}function hk(t){return t.split(",").map(e=>e.trim())}function ZD(t,e,n){t.queries===null&&(t.queries=new Tp),t.queries.track(new Dp(e,n))}function fk(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function bg(t,e){return t.queries.getByIndex(e)}function pk(t,e){let n=t[oe],r=bg(n,e);return r.crossesNgTemplate?bp(n,t,e,[]):YD(n,t,r,e)}function gk(t){return Object.getPrototypeOf(t.prototype).constructor}function mk(t){let e=gk(t.type),n=!0,r=[t];for(;e;){let i;if(Cr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Du(t.inputs),o.inputTransforms=Du(t.inputTransforms),o.declaredInputs=Du(t.declaredInputs),o.outputs=Du(t.outputs);let a=i.hostBindings;a&&wk(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&_k(t,u),l&&Ik(t,l),yk(t,i),ZN(t.outputs,i.outputs),Cr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===mk&&(n=!1)}}e=Object.getPrototypeOf(e)}vk(r)}function yk(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function vk(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Yo(i.hostAttrs,n=Yo(n,i.hostAttrs))}}function Du(t){return t===ws?{}:t===Dt?[]:t}function _k(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Ik(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function wk(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Cg(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Ar=class{},ia=class{};var Cp=class extends Ar{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gu(this);let i=tT(e);this._bootstrapComponents=dD(i.bootstrap),this._r3Injector=qT(e,n,[{provide:Ar,useValue:this},{provide:ll,useValue:this.componentFactoryResolver},...r],yt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ap=class extends ia{constructor(e){super(),this.moduleType=e}create(e){return new Cp(this.moduleType,e,[])}};var Ku=class extends Ar{constructor(e){super(),this.componentFactoryResolver=new Gu(this),this.instance=null;let n=new Jo([...e.providers,{provide:Ar,useValue:this},{provide:ll,useValue:this.componentFactoryResolver}],e.parent||Hp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function hl(t,e,n=null){return new Ku({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ps=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Xe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function XD(t){return Tk(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Ek(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Tk(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function eb(t,e,n){return t[e]=n}function Dk(t,e){return t[e]}function Kn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function bk(t,e,n,r){let i=Kn(t,e,n);return Kn(t,e+1,r)||i}function Ck(t){return(t.flags&32)===32}function Ak(t,e,n,r,i,s,o,a,u){let l=e.consts,h=da(e,t,4,o||null,Lu(l,a));PD(e,n,h,Lu(l,u)),ig(e,h);let p=h.tView=yg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Sk(t,e,n,r,i,s,o,a){let u=ue(),l=Ke(),h=t+Ut,p=l.firstCreatePass?Ak(h,l,u,e,n,r,i,s,o):l.data[h];ua(p,!1);let m=Rk(l,u,p,t);ng()&&gg(l,u,m,p),vi(m,u);let v=FD(m,u,m,p);return u[h]=v,ul(u,v),rk(v,p,u),Wp(p)&&RD(l,u,p),o!=null&&ND(u,p,a),Sk}var Rk=Nk;function Nk(t,e,n,r){return rg(!0),e[je].createComment("")}function Ag(t,e,n,r){let i=ue(),s=il();if(Kn(i,s,e)){let o=Ke(),a=tg();dO(a,i,t,e,n,r)}return Ag}function xk(t,e,n,r){return Kn(t,il(),n)?e+Is(n)+r:zt}function Mk(t,e,n,r,i,s){let o=yM(),a=bk(t,o,n,i);return Jp(2),a?e+Is(n)+r+Is(i)+s:zt}function bu(t,e){return t<<17|e<<2}function wi(t){return t>>17&32767}function Pk(t){return(t&2)==2}function Ok(t,e){return t&131071|e<<17}function Sp(t){return t|2}function As(t){return(t&131068)>>2}function Nf(t,e){return t&-131069|e<<2}function kk(t){return(t&1)===1}function Rp(t){return t|1}function Fk(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=wi(o),u=As(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||aa(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=wi(t[a+1]);t[r+1]=bu(m,a),m!==0&&(t[m+1]=Nf(t[m+1],r)),t[a+1]=Ok(t[a+1],r)}else t[r+1]=bu(a,0),a!==0&&(t[a+1]=Nf(t[a+1],r)),a=r;else t[r+1]=bu(u,0),a===0?a=r:t[u+1]=Nf(t[u+1],r),u=r;l&&(t[r+1]=Sp(t[r+1])),bE(t,h,r,!0),bE(t,h,r,!1),Lk(e,h,t,r,s),o=bu(a,u),s?e.classBindings=o:e.styleBindings=o}function Lk(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&aa(s,e)>=0&&(n[r+1]=Rp(n[r+1]))}function bE(t,e,n,r){let i=t[n+1],s=e===null,o=r?wi(i):As(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];Vk(u,e)&&(a=!0,t[o+1]=r?Rp(l):Sp(l)),o=r?wi(l):As(l)}a&&(t[n+1]=r?Sp(i):Rp(i))}function Vk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?aa(t,e)>=0:!1}var nn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Uk(t){return t.substring(nn.key,nn.keyEnd)}function jk(t){return Bk(t),tb(t,nb(t,0,nn.textEnd))}function tb(t,e){let n=nn.textEnd;return n===e?-1:(e=nn.keyEnd=$k(t,nn.key=e,n),nb(t,e,n))}function Bk(t){nn.key=0,nn.keyEnd=0,nn.value=0,nn.valueEnd=0,nn.textEnd=t.length}function nb(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function $k(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function qk(t,e,n){let r=ue(),i=il();if(Kn(r,i,e)){let s=Ke(),o=tg();MD(s,o,r,t,e,r[je],n,!1)}return qk}function Np(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";vg(t,n,s[o],o,r)}function rb(t,e,n){return ib(t,e,n,!1),rb}function zk(t,e){return ib(t,e,null,!0),zk}function L6(t){Gk(Zk,Hk,t,!0)}function Hk(t,e){for(let n=jk(e);n>=0;n=tb(e,n))$p(t,Uk(e),!0)}function ib(t,e,n,r){let i=ue(),s=Ke(),o=Jp(2);if(s.firstUpdatePass&&ob(s,t,o,r),e!==zt&&Kn(i,o,e)){let a=s.data[xr()];ab(s,a,i,i[je],t,i[o+1]=e1(e,n),r,o)}}function Gk(t,e,n,r){let i=Ke(),s=Jp(2);i.firstUpdatePass&&ob(i,null,s,r);let o=ue();if(n!==zt&&Kn(o,s,n)){let a=i.data[xr()];if(cb(a,r)&&!sb(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Ff(u,n||"")),Np(i,a,o,n,r)}else Xk(i,a,o,o[je],o[s+1],o[s+1]=Jk(t,e,n),r,s)}}function sb(t,e){return e>=t.expandoStartIndex}function ob(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[xr()],o=sb(t,n);cb(s,r)&&e===null&&!o&&(e=!1),e=Wk(i,s,e,r),Fk(i,s,e,n,o,r)}}function Wk(t,e,n,r){let i=EM(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=xf(null,t,e,n,r),n=sa(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=xf(i,t,e,n,r),s===null){let u=Kk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=xf(null,t,e,u[1],r),u=sa(u,e.attrs,r),Qk(t,e,r,u))}else s=Yk(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Kk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(As(r)!==0)return t[wi(r)]}function Qk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[wi(i)]=r}function Yk(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=sa(r,o,n)}return sa(r,e.attrs,n)}function xf(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=sa(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function sa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),$p(t,o,n?!0:e[++s]))}return t===void 0?null:t}function Jk(t,e,n){if(n==null||n==="")return Dt;let r=[],i=un(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function Zk(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&$p(t,r,n)}function Xk(t,e,n,r,i,s,o,a){i===zt&&(i=Dt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,v=l<s.length?s[l+1]:void 0,A=null,N;h===p?(u+=2,l+=2,m!==v&&(A=p,N=v)):p===null||h!==null&&h<p?(u+=2,A=h):(l+=2,A=p,N=v),A!==null&&ab(t,e,n,r,A,N,o,a),h=u<i.length?i[u]:null,p=l<s.length?s[l]:null}}function ab(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=kk(l)?CE(u,e,n,i,As(l),o):void 0;if(!Qu(h)){Qu(s)||Pk(l)&&(s=CE(u,null,n,i,a,o));let p=mT(xr(),n);$P(r,o,p,i,s)}}function CE(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===zt&&(m=p?Dt:void 0);let v=p?If(m,r):h===r?m:void 0;if(l&&!Qu(v)&&(v=If(u,r)),Qu(v)&&(a=v,o))return a;let A=t[i+1];i=o?wi(A):As(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=If(u,r))}return a}function Qu(t){return t!==void 0}function e1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=yt(un(t)))),t}function cb(t,e){return(t.flags&(e?8:16))!==0}function t1(t,e,n,r,i,s){let o=e.consts,a=Lu(o,i),u=da(e,t,2,r,a);return PD(e,n,u,Lu(o,s)),u.attrs!==null&&vp(u,u.attrs,!1),u.mergedAttrs!==null&&vp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ub(t,e,n,r){let i=ue(),s=Ke(),o=Ut+t,a=i[je],u=s.firstCreatePass?t1(o,s,i,e,n,r):s.data[o],l=n1(s,i,u,a,e,t);i[o]=l;let h=Wp(u);return ua(u,!0),ED(a,l,u),!Ck(u)&&ng()&&gg(s,i,l,u),lM()===0&&vi(l,i),dM(),h&&(RD(s,i,u),SD(s,u,i)),r!==null&&ND(i,u),ub}function lb(){let t=bt();DT()?bT():(t=t.parent,ua(t,!1));let e=t;fM(e)&&pM(),hM();let n=Ke();return n.firstCreatePass&&(ig(n,t),dT(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&RM(e)&&Np(n,e,ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&NM(e)&&Np(n,e,ue(),e.stylesWithoutHost,!1),lb}function Sg(t,e,n,r){return ub(t,e,n,r),lb(),Sg}var n1=(t,e,n,r,i,s)=>(rg(!0),hD(r,i,bM()));function V6(){return ue()}function r1(t,e,n){let r=ue(),i=il();if(Kn(r,i,e)){let s=Ke(),o=tg();MD(s,o,r,t,e,r[je],n,!0)}return r1}var ui=void 0;function i1(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var s1=["en",[["a","p"],["AM","PM"],ui],[["AM","PM"],ui,ui],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ui,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ui,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ui,"{1} 'at' {0}",ui],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",i1],Mf={};function Ht(t){let e=o1(t),n=AE(e);if(n)return n;let r=e.split("-")[0];if(n=AE(r),n)return n;if(r==="en")return s1;throw new $(701,!1)}function AE(t){return t in Mf||(Mf[t]=St.ng&&St.ng.common&&St.ng.common.locales&&St.ng.common.locales[t]),Mf[t]}var Le=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Le||{});function o1(t){return t.toLowerCase().replace(/_/g,"-")}var Yu="en-US";var a1=Yu;function c1(t){typeof t=="string"&&(a1=t.toLowerCase().replace(/_/g,"-"))}function Rg(t,e,n,r){let i=ue(),s=Ke(),o=bt();return l1(s,i,i[je],o,t,e,r),Rg}function u1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Xo],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function l1(t,e,n,r,i,s,o){let a=Wp(r),l=t.firstCreatePass&&UD(t),h=e[sn],p=VD(e),m=!0;if(r.type&3||o){let N=$t(r,e),R=o?o(N):N,M=p.length,B=o?K=>o(wn(K[r.index])):r.index,z=null;if(!o&&a&&(z=u1(t,e,i,r.index)),z!==null){let K=z.__ngLastListenerFn__||z;K.__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1}else{s=RE(r,e,h,s,!1);let K=n.listen(R,i,s);p.push(s,K),l&&l.push(i,B,M,M+1)}}else s=RE(r,e,h,s,!1);let v=r.outputs,A;if(m&&v!==null&&(A=v[i])){let N=A.length;if(N)for(let R=0;R<N;R+=2){let M=A[R],B=A[R+1],Ce=e[M][B].subscribe(s),ee=p.length;p.push(s,Ce),l&&l.push(i,r.index,ee,-(ee+1))}}}function SE(t,e,n,r){let i=me(null);try{return vn(6,e,n),n(r)!==!1}catch(s){return jD(t,s),!1}finally{vn(7,e,n),me(i)}}function RE(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Nr(t.index,e):e;Ig(a);let u=SE(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=SE(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function U6(t=1){return DM(t)}function d1(t,e){let n=null,r=Sx(t);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){n=i;continue}if(r===null?QE(t,s,!0):xx(r,s))return i}return n}function j6(t){let e=ue()[an][xt];if(!e.projection){let n=t?t.length:1,r=e.projection=_x(n,null),i=r.slice(),s=e.child;for(;s!==null;){let o=t?d1(s,t):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function B6(t,e=0,n){let r=ue(),i=Ke(),s=da(i,Ut+t,16,null,n||null);s.projection===null&&(s.projection=e),bT(),(!r[Zo]||ET())&&(s.flags&32)!==32&&jP(i,r,s)}function db(t,e,n,r){dk(t,e,n,r)}function $6(t,e,n){lk(t,e,n)}function hb(t){let e=ue(),n=Ke(),r=CT();Zp(r+1);let i=bg(n,r);if(t.dirty&&sM(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=pk(e,r);t.reset(s,qM),t.notifyOnChanges()}return!0}return!1}function fb(){return uk(ue(),CT())}function h1(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function q6(t){let e=mM();return vT(e,Ut+t)}function z6(t,e=""){let n=ue(),r=Ke(),i=t+Ut,s=r.firstCreatePass?da(r,i,1,e,null):r.data[i],o=f1(r,n,s,e,t);n[i]=o,ng()&&gg(r,n,o,s),ua(s,!1)}var f1=(t,e,n,r,i)=>(rg(!0),bP(e[je],r));function p1(t){return pb("",t,""),p1}function pb(t,e,n){let r=ue(),i=xk(r,t,e,n);return i!==zt&&BD(r,xr(),i),pb}function g1(t,e,n,r,i){let s=ue(),o=Mk(s,t,e,n,r,i);return o!==zt&&BD(s,xr(),o),g1}function m1(t,e,n){let r=Ke();if(r.firstCreatePass){let i=Cr(t);xp(n,r.data,r.blueprint,i,!0),xp(e,r.data,r.blueprint,i,!1)}}function xp(t,e,n,r,i){if(t=mt(t),Array.isArray(t))for(let s=0;s<t.length;s++)xp(t[s],e,n,r,i);else{let s=Ke(),o=ue(),a=bt(),u=Ts(t)?t:mt(t.provide),l=aT(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ts(t)||!t.multi){let v=new mi(l,i,Ae),A=Of(u,e,i?h:h+m,p);A===-1?(Kf(Bu(a,o),s,u),Pf(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)):(n[A]=v,o[A]=v)}else{let v=Of(u,e,h+m,p),A=Of(u,e,h,h+m),N=v>=0&&n[v],R=A>=0&&n[A];if(i&&!R||!i&&!N){Kf(Bu(a,o),s,u);let M=_1(i?v1:y1,n.length,i,r,l);!i&&R&&(n[A].providerFactory=M),Pf(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(M),o.push(M)}else{let M=gb(n[i?A:v],l,!i&&r);Pf(s,t,v>-1?v:A,M)}!i&&r&&R&&n[A].componentProviders++}}}function Pf(t,e,n,r){let i=Ts(e),s=$x(e);if(i||s){let u=(s?mt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function gb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Of(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function y1(t,e,n,r){return Mp(this.multi,[])}function v1(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=yi(n,n[oe],this.providerFactory.index,r);s=a.slice(0,o),Mp(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Mp(i,s);return s}function Mp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function _1(t,e,n,r,i){let s=new mi(t,n,Ae);return s.multi=[],s.index=e,s.componentProviders=0,gb(s,i,r&&!n),s}function H6(t,e=[]){return n=>{n.providersResolver=(r,i)=>m1(r,i?i(t):t,e)}}var I1=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=iT(!1,r.type),s=i.length>0?hl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=j({token:e,providedIn:"environment",factory:()=>new e(U(vt))});let t=e;return t})();function mb(t){dl("NgStandalone"),t.getStandaloneInjector=e=>e.get(I1).getOrCreateStandaloneInjector(t)}function G6(t,e,n){let r=Yp()+t,i=ue();return i[r]===zt?eb(i,r,n?e.call(n):e()):Dk(i,r)}function W6(t,e,n,r){return yb(ue(),Yp(),t,e,n,r)}function w1(t,e){let n=t[e];return n===zt?void 0:n}function yb(t,e,n,r,i,s){let o=e+n;return Kn(t,o,i)?eb(t,o+1,s?r.call(s,i):r(i)):w1(t,o+1)}function K6(t,e){let n=Ke(),r,i=t+Ut;n.firstCreatePass?(r=E1(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=hi(r.type,!0)),o,a=Tt(Ae);try{let u=ju(!1),l=s();return ju(u),h1(n,ue(),i,l),l}finally{Tt(a)}}function E1(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Q6(t,e,n){let r=t+Ut,i=ue(),s=vT(i,r);return T1(i,r)?yb(i,Yp(),e,s.transform,n,s):s.transform(n)}function T1(t,e){return t[oe].data[e].pure}var Sr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},vb=new Sr("17.3.4"),fl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var _b=new q("");function ha(t){return!!t&&typeof t.then=="function"}function Ib(t){return!!t&&typeof t.subscribe=="function"}var pl=new q(""),wb=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=k(pl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(ha(o))r.push(o);else if(Ib(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fa=new q("");function D1(){yw(()=>{throw new $(600,!1)})}function b1(t){return t.isBoundToModule}function C1(t,e,n){try{let r=n();return ha(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Os=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(zT),this.afterRenderEffectManager=k(Dg),this.externalTestViews=new Set,this.beforeRender=new We,this.afterTick=new We,this.componentTypes=[],this.components=[],this.isStable=k(Ps).hasPendingTasks.pipe(Z(r=>!r)),this._injector=k(vt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Hu;if(!this._injector.get(wb).done){let v=!s&&eT(r),A=!1;throw new $(405,A)}let a;s?a=r:a=this._injector.get(ll).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=b1(a)?void 0:this._injector.get(Ar),l=i||a.selector,h=a.create(Ct.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(_b,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),kf(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new $(101,!1);let i=me(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,me(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===qD)throw new $(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)A1(a,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Pp(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Pp(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;kf(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(fa,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>kf(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new $(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kf(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function A1(t,e,n){!e&&!Pp(t)||S1(t,n,e)}function Pp(t){return Qp(t)}function S1(t,e,n){let r;n?(r=0,t[Q]|=1024):t[Q]&64?r=0:r=1,zD(t,e,r)}var Op=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},gl=(()=>{let e=class e{compileModuleSync(r){return new Ap(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=tT(r),o=dD(s.declarations).reduce((a,u)=>{let l=br(u);return l&&a.push(new Cs(l)),a},[]);return new Op(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var R1=(()=>{let e=class e{constructor(){this.zone=k(pe),this.applicationRef=k(Os)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function N1(t){return[{provide:pe,useFactory:t},{provide:Es,multi:!0,useFactory:()=>{let e=k(R1,{optional:!0});return()=>e.initialize()}},{provide:Es,multi:!0,useFactory:()=>{let e=k(O1);return()=>{e.initialize()}}},{provide:zT,useFactory:x1}]}function x1(){let t=k(pe),e=k(En);return n=>t.runOutsideAngular(()=>e.handleError(n))}function M1(t){let e=N1(()=>new pe(P1(t)));return Ss([[],e])}function P1(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var O1=(()=>{let e=class e{constructor(){this.subscription=new Fe,this.initialized=!1,this.zone=k(pe),this.pendingTasks=k(Ps)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function k1(){return typeof $localize<"u"&&$localize.locale||Yu}var ml=new q("",{providedIn:"root",factory:()=>k(ml,ce.Optional|ce.SkipSelf)||k1()});var Eb=new q("");var xu=null;function F1(t=[],e){return Ct.create({name:e,providers:[{provide:tl,useValue:"platform"},{provide:Eb,useValue:new Set([()=>xu=null])},...t]})}function L1(t=[]){if(xu)return xu;let e=F1(t);return xu=e,D1(),V1(e),e}function V1(t){t.get(lg,null)?.forEach(n=>n())}var ks=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=U1;let t=e;return t})();function U1(t){return j1(bt(),ue(),(t&16)===16)}function j1(t,e,n){if(rl(t)&&!n){let r=Nr(t.index,e);return new _i(r,r)}else if(t.type&47){let r=e[an];return new _i(r,e)}return null}var kp=class{constructor(){}supports(e){return XD(e)}create(e){return new Fp(e)}},B1=(t,e)=>e,Fp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||B1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<NE(r,i,s)?n:r,a=NE(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<s.length?s[m]:s[m]=0,A=v+m;h<=A&&A<l&&(s[m]=v+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!XD(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,Ek(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Lp(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ju),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ju),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Lp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Vp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ju=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Vp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function NE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function xE(){return new Ng([new kp])}var Ng=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||xE()),deps:[[e,new jp,new ct]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new $(901,!1)}};e.\u0275prov=j({token:e,providedIn:"root",factory:xE});let t=e;return t})();function Tb(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=L1(r),s=[M1(),...n||[]],a=new Ku({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(pe);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(En,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:v=>{l.handleError(v)}})});let p=()=>a.destroy(),m=i.get(Eb);return m.add(p),a.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),C1(l,u,()=>{let v=a.get(wb);return v.runInitializers(),v.donePromise.then(()=>{let A=a.get(ml,Yu);c1(A||Yu);let N=a.get(Os);return e!==void 0&&N.bootstrap(e),N})})})}catch(e){return Promise.reject(e)}}function pa(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Db(t){let e=br(t);if(!e)return null;let n=new Cs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var xb=null;function Fs(){return xb}function Mb(t){xb??=t}var bl=class{};var nt=new q(""),Ug=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>k($1),providedIn:"platform"});let t=e;return t})(),Pb=new q(""),$1=(()=>{let e=class e extends Ug{constructor(){super(),this._doc=k(nt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fs().getBaseHref(this._doc)}onPopState(r){let i=Fs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Fs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function jg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function bb(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function er(t){return t&&t[0]!=="?"?"?"+t:t}var nr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>k(Bg),providedIn:"root"});let t=e;return t})(),Ob=new q(""),Bg=(()=>{let e=class e extends nr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??k(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return jg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+er(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+er(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+er(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(U(Ug),U(Ob,8))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),kb=(()=>{let e=class e extends nr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=jg(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+er(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+er(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(U(Ug),U(Ob,8))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Vs=(()=>{let e=class e{constructor(r){this._subject=new Rt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=H1(bb(Cb(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+er(i))}normalize(r){return e.stripTrailingSlash(z1(this._basePath,Cb(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+er(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+er(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=er,e.joinWithSlash=jg,e.stripTrailingSlash=bb,e.\u0275fac=function(i){return new(i||e)(U(nr))},e.\u0275prov=j({token:e,factory:()=>q1(),providedIn:"root"});let t=e;return t})();function q1(){return new Vs(U(nr))}function z1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Cb(t){return t.replace(/\/index.html$/,"")}function H1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var _t=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(_t||{}),be=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(be||{}),Mt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Mt||{}),Or={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function G1(t){return Ht(t)[Le.LocaleId]}function W1(t,e,n){let r=Ht(t),i=[r[Le.DayPeriodsFormat],r[Le.DayPeriodsStandalone]],s=Gt(i,e);return Gt(s,n)}function K1(t,e,n){let r=Ht(t),i=[r[Le.DaysFormat],r[Le.DaysStandalone]],s=Gt(i,e);return Gt(s,n)}function Q1(t,e,n){let r=Ht(t),i=[r[Le.MonthsFormat],r[Le.MonthsStandalone]],s=Gt(i,e);return Gt(s,n)}function Y1(t,e){let r=Ht(t)[Le.Eras];return Gt(r,e)}function yl(t,e){let n=Ht(t);return Gt(n[Le.DateFormat],e)}function vl(t,e){let n=Ht(t);return Gt(n[Le.TimeFormat],e)}function _l(t,e){let r=Ht(t)[Le.DateTimeFormat];return Gt(r,e)}function Al(t,e){let n=Ht(t),r=n[Le.NumberSymbols][e];if(typeof r>"u"){if(e===Or.CurrencyDecimal)return n[Le.NumberSymbols][Or.Decimal];if(e===Or.CurrencyGroup)return n[Le.NumberSymbols][Or.Group]}return r}function Fb(t){if(!t[Le.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Le.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function J1(t){let e=Ht(t);return Fb(e),(e[Le.ExtraData][2]||[]).map(r=>typeof r=="string"?xg(r):[xg(r[0]),xg(r[1])])}function Z1(t,e,n){let r=Ht(t);Fb(r);let i=[r[Le.ExtraData][0],r[Le.ExtraData][1]],s=Gt(i,e)||[];return Gt(s,n)||[]}function Gt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function xg(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var X1=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Il={},eF=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,tr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(tr||{}),ve=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(ve||{}),ye=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(ye||{});function tF(t,e,n,r){let i=lF(t);e=Xn(n,e)||e;let o=[],a;for(;e;)if(a=eF.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let u=i.getTimezoneOffset();r&&(u=Vb(r,u),i=uF(i,r,!0));let l="";return o.forEach(h=>{let p=aF(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Cl(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Xn(t,e){let n=G1(t);if(Il[n]??={},Il[n][e])return Il[n][e];let r="";switch(e){case"shortDate":r=yl(t,Mt.Short);break;case"mediumDate":r=yl(t,Mt.Medium);break;case"longDate":r=yl(t,Mt.Long);break;case"fullDate":r=yl(t,Mt.Full);break;case"shortTime":r=vl(t,Mt.Short);break;case"mediumTime":r=vl(t,Mt.Medium);break;case"longTime":r=vl(t,Mt.Long);break;case"fullTime":r=vl(t,Mt.Full);break;case"short":let i=Xn(t,"shortTime"),s=Xn(t,"shortDate");r=wl(_l(t,Mt.Short),[i,s]);break;case"medium":let o=Xn(t,"mediumTime"),a=Xn(t,"mediumDate");r=wl(_l(t,Mt.Medium),[o,a]);break;case"long":let u=Xn(t,"longTime"),l=Xn(t,"longDate");r=wl(_l(t,Mt.Long),[u,l]);break;case"full":let h=Xn(t,"fullTime"),p=Xn(t,"fullDate");r=wl(_l(t,Mt.Full),[h,p]);break}return r&&(Il[n][e]=r),r}function wl(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function ln(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function nF(t,e){return ln(t,3).substring(0,e)}function Be(t,e,n=0,r=!1,i=!1){return function(s,o){let a=rF(t,s);if((n>0||a>-n)&&(a+=n),t===ve.Hours)a===0&&n===-12&&(a=12);else if(t===ve.FractionalSeconds)return nF(a,e);let u=Al(o,Or.MinusSign);return ln(a,e,u,r,i)}}function rF(t,e){switch(t){case ve.FullYear:return e.getFullYear();case ve.Month:return e.getMonth();case ve.Date:return e.getDate();case ve.Hours:return e.getHours();case ve.Minutes:return e.getMinutes();case ve.Seconds:return e.getSeconds();case ve.FractionalSeconds:return e.getMilliseconds();case ve.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Se(t,e,n=_t.Format,r=!1){return function(i,s){return iF(i,s,t,e,n,r)}}function iF(t,e,n,r,i,s){switch(n){case ye.Months:return Q1(e,i,r)[t.getMonth()];case ye.Days:return K1(e,i,r)[t.getDay()];case ye.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=J1(e),h=Z1(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[v,A]=m,N=o>=v.hours&&a>=v.minutes,R=o<A.hours||o===A.hours&&a<A.minutes;if(v.hours<A.hours){if(N&&R)return!0}else if(N||R)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return W1(e,i,r)[o<12?0:1];case ye.Eras:return Y1(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function El(t){return function(e,n,r){let i=-1*r,s=Al(n,Or.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case tr.Short:return(i>=0?"+":"")+ln(o,2,s)+ln(Math.abs(i%60),2,s);case tr.ShortGMT:return"GMT"+(i>=0?"+":"")+ln(o,1,s);case tr.Long:return"GMT"+(i>=0?"+":"")+ln(o,2,s)+":"+ln(Math.abs(i%60),2,s);case tr.Extended:return r===0?"Z":(i>=0?"+":"")+ln(o,2,s)+":"+ln(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var sF=0,Dl=4;function oF(t){let e=Cl(t,sF,1).getDay();return Cl(t,0,1+(e<=Dl?Dl:Dl+7)-e)}function Lb(t){let e=t.getDay(),n=e===0?-3:Dl-e;return Cl(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Mg(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=Lb(n),o=oF(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return ln(i,t,Al(r,Or.MinusSign))}}function Tl(t,e=!1){return function(n,r){let s=Lb(n).getFullYear();return ln(s,t,Al(r,Or.MinusSign),e)}}var Pg={};function aF(t){if(Pg[t])return Pg[t];let e;switch(t){case"G":case"GG":case"GGG":e=Se(ye.Eras,be.Abbreviated);break;case"GGGG":e=Se(ye.Eras,be.Wide);break;case"GGGGG":e=Se(ye.Eras,be.Narrow);break;case"y":e=Be(ve.FullYear,1,0,!1,!0);break;case"yy":e=Be(ve.FullYear,2,0,!0,!0);break;case"yyy":e=Be(ve.FullYear,3,0,!1,!0);break;case"yyyy":e=Be(ve.FullYear,4,0,!1,!0);break;case"Y":e=Tl(1);break;case"YY":e=Tl(2,!0);break;case"YYY":e=Tl(3);break;case"YYYY":e=Tl(4);break;case"M":case"L":e=Be(ve.Month,1,1);break;case"MM":case"LL":e=Be(ve.Month,2,1);break;case"MMM":e=Se(ye.Months,be.Abbreviated);break;case"MMMM":e=Se(ye.Months,be.Wide);break;case"MMMMM":e=Se(ye.Months,be.Narrow);break;case"LLL":e=Se(ye.Months,be.Abbreviated,_t.Standalone);break;case"LLLL":e=Se(ye.Months,be.Wide,_t.Standalone);break;case"LLLLL":e=Se(ye.Months,be.Narrow,_t.Standalone);break;case"w":e=Mg(1);break;case"ww":e=Mg(2);break;case"W":e=Mg(1,!0);break;case"d":e=Be(ve.Date,1);break;case"dd":e=Be(ve.Date,2);break;case"c":case"cc":e=Be(ve.Day,1);break;case"ccc":e=Se(ye.Days,be.Abbreviated,_t.Standalone);break;case"cccc":e=Se(ye.Days,be.Wide,_t.Standalone);break;case"ccccc":e=Se(ye.Days,be.Narrow,_t.Standalone);break;case"cccccc":e=Se(ye.Days,be.Short,_t.Standalone);break;case"E":case"EE":case"EEE":e=Se(ye.Days,be.Abbreviated);break;case"EEEE":e=Se(ye.Days,be.Wide);break;case"EEEEE":e=Se(ye.Days,be.Narrow);break;case"EEEEEE":e=Se(ye.Days,be.Short);break;case"a":case"aa":case"aaa":e=Se(ye.DayPeriods,be.Abbreviated);break;case"aaaa":e=Se(ye.DayPeriods,be.Wide);break;case"aaaaa":e=Se(ye.DayPeriods,be.Narrow);break;case"b":case"bb":case"bbb":e=Se(ye.DayPeriods,be.Abbreviated,_t.Standalone,!0);break;case"bbbb":e=Se(ye.DayPeriods,be.Wide,_t.Standalone,!0);break;case"bbbbb":e=Se(ye.DayPeriods,be.Narrow,_t.Standalone,!0);break;case"B":case"BB":case"BBB":e=Se(ye.DayPeriods,be.Abbreviated,_t.Format,!0);break;case"BBBB":e=Se(ye.DayPeriods,be.Wide,_t.Format,!0);break;case"BBBBB":e=Se(ye.DayPeriods,be.Narrow,_t.Format,!0);break;case"h":e=Be(ve.Hours,1,-12);break;case"hh":e=Be(ve.Hours,2,-12);break;case"H":e=Be(ve.Hours,1);break;case"HH":e=Be(ve.Hours,2);break;case"m":e=Be(ve.Minutes,1);break;case"mm":e=Be(ve.Minutes,2);break;case"s":e=Be(ve.Seconds,1);break;case"ss":e=Be(ve.Seconds,2);break;case"S":e=Be(ve.FractionalSeconds,1);break;case"SS":e=Be(ve.FractionalSeconds,2);break;case"SSS":e=Be(ve.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=El(tr.Short);break;case"ZZZZZ":e=El(tr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=El(tr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=El(tr.Long);break;default:return null}return Pg[t]=e,e}function Vb(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function cF(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function uF(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=Vb(e,i);return cF(t,r*(s-i))}function lF(t){if(Ab(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Cl(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(X1))return dF(r)}let e=new Date(t);if(!Ab(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function dF(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,u,l),e}function Ab(t){return t instanceof Date&&!isNaN(t.valueOf())}function Sl(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Og=/\s+/,Sb=[],y5=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Sb,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Og):Sb}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Og):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Og).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(Ae(Tn),Ae(Ms))},e.\u0275dir=Rr({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Vt.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var kg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},v5=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new kg(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),Rb(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);Rb(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Ae(Pr),Ae(Ii),Ae(Ng))},e.\u0275dir=Rr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function Rb(t,e){t.context.$implicit=e.item}var _5=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Fg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Nb("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Nb("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Ae(Pr),Ae(Ii))},e.\u0275dir=Rr({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Fg=class{constructor(){this.$implicit=null,this.ngIf=null}};function Nb(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${yt(e)}'.`)}function hF(t,e){return new $(2100,!1)}var fF="mediumDate",pF=new q(""),gF=new q(""),I5=(()=>{let e=class e{constructor(r,i,s){this.locale=r,this.defaultTimezone=i,this.defaultOptions=s}transform(r,i,s,o){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??fF,u=s??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return tF(r,a,o||this.locale,u)}catch(a){throw hF(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(Ae(ml,16),Ae(pF,24),Ae(gF,24))},e.\u0275pipe=JE({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var mF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Bt({type:e}),e.\u0275inj=jt({});let t=e;return t})(),$g="browser",yF="server";function vF(t){return t===$g}function Rl(t){return t===yF}var Ub=(()=>{let e=class e{};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>vF(k(qt))?new Lg(k(nt),window):new Vg});let t=e;return t})(),Lg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=_F(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function _F(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Vg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ls=class{};var ma=class{},xl=class{},Ei=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var zg=class{encodeKey(e){return Bb(e)}encodeValue(e){return Bb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function EF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}var TF=/%(\d[a-f0-9])/gi,DF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Bb(t){return encodeURIComponent(t).replace(TF,(e,n)=>DF[n]??e)}function Nl(t){return`${t}`}var kr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new zg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=EF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Nl):[Nl(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Nl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Nl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Hg=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function bF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function $b(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function qb(t){return typeof Blob<"u"&&t instanceof Blob}function zb(t){return typeof FormData<"u"&&t instanceof FormData}function CF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ga=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(bF(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ei,this.context??=new Hg,!this.params)this.params=new kr,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||$b(this.body)||qb(this.body)||zb(this.body)||CF(this.body)?this.body:this.body instanceof kr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||zb(this.body)?null:qb(this.body)?this.body.type||null:$b(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof kr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),h)),new t(n,r,o,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},Us=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Us||{}),ya=class{constructor(e,n=Ol.Ok,r="OK"){this.headers=e.headers||new Ei,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Gg=class t extends ya{constructor(e={}){super(e),this.type=Us.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ml=class t extends ya{constructor(e={}){super(e),this.type=Us.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Pl=class extends ya{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Ol=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Ol||{});function qg(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var AF=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof ga)o=r;else{let l;s.headers instanceof Ei?l=s.headers:l=new Ei(s.headers);let h;s.params&&(s.params instanceof kr?h=s.params:h=new kr({fromObject:s.params})),o=new ga(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=W(o).pipe(qn(l=>this.handler.handle(l)));if(r instanceof ga||s.observe==="events")return a;let u=a.pipe(et(l=>l instanceof Ml));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(Z(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return u.pipe(Z(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return u.pipe(Z(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return u.pipe(Z(l=>l.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new kr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,qg(s,i))}post(r,i,s={}){return this.request("POST",r,qg(s,i))}put(r,i,s={}){return this.request("PUT",r,qg(s,i))}};e.\u0275fac=function(i){return new(i||e)(U(ma))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function SF(t,e){return e(t)}function RF(t,e,n){return(r,i)=>cn(n,()=>e(r,s=>t(s,i)))}var Wb=new q(""),NF=new q(""),xF=new q("");var Hb=(()=>{let e=class e extends ma{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=k(Ps);let s=k(xF,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(Wb),...this.injector.get(NF,[])]));this.chain=s.reduceRight((o,a)=>RF(o,a,this.injector),SF)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(ci(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(U(xl),U(vt))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();var MF=/^\)\]\}',?\n/;function PF(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var Gb=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new $(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Te(i.\u0275loadImpl()):W(null)).pipe(Et(()=>new ne(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((R,M)=>a.setRequestHeader(R,M.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let R=r.detectContentTypeHeader();R!==null&&a.setRequestHeader("Content-Type",R)}if(r.responseType){let R=r.responseType.toLowerCase();a.responseType=R!=="json"?R:"text"}let u=r.serializeBody(),l=null,h=()=>{if(l!==null)return l;let R=a.statusText||"OK",M=new Ei(a.getAllResponseHeaders()),B=PF(a)||r.url;return l=new Gg({headers:M,status:a.status,statusText:R,url:B}),l},p=()=>{let{headers:R,status:M,statusText:B,url:z}=h(),K=null;M!==Ol.NoContent&&(K=typeof a.response>"u"?a.responseText:a.response),M===0&&(M=K?Ol.Ok:0);let Ce=M>=200&&M<300;if(r.responseType==="json"&&typeof K=="string"){let ee=K;K=K.replace(MF,"");try{K=K!==""?JSON.parse(K):null}catch(T){K=ee,Ce&&(Ce=!1,K={error:T,text:K})}}Ce?(o.next(new Ml({body:K,headers:R,status:M,statusText:B,url:z||void 0})),o.complete()):o.error(new Pl({error:K,headers:R,status:M,statusText:B,url:z||void 0}))},m=R=>{let{url:M}=h(),B=new Pl({error:R,status:a.status||0,statusText:a.statusText||"Unknown Error",url:M||void 0});o.error(B)},v=!1,A=R=>{v||(o.next(h()),v=!0);let M={type:Us.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(M.total=R.total),r.responseType==="text"&&a.responseText&&(M.partialText=a.responseText),o.next(M)},N=R=>{let M={type:Us.UploadProgress,loaded:R.loaded};R.lengthComputable&&(M.total=R.total),o.next(M)};return a.addEventListener("load",p),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),r.reportProgress&&(a.addEventListener("progress",A),u!==null&&a.upload&&a.upload.addEventListener("progress",N)),a.send(u),o.next({type:Us.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",p),a.removeEventListener("timeout",m),r.reportProgress&&(a.removeEventListener("progress",A),u!==null&&a.upload&&a.upload.removeEventListener("progress",N)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(U(Ls))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Kb=new q(""),OF="XSRF-TOKEN",kF=new q("",{providedIn:"root",factory:()=>OF}),FF="X-XSRF-TOKEN",LF=new q("",{providedIn:"root",factory:()=>FF}),kl=class{},VF=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Sl(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(U(nt),U(qt),U(kF))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function UF(t,e){let n=t.url.toLowerCase();if(!k(Kb)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=k(kl).getToken(),i=k(LF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function M5(...t){let e=[AF,Gb,Hb,{provide:ma,useExisting:Hb},{provide:xl,useExisting:Gb},{provide:Wb,useValue:UF,multi:!0},{provide:Kb,useValue:!0},{provide:kl,useClass:VF}];for(let n of t)e.push(...n.\u0275providers);return Ss(e)}var Qg=class extends bl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Yg=class t extends Qg{static makeCurrent(){Mb(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=jF();return n==null?null:BF(n)}resetBaseElement(){va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Sl(document.cookie,e)}},va=null;function jF(){return va=va||document.querySelector("base"),va?va.getAttribute("href"):null}function BF(t){return new URL(t,document.baseURI).pathname}var $F=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Jg=new q(""),Zb=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new $(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(U(Jg),U(pe))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Fl=class{constructor(e){this._doc=e}},Wg="ng-app-id",Xb=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rl(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Wg}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Wg),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Wg,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(U(nt),U(ug),U(dg,8),U(qt))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Kg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xg=/%COMP%/g,eC="%COMP%",qF=`_nghost-${eC}`,zF=`_ngcontent-${eC}`,HF=!0,GF=new q("",{providedIn:"root",factory:()=>HF});function WF(t){return zF.replace(Xg,t)}function KF(t){return qF.replace(Xg,t)}function tC(t,e){return e.map(n=>n.replace(Xg,t))}var Qb=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Rl(u),this.defaultRenderer=new _a(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===In.ShadowDom&&(i=Ne(L({},i),{encapsulation:In.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Ll?s.applyToHost(r):s instanceof Ia&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case In.Emulated:o=new Ll(l,h,i,this.appId,p,a,u,m);break;case In.ShadowDom:return new Zg(l,h,r,i,a,u,this.nonce,m);default:o=new Ia(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(U(Zb),U(Xb),U(ug),U(GF),U(nt),U(qt),U(pe),U(dg))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),_a=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Kg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Yb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Yb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Kg[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Kg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Wn.DashCase|Wn.Important)?e.style.setProperty(n,r,i&Wn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Wn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Fs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Yb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Zg=class extends _a{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=tC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ia=class extends _a{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?tC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ll=class extends Ia{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=WF(l),this.hostAttr=KF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},QF=(()=>{let e=class e extends Fl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(U(nt))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Jb=["alt","control","meta","shift"],YF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},ZF=(()=>{let e=class e extends Fl{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fs().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),Jb.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=YF[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Jb.forEach(a=>{if(a!==s){let u=JF[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(U(nt))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function Y5(t,e){return Tb(L({rootComponent:t},XF(e)))}function XF(t){return{appProviders:[...iL,...t?.providers??[]],platformProviders:rL}}function eL(){Yg.makeCurrent()}function tL(){return new En}function nL(){return YT(document),document}var rL=[{provide:qt,useValue:$g},{provide:lg,useValue:eL,multi:!0},{provide:nt,useFactory:nL,deps:[]}];var iL=[{provide:tl,useValue:"root"},{provide:En,useFactory:tL,deps:[]},{provide:Jg,useClass:QF,multi:!0,deps:[nt,pe,qt]},{provide:Jg,useClass:ZF,multi:!0,deps:[nt]},Qb,Xb,Zb,{provide:ra,useExisting:Qb},{provide:Ls,useClass:$F,deps:[]},[]];var nC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(U(nt))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=U(oL),s},providedIn:"root"});let t=e;return t})(),oL=(()=>{let e=class e extends sL{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case Dn.NONE:return i;case Dn.HTML:return Mr(i,"HTML")?un(i):cD(this._doc,String(i)).toString();case Dn.STYLE:return Mr(i,"Style")?un(i):i;case Dn.SCRIPT:if(Mr(i,"Script"))return un(i);throw new $(5200,!1);case Dn.URL:return Mr(i,"URL")?un(i):ol(String(i));case Dn.RESOURCE_URL:if(Mr(i,"ResourceURL"))return un(i);throw new $(5201,!1);default:throw new $(5202,!1)}}bypassSecurityTrustHtml(r){return ZT(r)}bypassSecurityTrustStyle(r){return XT(r)}bypassSecurityTrustScript(r){return eD(r)}bypassSecurityTrustUrl(r){return tD(r)}bypassSecurityTrustResourceUrl(r){return nD(r)}};e.\u0275fac=function(i){return new(i||e)(U(nt))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var se="primary",Fa=Symbol("RouteTitle"),im=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function zs(t){return new im(t)}function cL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function uL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!bn(t[n],e[n]))return!1;return!0}function bn(t,e){let n=t?sm(t):void 0,r=e?sm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!hC(t[i],e[i]))return!1;return!0}function sm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function hC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function fC(t){return t.length>0?t[t.length-1]:null}function jr(t){return pf(t)?t:ha(t)?Te(Promise.resolve(t)):W(t)}var lL={exact:gC,subset:mC},pC={exact:dL,subset:hL,ignored:()=>!0};function rC(t,e,n){return lL[n.paths](t.root,e.root,n.matrixParams)&&pC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function dL(t,e){return bn(t,e)}function gC(t,e,n){if(!Di(t.segments,e.segments)||!jl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!gC(t.children[r],e.children[r],n))return!1;return!0}function hL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>hC(t[n],e[n]))}function mC(t,e,n){return yC(t,e,e.segments,n)}function yC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Di(i,n)||e.hasChildren()||!jl(i,n,r))}else if(t.segments.length===n.length){if(!Di(t.segments,n)||!jl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!mC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Di(t.segments,i)||!jl(t.segments,i,r)||!t.children[se]?!1:yC(t.children[se],e,s,r)}}function jl(t,e,n){return e.every((r,i)=>pC[n](t[i].parameters,r.parameters))}var Fr=class{constructor(e=new _e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zs(this.queryParams),this._queryParamMap}toString(){return gL.serialize(this)}},_e=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bl(this)}},Ti=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=zs(this.parameters),this._parameterMap}toString(){return _C(this)}};function fL(t,e){return Di(t,e)&&t.every((n,r)=>bn(n.parameters,e[r].parameters))}function Di(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function pL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===se&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==se&&(n=n.concat(e(i,r)))}),n}var La=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>new Aa,providedIn:"root"});let t=e;return t})(),Aa=class{parse(e){let n=new am(e);return new Fr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${wa(e.root,!0)}`,r=vL(e.queryParams),i=typeof e.fragment=="string"?`#${mL(e.fragment)}`:"";return`${n}${r}${i}`}},gL=new Aa;function Bl(t){return t.segments.map(e=>_C(e)).join("/")}function wa(t,e){if(!t.hasChildren())return Bl(t);if(e){let n=t.children[se]?wa(t.children[se],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==se&&r.push(`${i}:${wa(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=pL(t,(r,i)=>i===se?[wa(t.children[se],!1)]:[`${i}:${wa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[se]!=null?`${Bl(t)}/${n[0]}`:`${Bl(t)}/(${n.join("//")})`}}function vC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vl(t){return vC(t).replace(/%3B/gi,";")}function mL(t){return encodeURI(t)}function om(t){return vC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(t){return decodeURIComponent(t)}function iC(t){return $l(t.replace(/\+/g,"%20"))}function _C(t){return`${om(t.path)}${yL(t.parameters)}`}function yL(t){return Object.entries(t).map(([e,n])=>`;${om(e)}=${om(n)}`).join("")}function vL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Vl(n)}=${Vl(i)}`).join("&"):`${Vl(n)}=${Vl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var _L=/^[^\/()?;#]+/;function em(t){let e=t.match(_L);return e?e[0]:""}var IL=/^[^\/()?;=#]+/;function wL(t){let e=t.match(IL);return e?e[0]:""}var EL=/^[^=?&#]+/;function TL(t){let e=t.match(EL);return e?e[0]:""}var DL=/^[^&#]+/;function bL(t){let e=t.match(DL);return e?e[0]:""}var am=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[se]=new _e(e,n)),r}parseSegment(){let e=em(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Ti($l(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=wL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=em(this.remaining);i&&(r=i,this.capture(r))}e[$l(n)]=$l(r)}parseQueryParam(e){let n=TL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=bL(this.remaining);o&&(r=o,this.capture(r))}let i=iC(n),s=iC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=em(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=se);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[se]:new _e([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function IC(t){return t.segments.length>0?new _e([],{[se]:t}):t}function wC(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=wC(i);if(r===se&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new _e(t.segments,e);return CL(n)}function CL(t){if(t.numberOfChildren===1&&t.children[se]){let e=t.children[se];return new _e(t.segments.concat(e.segments),e.children)}return t}function Hs(t){return t instanceof Fr}function AL(t,e,n=null,r=null){let i=EC(t);return TC(i,e,n,r)}function EC(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new _e(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=IC(r);return e??i}function TC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return tm(i,i,i,n,r);let s=SL(e);if(s.toRoot())return tm(i,i,new _e([],{}),n,r);let o=RL(s,i,t),a=o.processChildren?Da(o.segmentGroup,o.index,s.commands):bC(o.segmentGroup,o.index,s.commands);return tm(i,o.segmentGroup,a,n,r)}function ql(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Sa(t){return typeof t=="object"&&t!=null&&t.outlets}function tm(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=DC(t,e,n);let a=IC(wC(o));return new Fr(a,s,i)}function DC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=DC(s,e,n)}),new _e(t.segments,r)}var zl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ql(r[0]))throw new $(4003,!1);let i=r.find(Sa);if(i&&i!==fC(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function SL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new zl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new zl(n,e,r)}var $s=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function RL(t,e,n){if(t.isAbsolute)return new $s(e,!0,0);if(!n)return new $s(e,!1,NaN);if(n.parent===null)return new $s(n,!0,0);let r=ql(t.commands[0])?0:1,i=n.segments.length-1+r;return NL(n,i,t.numberOfDoubleDots)}function NL(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new $s(r,!1,i-s)}function xL(t){return Sa(t[0])?t[0].outlets:{[se]:t}}function bC(t,e,n){if(t??=new _e([],{}),t.segments.length===0&&t.hasChildren())return Da(t,e,n);let r=ML(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new _e(t.segments.slice(0,r.pathIndex),{});return s.children[se]=new _e(t.segments.slice(r.pathIndex),t.children),Da(s,0,i)}else return r.match&&i.length===0?new _e(t.segments,{}):r.match&&!t.hasChildren()?cm(t,e,n):r.match?Da(t,0,i):cm(t,e,n)}function Da(t,e,n){if(n.length===0)return new _e(t.segments,{});{let r=xL(n),i={};if(Object.keys(r).some(s=>s!==se)&&t.children[se]&&t.numberOfChildren===1&&t.children[se].segments.length===0){let s=Da(t.children[se],e,n);return new _e(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=bC(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new _e(t.segments,i)}}function ML(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Sa(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!oC(u,l,o))return s;r+=2}else{if(!oC(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function cm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Sa(s)){let u=PL(s.outlets);return new _e(r,u)}if(i===0&&ql(n[0])){let u=t.segments[e];r.push(new Ti(u.path,sC(n[0]))),i++;continue}let o=Sa(s)?s.outlets[se]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ql(a)?(r.push(new Ti(o,sC(a))),i+=2):(r.push(new Ti(o,{})),i++)}return new _e(r,{})}function PL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=cm(new _e([],{}),0,r))}),e}function sC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function oC(t,e,n){return t==n.path&&bn(e,n.parameters)}var ba="imperative",Qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Qe||{}),Wt=class{constructor(e,n){this.id=e,this.url=n}},Gs=class extends Wt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},dn=class extends Wt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ot||{}),Hl=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Hl||{}),Lr=class extends Wt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Vr=class extends Wt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Qe.NavigationSkipped}},Ra=class extends Wt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gl=class extends Wt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},um=class extends Wt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lm=class extends Wt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dm=class extends Wt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hm=class extends Wt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fm=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pm=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gm=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mm=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ym=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vm=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Na=class{},xa=class{constructor(e){this.url=e}};var _m=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Va,this.attachRef=null}},Va=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new _m,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Im(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Im(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=wm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wm(e,this._root).map(n=>n.value)}};function Im(t,e){if(t===e.value)return e;for(let n of e.children){let r=Im(t,n);if(r)return r}return null}function wm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=wm(t,n);if(r.length)return r.unshift(e),r}return[]}var Pt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Bs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ql=class extends Kl{constructor(e,n){super(e),this.snapshot=n,xm(this,e)}toString(){return this.snapshot.toString()}};function CC(t){let e=OL(t),n=new Xe([new Ti("",{})]),r=new Xe({}),i=new Xe({}),s=new Xe({}),o=new Xe(""),a=new Ur(n,r,s,o,i,se,t,e.root);return a.snapshot=e.root,new Ql(new Pt(a,[]),e)}function OL(t){let e={},n={},r={},i="",s=new Ma([],e,r,i,n,se,t,null,{});return new Yl("",new Pt(s,[]))}var Ur=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Z(l=>l[Fa]))??W(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>zs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>zs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Nm(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&SC(i)&&(r.resolve[Fa]=i.title),r}var Ma=class{get title(){return this.data?.[Fa]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Yl=class extends Kl{constructor(e,n){super(n),this.url=e,xm(this,n)}toString(){return AC(this._root)}};function xm(t,e){e.value._routerState=t,e.children.forEach(n=>xm(t,n))}function AC(t){let e=t.children.length>0?` { ${t.children.map(AC).join(", ")} } `:"";return`${t.value}${e}`}function nm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,bn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),bn(e.params,n.params)||t.paramsSubject.next(n.params),uL(e.url,n.url)||t.urlSubject.next(n.url),bn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Em(t,e){let n=bn(t.params,e.params)&&fL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Em(t.parent,e.parent))}function SC(t){return typeof t.title=="string"||t.title===null}var kL=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=se,this.activateEvents=new Rt,this.deactivateEvents=new Rt,this.attachEvents=new Rt,this.detachEvents=new Rt,this.parentContexts=k(Va),this.location=k(Pr),this.changeDetector=k(ks),this.environmentInjector=k(vt),this.inputBinder=k(ed,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Tm(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Rr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ns]});let t=e;return t})(),Tm=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===Ur?this.route:e===Va?this.childContexts:this.parent.get(e,n)}},ed=new q(""),aC=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Wo([i.queryParams,i.params,i.data]).pipe(Et(([o,a,u],l)=>(u=L(L(L({},o),a),u),l===0?W(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Db(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function FL(t,e,n){let r=Pa(t,e._root,n?n._root:void 0);return new Ql(r,e)}function Pa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=LL(t,e,n);return new Pt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Pa(t,a)),o}}let r=VL(e.value),i=e.children.map(s=>Pa(t,s));return new Pt(r,i)}}function LL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Pa(t,r,i);return Pa(t,r)})}function VL(t){return new Ur(new Xe(t.url),new Xe(t.params),new Xe(t.queryParams),new Xe(t.fragment),new Xe(t.data),t.outlet,t.component,t)}var RC="ngNavigationCancelingError";function NC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Hs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xC(!1,Ot.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function xC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[RC]=!0,n.cancellationCode=e,n}function UL(t){return MC(t)&&Hs(t.url)}function MC(t){return!!t&&t[RC]}var jL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=YE({type:e,selectors:[["ng-component"]],standalone:!0,features:[mb],decls:1,vars:0,template:function(i,s){i&1&&Sg(0,"router-outlet")},dependencies:[kL],encapsulation:2});let t=e;return t})();function BL(t,e){return t.providers&&!t._injector&&(t._injector=hl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Mm(t){let e=t.children&&t.children.map(Mm),n=e?Ne(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==se&&(n.component=jL),n}function Cn(t){return t.outlet||se}function $L(t,e){let n=t.filter(r=>Cn(r)===e);return n.push(...t.filter(r=>Cn(r)!==e)),n}function Ua(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var qL=(t,e,n,r)=>Z(i=>(new Dm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Dm=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),nm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Bs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Bs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Bs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Bs(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new vm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new mm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(nm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),nm(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Ua(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Jl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qs=class{constructor(e,n){this.component=e,this.route=n}};function zL(t,e,n){let r=t._root,i=e?e._root:null;return Ea(r,i,n,[r.value])}function HL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ks(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!FE(t)?t:e.get(t):r}function Ea(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Bs(e);return t.children.forEach(o=>{GL(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ca(a,n.getContext(o),i)),i}function GL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=WL(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Jl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ea(t,e,a?a.children:null,r,i):Ea(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new qs(a.outlet.component,o))}else o&&Ca(e,a,i),i.canActivateChecks.push(new Jl(r)),s.component?Ea(t,null,a?a.children:null,r,i):Ea(t,null,n,r,i);return i}function WL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Di(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Di(t.url,e.url)||!bn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Em(t,e)||!bn(t.queryParams,e.queryParams);case"paramsChange":default:return!Em(t,e)}}function Ca(t,e,n){let r=Bs(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ca(o,e.children.getContext(s),n):Ca(o,null,n):Ca(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new qs(e.outlet.component,i)):n.canDeactivateChecks.push(new qs(null,i)):n.canDeactivateChecks.push(new qs(null,i))}function ja(t){return typeof t=="function"}function KL(t){return typeof t=="boolean"}function QL(t){return t&&ja(t.canLoad)}function YL(t){return t&&ja(t.canActivate)}function JL(t){return t&&ja(t.canActivateChild)}function ZL(t){return t&&ja(t.canDeactivate)}function XL(t){return t&&ja(t.canMatch)}function PC(t){return t instanceof $n||t?.name==="EmptyError"}var Ul=Symbol("INITIAL_VALUE");function Ws(){return Et(t=>Wo(t.map(e=>e.pipe(zn(1),_u(Ul)))).pipe(Z(e=>{for(let n of e)if(n!==!0){if(n===Ul)return Ul;if(n===!1||n instanceof Fr)return n}return!0}),et(e=>e!==Ul),zn(1)))}function eV(t,e){return Oe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?W(Ne(L({},n),{guardsResult:!0})):tV(o,r,i,t).pipe(Oe(a=>a&&KL(a)?nV(r,s,t,e):W(a)),Z(a=>Ne(L({},n),{guardsResult:a})))})}function tV(t,e,n,r){return Te(t).pipe(Oe(i=>aV(i.component,i.route,n,e,r)),yn(i=>i!==!0,!0))}function nV(t,e,n,r){return Te(e).pipe(qn(i=>hs(iV(i.route.parent,r),rV(i.route,r),oV(t,i.path,n),sV(t,i.route,n))),yn(i=>i!==!0,!0))}function rV(t,e){return t!==null&&e&&e(new ym(t)),W(!0)}function iV(t,e){return t!==null&&e&&e(new gm(t)),W(!0)}function sV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(s=>mu(()=>{let o=Ua(e)??n,a=Ks(s,o),u=YL(a)?a.canActivate(e,t):cn(o,()=>a(e,t));return jr(u).pipe(yn())}));return W(i).pipe(Ws())}function oV(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>HL(o)).filter(o=>o!==null).map(o=>mu(()=>{let a=o.guards.map(u=>{let l=Ua(o.node)??n,h=Ks(u,l),p=JL(h)?h.canActivateChild(r,t):cn(l,()=>h(r,t));return jr(p).pipe(yn())});return W(a).pipe(Ws())}));return W(s).pipe(Ws())}function aV(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return W(!0);let o=s.map(a=>{let u=Ua(e)??i,l=Ks(a,u),h=ZL(l)?l.canDeactivate(t,e,n,r):cn(u,()=>l(t,e,n,r));return jr(h).pipe(yn())});return W(o).pipe(Ws())}function cV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let s=i.map(o=>{let a=Ks(o,t),u=QL(a)?a.canLoad(e,n):cn(t,()=>a(e,n));return jr(u)});return W(s).pipe(Ws(),OC(r))}function OC(t){return Zc(Ue(e=>{if(Hs(e))throw NC(t,e)}),Z(e=>e===!0))}function uV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let s=i.map(o=>{let a=Ks(o,t),u=XL(a)?a.canMatch(e,n):cn(t,()=>a(e,n));return jr(u)});return W(s).pipe(Ws(),OC(r))}var Oa=class{constructor(e){this.segmentGroup=e||null}},Zl=class extends Error{constructor(e){super(),this.urlTree=e}};function js(t){return ls(new Oa(t))}function lV(t){return ls(new $(4e3,!1))}function dV(t){return ls(xC(!1,Ot.GuardRejected))}var bm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[se])return lV(e.redirectTo);i=i.children[se]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Zl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Fr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new _e(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Cm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hV(t,e,n,r,i){let s=Pm(t,e,n);return s.matched?(r=BL(e,r),uV(r,e,n,i).pipe(Z(o=>o===!0?s:L({},Cm)))):W(s)}function Pm(t,e,n){if(e.path==="**")return fV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},Cm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||cL)(n,t,e);if(!i)return L({},Cm);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function fV(t){return{matched:!0,parameters:t.length>0?fC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function cC(t,e,n,r){return n.length>0&&mV(t,n,r)?{segmentGroup:new _e(e,gV(r,new _e(n,t.children))),slicedSegments:[]}:n.length===0&&yV(t,n,r)?{segmentGroup:new _e(t.segments,pV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new _e(t.segments,t.children),slicedSegments:n}}function pV(t,e,n,r){let i={};for(let s of n)if(td(t,e,s)&&!r[Cn(s)]){let o=new _e([],{});i[Cn(s)]=o}return L(L({},r),i)}function gV(t,e){let n={};n[se]=e;for(let r of t)if(r.path===""&&Cn(r)!==se){let i=new _e([],{});n[Cn(r)]=i}return n}function mV(t,e,n){return n.some(r=>td(t,e,r)&&Cn(r)!==se)}function yV(t,e,n){return n.some(r=>td(t,e,r))}function td(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function vV(t,e,n,r){return Cn(t)!==r&&(r===se||!td(e,n,t))?!1:Pm(e,t,n).matched}function _V(t,e,n){return e.length===0&&!t.children[n]}var Am=class{};function IV(t,e,n,r,i,s,o="emptyOnly"){return new Sm(t,e,n,r,i,o,s).recognize()}var wV=31,Sm=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new bm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=cC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(n=>{let r=new Ma([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},se,this.rootComponentType,null,{}),i=new Pt(r,n),s=new Yl("",i),o=AL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,se).pipe(wr(r=>{if(r instanceof Zl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Oa?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Nm(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(Z(s=>s instanceof Pt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Te(i).pipe(qn(s=>{let o=r.children[s],a=$L(n,s);return this.processSegmentGroup(e,a,o,s)}),vu((s,o)=>(s.push(...o),s)),Er(null),yf(),Oe(s=>{if(s===null)return js(r);let o=kC(s);return EV(o),W(o)}))}processSegment(e,n,r,i,s,o){return Te(n).pipe(qn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(wr(u=>{if(u instanceof Oa)return W(null);throw u}))),yn(a=>!!a),wr(a=>{if(PC(a))return _V(r,i,s)?W(new Am):js(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return vV(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):js(i):js(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=Pm(n,i,s);if(!a)return js(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wV&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Oe(m=>this.processSegment(e,r,n,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=hV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Et(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Et(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,v=new Ma(h,m,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,DV(r),Cn(r),r.component??r._loadedComponent??null,r,bV(r)),{segmentGroup:A,slicedSegments:N}=cC(n,h,p,u);if(N.length===0&&A.hasChildren())return this.processChildren(l,u,A).pipe(Z(M=>M===null?null:new Pt(v,M)));if(u.length===0&&N.length===0)return W(new Pt(v,[]));let R=Cn(r)===s;return this.processSegment(l,u,A,N,R?se:s,!0).pipe(Z(M=>new Pt(v,M instanceof Pt?[M]:[])))}))):js(n)))}getChildConfig(e,n,r){return n.children?W({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?W({routes:n._loadedRoutes,injector:n._loadedInjector}):cV(e,n,r,this.urlSerializer).pipe(Oe(i=>i?this.configLoader.loadChildren(e,n).pipe(Ue(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):dV(n))):W({routes:[],injector:e})}};function EV(t){t.sort((e,n)=>e.value.outlet===se?-1:n.value.outlet===se?1:e.value.outlet.localeCompare(n.value.outlet))}function TV(t){let e=t.value.routeConfig;return e&&e.path===""}function kC(t){let e=[],n=new Set;for(let r of t){if(!TV(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=kC(r.children);e.push(new Pt(r.value,i))}return e.filter(r=>!n.has(r))}function DV(t){return t.data||{}}function bV(t){return t.resolve||{}}function CV(t,e,n,r,i,s){return Oe(o=>IV(t,e,n,r,o.extractedUrl,i,s).pipe(Z(({state:a,tree:u})=>Ne(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function AV(t,e){return Oe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return W(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of FC(u))o.add(l);let a=0;return Te(o).pipe(qn(u=>s.has(u)?SV(u,r,t,e):(u.data=Nm(u,u.parent,t).resolve,W(void 0))),Ue(()=>a++),fs(1),Oe(u=>a===o.size?W(n):gt))})}function FC(t){let e=t.children.map(n=>FC(n)).flat();return[t,...e]}function SV(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!SC(i)&&(s[Fa]=i.title),RV(s,t,e,r).pipe(Z(o=>(t._resolvedData=o,t.data=Nm(t,t.parent,n).resolve,null)))}function RV(t,e,n,r){let i=sm(t);if(i.length===0)return W({});let s={};return Te(i).pipe(Oe(o=>NV(t[o],e,n,r).pipe(yn(),Ue(a=>{s[o]=a}))),fs(1),mf(s),wr(o=>PC(o)?gt:ls(o)))}function NV(t,e,n,r){let i=Ua(e)??r,s=Ks(t,i),o=s.resolve?s.resolve(e,n):cn(i,()=>s(e,n));return jr(o)}function rm(t){return Et(e=>{let n=t(e);return n?Te(n).pipe(Z(()=>e)):W(e)})}var LC=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===se);return i}getResolvedTitleForRoute(r){return r.data[Fa]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>k(xV),providedIn:"root"});let t=e;return t})(),xV=(()=>{let e=class e extends LC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(U(nC))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ba=new q("",{providedIn:"root",factory:()=>({})}),ka=new q(""),Om=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(gl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return W(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=jr(r.loadComponent()).pipe(Z(VC),Ue(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),ci(()=>{this.componentLoaders.delete(r)})),s=new ss(i,()=>new We).pipe(is());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return W({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=MV(i,this.compiler,r,this.onLoadEndListener).pipe(ci(()=>{this.childrenLoaders.delete(i)})),a=new ss(o,()=>new We).pipe(is());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function MV(t,e,n,r){return jr(t.loadChildren()).pipe(Z(VC),Oe(i=>i instanceof ia||Array.isArray(i)?W(i):Te(e.compileModuleAsync(i))),Z(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(ka,[],{optional:!0,self:!0}).flat()),{routes:o.map(Mm),injector:s}}))}function PV(t){return t&&typeof t=="object"&&"default"in t}function VC(t){return PV(t)?t.default:t}var km=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>k(OV),providedIn:"root"});let t=e;return t})(),OV=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),UC=new q(""),jC=new q("");function kV(t,e,n){let r=t.get(jC),i=t.get(nt);return t.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),FV(t))),{onViewTransitionCreated:u}=r;return u&&cn(t,()=>u({transition:a,from:e,to:n})),o})}function FV(t){return new Promise(e=>{Tg(e,{injector:t})})}var Fm=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new We,this.transitionAbortSubject=new We,this.configLoader=k(Om),this.environmentInjector=k(vt),this.urlSerializer=k(La),this.rootContexts=k(Va),this.location=k(Vs),this.inputBindingEnabled=k(ed,{optional:!0})!==null,this.titleStrategy=k(LC),this.options=k(Ba,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(km),this.createViewTransition=k(UC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null;let r=s=>this.events.next(new fm(s)),i=s=>this.events.next(new pm(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ne(L(L({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Xe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ba,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(et(o=>o.id!==0),Z(o=>Ne(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Et(o=>{let a=!1,u=!1;return W(o).pipe(Et(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ot.SupersededByNewNavigation),gt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ne(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new Vr(l.id,this.urlSerializer.serialize(l.rawUrl),m,Hl.IgnoredSameUrlNavigation)),l.resolve(null),gt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return W(l).pipe(Et(m=>{let v=this.transitions?.getValue();return this.events.next(new Gs(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),v!==this.transitions?.getValue()?gt:Promise.resolve(m)}),CV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ue(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Ne(L({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let v=new Gl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:v,source:A,restoredState:N,extras:R}=l,M=new Gs(m,this.urlSerializer.serialize(v),A,N);this.events.next(M);let B=CC(this.rootComponentType).snapshot;return this.currentTransition=o=Ne(L({},l),{targetSnapshot:B,urlAfterRedirects:v,extras:Ne(L({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,W(o)}else{let m="";return this.events.next(new Vr(l.id,this.urlSerializer.serialize(l.extractedUrl),m,Hl.IgnoredByUrlHandlingStrategy)),l.resolve(null),gt}}),Ue(l=>{let h=new um(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Z(l=>(this.currentTransition=o=Ne(L({},l),{guards:zL(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),eV(this.environmentInjector,l=>this.events.next(l)),Ue(l=>{if(o.guardsResult=l.guardsResult,Hs(l.guardsResult))throw NC(this.urlSerializer,l.guardsResult);let h=new lm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),et(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ot.GuardRejected),!1)),rm(l=>{if(l.guards.canActivateChecks.length)return W(l).pipe(Ue(h=>{let p=new dm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),Et(h=>{let p=!1;return W(h).pipe(AV(this.paramsInheritanceStrategy,this.environmentInjector),Ue({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Ot.NoDataFromResolver)}}))}),Ue(h=>{let p=new hm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),rm(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Ue(v=>{p.component=v}),Z(()=>{})));for(let v of p.children)m.push(...h(v));return m};return Wo(h(l.targetSnapshot.root)).pipe(Er(null),zn(1))}),rm(()=>this.afterPreactivation()),Et(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Te(p).pipe(Z(()=>o)):W(o)}),Z(l=>{let h=FL(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Ne(L({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Ue(()=>{this.events.next(new Na)}),qL(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),zn(1),Ue({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new dn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),_f(this.transitionAbortSubject.pipe(Ue(l=>{throw l}))),ci(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",Ot.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),wr(l=>{if(u=!0,MC(l))this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),UL(l)?this.events.next(new xa(l.url)):o.resolve(!1);else{this.events.next(new Ra(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return gt}))}))}cancelNavigationTransition(r,i,s){let o=new Lr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LV(t){return t!==ba}var VV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>k(UV),providedIn:"root"});let t=e;return t})(),Rm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},UV=(()=>{let e=class e extends Rm{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=og(e)))(s||e)}})(),e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>k(jV),providedIn:"root"});let t=e;return t})(),jV=(()=>{let e=class e extends BC{constructor(){super(...arguments),this.location=k(Vs),this.urlSerializer=k(La),this.options=k(Ba,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(km),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Fr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=CC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Gs)this.stateMemento=this.createStateMemento();else if(r instanceof Vr)this.rawUrlTree=i.initialUrl;else if(r instanceof Gl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Na?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Lr&&(r.code===Ot.GuardRejected||r.code===Ot.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ra?this.restoreHistory(i,!0):r instanceof dn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=L(L({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=L(L({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=og(e)))(s||e)}})(),e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ta=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ta||{});function $C(t,e){t.events.pipe(et(n=>n instanceof dn||n instanceof Lr||n instanceof Ra||n instanceof Vr),Z(n=>n instanceof dn||n instanceof Vr?Ta.COMPLETE:(n instanceof Lr?n.code===Ot.Redirect||n.code===Ot.SupersededByNewNavigation:!1)?Ta.REDIRECTING:Ta.FAILED),et(n=>n!==Ta.REDIRECTING),zn(1)).subscribe(()=>{e()})}function BV(t){throw t}var $V={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Kt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=k(fl),this.stateManager=k(BC),this.options=k(Ba,{optional:!0})||{},this.pendingTasks=k(Ps),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(Fm),this.urlSerializer=k(La),this.location=k(Vs),this.urlHandlingStrategy=k(km),this._events=new We,this.errorHandler=this.options.errorHandler||BV,this.navigated=!1,this.routeReuseStrategy=k(VV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(ka,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(ed,{optional:!0}),this.eventsSubscription=new Fe,this.isNgZoneEnabled=k(pe)instanceof pe&&pe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Lr&&i.code!==Ot.Redirect&&i.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof dn)this.navigated=!0;else if(i instanceof xa){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||LV(s.source)};this.scheduleNavigation(a,ba,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}HV(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ba,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=L({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Mm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u){case"merge":p=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let v=s?s.snapshot:this.routerState.snapshot.root;m=EC(v)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return TC(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Hs(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ba,null,i)}navigate(r,i={skipLocationChange:!1}){return zV(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=L({},$V):i===!1?s=L({},qV):s=i,Hs(r))return rC(this.currentUrlTree,r,s);let o=this.parseUrl(r);return rC(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,v)=>{u=m,l=v});let p=this.pendingTasks.add();return $C(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}function HV(t){return!(t instanceof Na)&&!(t instanceof xa)}var uC=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new We,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof dn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:uD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(Ae(Kt),Ae(Ur),ag("tabindex"),Ae(Ms),Ae(Tn),Ae(nr))},e.\u0275dir=Rr({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Rg("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Ag("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Vt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",pa],skipLocationChange:[Vt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",pa],replaceUrl:[Vt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",pa],routerLink:"routerLink"},standalone:!0,features:[Cg,Ns]});let t=e;return t})(),p8=(()=>{let e=class e{get isActive(){return this._isActive}constructor(r,i,s,o,a){this.router=r,this.element=i,this.renderer=s,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Rt,this.routerEventsSubscription=r.events.subscribe(u=>{u instanceof dn&&this.update()})}ngAfterContentInit(){W(this.links.changes,W(null)).pipe(mn()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Te(r).pipe(mn()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.isActiveChange.emit(r))})}isLinkActive(r){let i=GV(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let o=s.urlTree;return o?r.isActive(o,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};e.\u0275fac=function(i){return new(i||e)(Ae(Kt),Ae(Tn),Ae(Ms),Ae(ks),Ae(uC,8))},e.\u0275dir=Rr({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(i,s,o){if(i&1&&db(o,uC,5),i&2){let a;hb(a=fb())&&(s.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Ns]});let t=e;return t})();function GV(t){return!!t.paths}var Xl=class{};var WV=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(et(r=>r instanceof dn),qn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=hl(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return Te(s).pipe(mn())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=W(null);let o=s.pipe(Oe(a=>a===null?W(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Te([o,a]).pipe(mn())}else return o})}};e.\u0275fac=function(i){return new(i||e)(U(Kt),U(gl),U(vt),U(Xl),U(Om))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qC=new q(""),KV=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Gs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof dn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Vr&&r.code===Hl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Wl&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Wl(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){DD()},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function g8(t,...e){return Ss([{provide:ka,multi:!0,useValue:t},[],{provide:Ur,useFactory:zC,deps:[Kt]},{provide:fa,multi:!0,useFactory:HC},e.map(n=>n.\u0275providers)])}function zC(t){return t.routerState.root}function $a(t,e){return{\u0275kind:t,\u0275providers:e}}function HC(){let t=k(Ct);return e=>{let n=t.get(Os);if(e!==n.components[0])return;let r=t.get(Kt),i=t.get(GC);t.get(Lm)===1&&r.initialNavigation(),t.get(WC,null,ce.Optional)?.setUpPreloading(),t.get(qC,null,ce.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var GC=new q("",{factory:()=>new We}),Lm=new q("",{providedIn:"root",factory:()=>1});function QV(){return $a(2,[{provide:Lm,useValue:0},{provide:pl,multi:!0,deps:[Ct],useFactory:e=>{let n=e.get(Pb,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Kt),s=e.get(GC);$C(i,()=>{r(!0)}),e.get(Fm).afterPreactivation=()=>(r(!0),s.closed?W(void 0):s),i.initialNavigation()}))}}])}function YV(){return $a(3,[{provide:pl,multi:!0,useFactory:()=>{let e=k(Kt);return()=>{e.setUpLocationChangeListener()}}},{provide:Lm,useValue:2}])}var WC=new q("");function JV(t){return $a(0,[{provide:WC,useExisting:WV},{provide:Xl,useExisting:t}])}function ZV(){return $a(8,[aC,{provide:ed,useExisting:aC}])}function XV(t){let e=[{provide:UC,useValue:kV},{provide:jC,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return $a(9,e)}var lC=new q("ROUTER_FORROOT_GUARD"),eU=[Vs,{provide:La,useClass:Aa},Kt,Va,{provide:Ur,useFactory:zC,deps:[Kt]},Om,[]],m8=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[eU,[],{provide:ka,multi:!0,useValue:r},{provide:lC,useFactory:iU,deps:[[Kt,new ct,new jp]]},{provide:Ba,useValue:i||{}},i?.useHash?nU():rU(),tU(),i?.preloadingStrategy?JV(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?sU(i):[],i?.bindToComponentInputs?ZV().\u0275providers:[],i?.enableViewTransitions?XV().\u0275providers:[],oU()]}}static forChild(r){return{ngModule:e,providers:[{provide:ka,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(U(lC,8))},e.\u0275mod=Bt({type:e}),e.\u0275inj=jt({});let t=e;return t})();function tU(){return{provide:qC,useFactory:()=>{let t=k(Ub),e=k(pe),n=k(Ba),r=k(Fm),i=k(La);return n.scrollOffset&&t.setOffset(n.scrollOffset),new KV(i,r,t,e,n)}}}function nU(){return{provide:nr,useClass:kb}}function rU(){return{provide:nr,useClass:Bg}}function iU(t){return"guarded"}function sU(t){return[t.initialNavigation==="disabled"?YV().\u0275providers:[],t.initialNavigation==="enabledBlocking"?QV().\u0275providers:[]]}var dC=new q("");function oU(){return[{provide:dC,useFactory:HC},{provide:fa,multi:!0,useExisting:dC}]}var QC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},YC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;u||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Um;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Um=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},uU=function(t){let e=QC(t);return YC.encodeByteArray(e,!0)},qa=function(t){return uU(t).replace(/\./g,"")},Bm=function(t){try{return YC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function lU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var dU=()=>lU().__FIREBASE_DEFAULTS__,hU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Bm(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return dU()||hU()||fU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$m=t=>{var e,n;return(n=(e=rd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},JC=t=>{let e=$m(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qm=()=>{var t;return(t=rd())===null||t===void 0?void 0:t.config},zm=t=>{var e;return(e=rd())===null||e===void 0?void 0:e[`_${t}`]};var nd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ZC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qa(JSON.stringify(n)),qa(JSON.stringify(o)),""].join(".")}function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function pU(){var t;let e=(t=rd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function e0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function t0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function n0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function r0(){let t=Ye();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function i0(){return!pU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hm(){try{return typeof indexedDB=="object"}catch{return!1}}function s0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var gU="FirebaseError",kt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rr.prototype.create)}},rr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?mU(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new kt(i,a,r)}};function mU(t,e){return t.replace(yU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var yU=/\{\$([^}]+)}/g;function o0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(KC(s)&&KC(o)){if(!bi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function KC(t){return t!==null&&typeof t=="object"}function za(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qs(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ys(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function a0(t,e){let n=new jm(t,e);return n.subscribe.bind(n)}var jm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Vm),i.error===void 0&&(i.error=Vm),i.complete===void 0&&(i.complete=Vm);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function vU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vm(){}var v8=4*60*60*1e3;function Ve(t){return t&&t._delegate?t._delegate:t}var Qt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ci="[DEFAULT]";var Gm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new nd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IU(e))try{this.getOrInitializeService({instanceIdentifier:Ci})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ci){return this.instances.has(e)}getOptions(e=Ci){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_U(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ci){return this.component?this.component.multipleInstances?e:Ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _U(t){return t===Ci?void 0:t}function IU(t){return t.instantiationMode==="EAGER"}var id=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Gm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var wU=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),EU={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},TU=le.INFO,DU={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},bU=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=DU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Br=class{constructor(e){this.name=e,this._logLevel=TU,this._logHandler=bU,this._userLogHandler=null,wU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var CU=(t,e)=>e.some(n=>t instanceof n),c0,u0;function AU(){return c0||(c0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SU(){return u0||(u0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var l0=new WeakMap,Km=new WeakMap,d0=new WeakMap,Wm=new WeakMap,Ym=new WeakMap;function RU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(An(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&l0.set(n,t)}).catch(()=>{}),Ym.set(e,t),e}function NU(t){if(Km.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Km.set(t,e)}var Qm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Km.get(t);if(e==="objectStoreNames")return t.objectStoreNames||d0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return An(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function h0(t){Qm=t(Qm)}function xU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(sd(this),e,...n);return d0.set(r,e.sort?e.sort():[e]),An(r)}:SU().includes(t)?function(...e){return t.apply(sd(this),e),An(l0.get(this))}:function(...e){return An(t.apply(sd(this),e))}}function MU(t){return typeof t=="function"?xU(t):(t instanceof IDBTransaction&&NU(t),CU(t,AU())?new Proxy(t,Qm):t)}function An(t){if(t instanceof IDBRequest)return RU(t);if(Wm.has(t))return Wm.get(t);let e=MU(t);return e!==t&&(Wm.set(t,e),Ym.set(e,t)),e}var sd=t=>Ym.get(t);function p0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=An(o);return r&&o.addEventListener("upgradeneeded",u=>{r(An(o.result),u.oldVersion,u.newVersion,An(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var PU=["get","getKey","getAll","getAllKeys","count"],OU=["put","add","delete","clear"],Jm=new Map;function f0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jm.get(e))return Jm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=OU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PU.includes(n)))return;let s=function(o,...a){return _(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Jm.set(e,s),s}h0(t=>Ne(L({},t),{get:(e,n,r)=>f0(e,n)||t.get(e,n,r),has:(e,n)=>!!f0(e,n)||t.has(e,n)}));var Xm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kU(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function kU(t){let e=t.getComponent();return e?.type==="VERSION"}var ey="@firebase/app",g0="0.10.13";var ir=new Br("@firebase/app"),FU="@firebase/app-compat",LU="@firebase/analytics-compat",VU="@firebase/analytics",UU="@firebase/app-check-compat",jU="@firebase/app-check",BU="@firebase/auth",$U="@firebase/auth-compat",qU="@firebase/database",zU="@firebase/data-connect",HU="@firebase/database-compat",GU="@firebase/functions",WU="@firebase/functions-compat",KU="@firebase/installations",QU="@firebase/installations-compat",YU="@firebase/messaging",JU="@firebase/messaging-compat",ZU="@firebase/performance",XU="@firebase/performance-compat",ej="@firebase/remote-config",tj="@firebase/remote-config-compat",nj="@firebase/storage",rj="@firebase/storage-compat",ij="@firebase/firestore",sj="@firebase/vertexai-preview",oj="@firebase/firestore-compat",aj="firebase",cj="10.14.1";var ty="[DEFAULT]",uj={[ey]:"fire-core",[FU]:"fire-core-compat",[VU]:"fire-analytics",[LU]:"fire-analytics-compat",[jU]:"fire-app-check",[UU]:"fire-app-check-compat",[BU]:"fire-auth",[$U]:"fire-auth-compat",[qU]:"fire-rtdb",[zU]:"fire-data-connect",[HU]:"fire-rtdb-compat",[GU]:"fire-fn",[WU]:"fire-fn-compat",[KU]:"fire-iid",[QU]:"fire-iid-compat",[YU]:"fire-fcm",[JU]:"fire-fcm-compat",[ZU]:"fire-perf",[XU]:"fire-perf-compat",[ej]:"fire-rc",[tj]:"fire-rc-compat",[nj]:"fire-gcs",[rj]:"fire-gcs-compat",[ij]:"fire-fst",[oj]:"fire-fst-compat",[sj]:"fire-vertex","fire-js":"fire-js",[aj]:"fire-js-all"};var Ha=new Map,lj=new Map,ny=new Map;function m0(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qr(t){let e=t.name;if(ny.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;ny.set(e,t);for(let n of Ha.values())m0(n,t);for(let n of lj.values())m0(n,t);return!0}function Wa(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hn(t){return t.settings!==void 0}var dj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new rr("app","Firebase",dj);var ry=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}};var zr=cj;function oy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ty,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $r.create("bad-app-name",{appName:String(i)});if(n||(n=qm()),!n)throw $r.create("no-options");let s=Ha.get(i);if(s){if(bi(n,s.options)&&bi(r,s.config))return s;throw $r.create("duplicate-app",{appName:i})}let o=new id(i);for(let u of ny.values())o.addComponent(u);let a=new ry(n,r,o);return Ha.set(i,a),a}function Js(t=ty){let e=Ha.get(t);if(!e&&t===ty&&qm())return oy();if(!e)throw $r.create("no-app",{appName:t});return e}function od(){return Array.from(Ha.values())}function He(t,e,n){var r;let i=(r=uj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(a.join(" "));return}qr(new Qt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var hj="firebase-heartbeat-database",fj=1,Ga="firebase-heartbeat-store",Zm=null;function I0(){return Zm||(Zm=p0(hj,fj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ga)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),Zm}function pj(t){return _(this,null,function*(){try{let n=(yield I0()).transaction(Ga),r=yield n.objectStore(Ga).get(w0(t));return yield n.done,r}catch(e){if(e instanceof kt)ir.warn(e.message);else{let n=$r.create("idb-get",{originalErrorMessage:e?.message});ir.warn(n.message)}}})}function y0(t,e){return _(this,null,function*(){try{let r=(yield I0()).transaction(Ga,"readwrite");yield r.objectStore(Ga).put(e,w0(t)),yield r.done}catch(n){if(n instanceof kt)ir.warn(n.message);else{let r=$r.create("idb-set",{originalErrorMessage:n?.message});ir.warn(r.message)}}})}function w0(t){return`${t.name}!${t.options.appId}`}var gj=1024,mj=30*24*60*60*1e3,iy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new sy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=v0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=mj}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ir.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=v0(),{heartbeatsToSend:r,unsentEntries:i}=yj(this._heartbeatsCache.heartbeats),s=qa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ir.warn(n),""}})}};function v0(){return new Date().toISOString().substring(0,10)}function yj(t,e=gj){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var sy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Hm()?s0().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield pj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return y0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return y0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function _0(t){return qa(JSON.stringify({version:2,heartbeats:t})).length}function vj(t){qr(new Qt("platform-logger",e=>new Xm(e),"PRIVATE")),qr(new Qt("heartbeat",e=>new iy(e),"PRIVATE")),He(ey,g0,t),He(ey,g0,"esm2017"),He("fire-js","")}vj("");var _j="firebase",Ij="10.14.1";He(_j,Ij,"app");var Si=new Sr("ANGULARFIRE2_VERSION");function cd(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ka=(t,e)=>{let n=e?[e]:od(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Xs=class{constructor(){return Ka(wj)}},wj="app-check";function Zs(){}var ad=class{zone;delegate;constructor(e,n=df){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},ay=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zs,{},Zs,Zs)),n.pipe(Ue({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},eo=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ad(Zone.current)),this.insideAngular=n.run(()=>new ad(Zone.current,vr)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(U(pe))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ud(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Ej(t){return ud().ngZone.runOutsideAngular(()=>t())}function Ai(t){return ud().ngZone.run(()=>t())}function Tj(t){return Dj(ud())(t)}function Dj(t){return function(n){return n=n.lift(new ay(t.ngZone)),n.pipe(Ir(t.outsideAngular),_r(t.insideAngular))}}var bj=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ai(()=>t.apply(void 0,r))},Ge=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Ai(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zs,{},Zs,Zs))),r[s]=bj(r[s],n));let i=Ej(()=>t.apply(this,r));if(!e)if(i instanceof ne){let s=ud();return i.pipe(Ir(s.outsideAngular),_r(s.insideAngular))}else return Ai(()=>i);return i instanceof ne?i.pipe(Tj):i instanceof Promise?Ai(()=>new Promise((s,o)=>i.then(a=>Ai(()=>s(a)),a=>Ai(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Ai(()=>i)};var sr=class{constructor(e){return e}},Ri=class{constructor(){return od()}};function Cj(t){return t&&t.length===1?t[0]:new sr(Js())}var cy=new q("angularfire2._apps"),Aj={provide:sr,useFactory:Cj,deps:[[new ct,cy]]},Sj={provide:Ri,deps:[[new ct,cy]]};function Rj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new sr(r)}}var Nj=(()=>{class t{constructor(n){He("angularfire",Si.full,"core"),He("angularfire",Si.full,"app"),He("angular",vb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(U(qt))};static \u0275mod=Bt({type:t});static \u0275inj=jt({providers:[Aj,Sj]})}return t})();function rK(t,...e){return{ngModule:Nj,providers:[{provide:cy,useFactory:Rj(t),multi:!0,deps:[pe,Ct,eo,...e]}]}}var iK=Ge(oy,!0);function V0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var U0=V0,j0=new rr("auth","Firebase",V0());var gd=new Br("@firebase/auth");function xj(t,...e){gd.logLevel<=le.WARN&&gd.warn(`Auth (${zr}): ${t}`,...e)}function dd(t,...e){gd.logLevel<=le.ERROR&&gd.error(`Auth (${zr}): ${t}`,...e)}function Rn(t,...e){throw xy(t,...e)}function Ni(t,...e){return xy(t,...e)}function B0(t,e,n){let r=Object.assign(Object.assign({},U0()),{[e]:n});return new rr("auth","Firebase",r).create(e,{appName:t.name})}function cr(t){return B0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return j0.create(t,...e)}function Y(t,e,...n){if(!t)throw xy(e,...n)}function or(t){let e="INTERNAL ASSERTION FAILED: "+t;throw dd(e),new Error(e)}function Gr(t,e){t||or(e)}function hy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Mj(){return E0()==="http:"||E0()==="https:"}function E0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Pj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Mj()||t0()||"connection"in navigator)?navigator.onLine:!0}function Oj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var xi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gr(n>e,"Short delay should be less than long delay!"),this.isMobile=XC()||n0()}get(){return Pj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function My(t,e){Gr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var md=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var kj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Fj=new xi(3e4,6e4);function Wr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Kr(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return $0(t,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=za(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let v=Object.assign({method:e,headers:m},l);return e0()||(v.referrerPolicy="no-referrer"),md.fetch()(q0(t,t.config.apiHost,n,p),v)}))})}function $0(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},kj),e);try{let i=new fy(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ld(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ld(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ld(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ld(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw B0(t,h,l);Rn(t,h)}}catch(i){if(i instanceof kt)throw i;Rn(t,"network-request-failed",{message:String(i)})}})}function nc(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Kr(t,e,n,r,i);return"mfaPendingCredential"in l&&Rn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function q0(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?My(t.config,i):`${t.config.apiScheme}://${i}`}function Lj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var fy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ni(this.auth,"network-request-failed")),Fj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ld(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Ni(t,e,r);return i.customData._tokenResponse=n,i}function T0(t){return t!==void 0&&t.enterprise!==void 0}var py=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Lj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Vj(t,e){return _(this,null,function*(){return Kr(t,"GET","/v2/recaptchaConfig",Wr(t,e))})}function Uj(t,e){return _(this,null,function*(){return Kr(t,"POST","/v1/accounts:delete",e)})}function z0(t,e){return _(this,null,function*(){return Kr(t,"POST","/v1/accounts:lookup",e)})}function Qa(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Py(t,e=!1){return _(this,null,function*(){let n=Ve(t),r=yield n.getIdToken(e),i=Oy(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Qa(uy(i.auth_time)),issuedAtTime:Qa(uy(i.iat)),expirationTime:Qa(uy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function uy(t){return Number(t)*1e3}function Oy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Bm(n);return i?JSON.parse(i):(dd("Failed to decode base64 JWT payload"),null)}catch(i){return dd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function D0(t){let e=Oy(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ja(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof kt&&jj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function jj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var gy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Za=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qa(this.lastLoginAt),this.creationTime=Qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function yd(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ja(t,z0(n,{idToken:r}));Y(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?H0(s.providerUserInfo):[],a=Bj(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Za(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function ky(t){return _(this,null,function*(){let e=Ve(t);yield yd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Bj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function H0(t){return t.map(e=>{var{providerId:n}=e,r=ff(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function $j(t,e){return _(this,null,function*(){let n=yield $0(t,{},()=>_(this,null,function*(){let r=za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=q0(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",md.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function qj(t,e){return _(this,null,function*(){return Kr(t,"POST","/v2/accounts:revokeToken",Wr(t,e))})}var Ya=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let n=D0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield $j(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return or("not implemented")}};function Hr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var to=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Za(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Ja(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Py(this,e)}reload(){return ky(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield yd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(hn(this.auth.app))return Promise.reject(cr(this.auth));let e=yield this.getIdToken();return yield Ja(this,Uj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,M=(l=n.createdAt)!==null&&l!==void 0?l:void 0,B=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:z,emailVerified:K,isAnonymous:Ce,providerData:ee,stsTokenManager:T}=n;Y(z&&T,e,"internal-error");let y=Ya.fromJSON(this.name,T);Y(typeof z=="string",e,"internal-error"),Hr(p,e.name),Hr(m,e.name),Y(typeof K=="boolean",e,"internal-error"),Y(typeof Ce=="boolean",e,"internal-error"),Hr(v,e.name),Hr(A,e.name),Hr(N,e.name),Hr(R,e.name),Hr(M,e.name),Hr(B,e.name);let I=new t({uid:z,auth:e,email:m,emailVerified:K,displayName:p,isAnonymous:Ce,photoURL:A,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:M,lastLoginAt:B});return ee&&Array.isArray(ee)&&(I.providerData=ee.map(E=>Object.assign({},E))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new Ya;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];Y(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?H0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ya;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Za(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var b0=new Map;function ar(t){Gr(t instanceof Function,"Expected a class definition");let e=b0.get(t);return e?(Gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,b0.set(t,e),e)}var zj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),my=zj;function hd(t,e,n){return`firebase:${t}:${e}:${n}`}var vd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=hd(this.userKey,i.apiKey,s),this.fullPersistenceKey=hd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?to._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(ar(my),e,r);let i=(yield Promise.all(n.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||ar(my),o=hd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=to._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function C0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J0(e))return"Blackberry";if(Z0(e))return"Webos";if(W0(e))return"Safari";if((e.includes("chrome/")||K0(e))&&!e.includes("edge/"))return"Chrome";if(Y0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function G0(t=Ye()){return/firefox\//i.test(t)}function W0(t=Ye()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K0(t=Ye()){return/crios\//i.test(t)}function Q0(t=Ye()){return/iemobile/i.test(t)}function Y0(t=Ye()){return/android/i.test(t)}function J0(t=Ye()){return/blackberry/i.test(t)}function Z0(t=Ye()){return/webos/i.test(t)}function Fy(t=Ye()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Hj(t=Ye()){var e;return Fy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Gj(){return r0()&&document.documentMode===10}function X0(t=Ye()){return Fy(t)||Y0(t)||Z0(t)||J0(t)||/windows phone/i.test(t)||Q0(t)}function eA(t,e=[]){let n;switch(t){case"Browser":n=C0(Ye());break;case"Worker":n=`${C0(Ye())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zr}/${r}`}var yy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Wj(n){return _(this,arguments,function*(t,e={}){return Kr(t,"GET","/v2/passwordPolicy",Wr(t,e))})}var Kj=6,vy=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Kj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var _y=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _d(this),this.idTokenSubscription=new _d(this),this.beforeStateQueue=new yy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield vd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield z0(this,{idToken:e}),r=yield to._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(hn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield yd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Oj()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(hn(this.app))return Promise.reject(cr(this));let n=e?Ve(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return hn(this.app)?Promise.reject(cr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return hn(this.app)?Promise.reject(cr(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(ar(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield Wj(this),n=new vy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield qj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ar(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=yield vd.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&xj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Pi(t){return Ve(t)}var _d=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=a0(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Cd={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qj(t){Cd=t}function tA(t){return Cd.loadJS(t)}function Yj(){return Cd.recaptchaEnterpriseScript}function Jj(){return Cd.gapiScript}function nA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Zj="recaptcha-enterprise",Xj="NO_RECAPTCHA",Iy=class{constructor(e){this.type=Zj,this.auth=Pi(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>_(this,null,function*(){Vj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new py(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;T0(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Xj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&T0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Yj();u.length!==0&&(u+=a),tA(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function A0(t,e,n,r=!1){return _(this,null,function*(){let i=new Iy(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function wy(t,e,n,r){return _(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield A0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield A0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Ly(t,e){let n=Wa(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(bi(s,e??{}))return i;Rn(i,"already-initialized")}return n.initialize({options:e})}function e2(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ar);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Vy(t,e,n){let r=Pi(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=rA(e),{host:o,port:a}=t2(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||n2()}function rA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function t2(t){let e=rA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:S0(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:S0(o)}}}function S0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function n2(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Xa=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}};function r2(t,e){return _(this,null,function*(){return Kr(t,"POST","/v1/accounts:signUp",e)})}function i2(t,e){return _(this,null,function*(){return nc(t,"POST","/v1/accounts:signInWithPassword",Wr(t,e))})}function s2(t,e){return _(this,null,function*(){return nc(t,"POST","/v1/accounts:signInWithEmailLink",Wr(t,e))})}function o2(t,e){return _(this,null,function*(){return nc(t,"POST","/v1/accounts:signInWithEmailLink",Wr(t,e))})}var ec=class t extends Xa{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wy(e,n,"signInWithPassword",i2);case"emailLink":return s2(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wy(e,r,"signUpPassword",r2);case"emailLink":return o2(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ly(t,e){return _(this,null,function*(){return nc(t,"POST","/v1/accounts:signInWithIdp",Wr(t,e))})}function a2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function c2(t){let e=Qs(Ys(t)).link,n=e?Qs(Ys(e)).deep_link_id:null,r=Qs(Ys(t)).deep_link_id;return(r?Qs(Ys(r)).link:null)||r||n||e||t}var Id=class t{constructor(e){var n,r,i,s,o,a;let u=Qs(Ys(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=a2((i=u.mode)!==null&&i!==void 0?i:null);Y(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=c2(e);try{return new t(n)}catch{return null}}};var iA=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return ec._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Id.parseLink(r);return Y(i,"argument-error"),ec._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),wd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ey=class extends wd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function u2(t,e){return _(this,null,function*(){return nc(t,"POST","/v1/accounts:signUp",Wr(t,e))})}var no=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let s=yield to._fromIdTokenResponse(e,r,i),o=R0(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=R0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function R0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Ty=class t extends kt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function sA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ty._fromErrorAndOperation(t,s,e,r):s})}function l2(t,e,n=!1){return _(this,null,function*(){let r=yield Ja(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return no._forOperation(t,"link",r)})}function d2(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(hn(r.app))return Promise.reject(cr(r));let i="reauthenticate";try{let s=yield Ja(t,sA(r,i,e,t),n);Y(s.idToken,r,"internal-error");let o=Oy(s.idToken);Y(o,r,"internal-error");let{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),no._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Rn(r,"user-mismatch"),s}})}function oA(t,e,n=!1){return _(this,null,function*(){if(hn(t.app))return Promise.reject(cr(t));let r="signIn",i=yield sA(t,r,e),s=yield no._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Uy(t,e){return _(this,null,function*(){return oA(Pi(t),e)})}function aA(t){return _(this,null,function*(){let e=Pi(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function jy(t,e,n){return _(this,null,function*(){if(hn(t.app))return Promise.reject(cr(t));let r=Pi(t),o=yield wy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",u2).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&aA(t),u}),a=yield no._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function By(t,e,n){return hn(t.app)?Promise.reject(cr(t)):Uy(Ve(t),iA.credential(e,n)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&aA(t),r}))}function $y(t,e,n,r){return Ve(t).onIdTokenChanged(e,n,r)}function qy(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}var Ed="__sak";var Td=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var h2=1e3,f2=10,p2=(()=>{class t extends Td{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=X0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Gj()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,f2):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},h2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield yr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield yr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield yr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),cA=p2;var g2=(()=>{class t extends Td{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),zy=g2;function m2(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var y2=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,o)})),l=yield m2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function uA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Dy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=uA("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Sn(){return window}function v2(t){Sn().location.href=t}function lA(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}function _2(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function I2(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function w2(){return lA()?self:null}var dA="firebaseLocalStorageDb",E2=1,Dd="firebaseLocalStorage",hA="fbase_key",Mi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Ad(t,e){return t.transaction([Dd],e?"readwrite":"readonly").objectStore(Dd)}function T2(){let t=indexedDB.deleteDatabase(dA);return new Mi(t).toPromise()}function by(){let t=indexedDB.open(dA,E2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Dd,{keyPath:hA})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Dd)?e(r):(r.close(),yield T2(),e(yield by()))}))})}function N0(t,e,n){return _(this,null,function*(){let r=Ad(t,!0).put({[hA]:e,value:n});return new Mi(r).toPromise()})}function D2(t,e){return _(this,null,function*(){let n=Ad(t,!1).get(e),r=yield new Mi(n).toPromise();return r===void 0?null:r.value})}function x0(t,e){let n=Ad(t,!0).delete(e);return new Mi(n).toPromise()}var b2=800,C2=3,A2=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield by(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>C2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return lA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=y2._getInstance(w2()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield _2(),!this.activeServiceWorker)return;this.sender=new Dy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||I2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield by();return yield N0(n,Ed,"1"),yield x0(n,Ed),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>N0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>D2(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>x0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=Ad(s,!1).getAll();return new Mi(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),b2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),fA=A2;var hK=nA("rcb"),fK=new xi(3e4,6e4);function S2(t,e){return e?ar(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var tc=class extends Xa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ly(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ly(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ly(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function R2(t){return oA(t.auth,new tc(t),t.bypassAuthState)}function N2(t){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),d2(n,new tc(t),t.bypassAuthState)}function x2(t){return _(this,null,function*(){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),l2(n,new tc(t),t.bypassAuthState)})}var Cy=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R2;case"linkViaPopup":case"linkViaRedirect":return x2;case"reauthViaPopup":case"reauthViaRedirect":return N2;default:Rn(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var pK=new xi(2e3,1e4);var M2="pendingRedirect",fd=new Map,Ay=class t extends Cy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=fd.get(this.auth._key());if(!e){try{let r=(yield P2(this.resolver,this.auth))?yield yr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fd.set(this.auth._key(),e)}return this.bypassAuthState||fd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return yr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,yr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function P2(t,e){return _(this,null,function*(){let n=F2(e),r=k2(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function O2(t,e){fd.set(t._key(),e)}function k2(t){return ar(t._redirectPersistence)}function F2(t){return hd(M2,t.config.apiKey,t.name)}function L2(t,e,n=!1){return _(this,null,function*(){if(hn(t.app))return Promise.reject(cr(t));let r=Pi(t),i=S2(r,e),o=yield new Ay(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var V2=10*60*1e3,Sy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!U2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ni(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V2&&this.cachedEventUids.clear(),this.cachedEventUids.has(M0(e))}saveEventToCache(e){this.cachedEventUids.add(M0(e)),this.lastProcessedEventTime=Date.now()}};function M0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function U2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pA(t);default:return!1}}function j2(n){return _(this,arguments,function*(t,e={}){return Kr(t,"GET","/v1/projects",e)})}var B2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$2=/^https?/;function q2(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield j2(t);for(let n of e)try{if(z2(n))return}catch{}Rn(t,"unauthorized-domain")})}function z2(t){let e=hy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$2.test(n))return!1;if(B2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var H2=new xi(3e4,6e4);function P0(){let t=Sn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function G2(t){return new Promise((e,n)=>{var r,i,s;function o(){P0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{P0(),n(Ni(t,"network-request-failed"))},timeout:H2.get()})}if(!((i=(r=Sn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Sn().gapi)===null||s===void 0)&&s.load)o();else{let a=nA("iframefcb");return Sn()[a]=()=>{gapi.load?o():n(Ni(t,"network-request-failed"))},tA(`${Jj()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw pd=null,e})}var pd=null;function W2(t){return pd=pd||G2(t),pd}var K2=new xi(5e3,15e3),Q2="__/auth/iframe",Y2="emulator/auth/iframe",J2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function X2(t){let e=t.config;Y(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?My(e,Y2):`https://${t.config.authDomain}/${Q2}`,r={apiKey:e.apiKey,appName:t.name,v:zr},i=Z2.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${za(r).slice(1)}`}function eB(t){return _(this,null,function*(){let e=yield W2(t),n=Sn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:X2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J2,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Ni(t,"network-request-failed"),a=Sn().setTimeout(()=>{s(o)},K2.get());function u(){Sn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var tB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nB=500,rB=600,iB="_blank",sB="http://localhost",bd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function oB(t,e,n,r=nB,i=rB){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},tB),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ye().toLowerCase();n&&(a=K0(l)?iB:n),G0(l)&&(e=e||sB,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[v,A])=>`${m}${v}=${A},`,"");if(Hj(l)&&a!=="_self")return aB(e||"",a),new bd(null);let p=window.open(e||"",a,h);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new bd(p)}function aB(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var cB="__/auth/handler",uB="emulator/auth/handler",lB=encodeURIComponent("fac");function O0(t,e,n,r,i,s){return _(this,null,function*(){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zr,eventId:i};if(e instanceof wd){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",o0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Ey){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${lB}=${encodeURIComponent(u)}`:"";return`${dB(t)}?${za(a).slice(1)}${l}`})}function dB({config:t}){return t.emulator?My(t,uB):`https://${t.authDomain}/${cB}`}var dy="webStorageSupport",Ry=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zy,this._completeRedirectFn=L2,this._overrideRedirectResult=O2}_openPopup(e,n,r,i){return _(this,null,function*(){var s;Gr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield O0(e,n,r,hy(),i);return oB(e,o,uA())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield O0(e,n,r,hy(),i);return v2(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield eB(e),r=new Sy(e);return n.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dy,{type:dy},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[dy];o!==void 0&&n(!!o),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=q2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return X0()||W0()||Fy()}},gA=Ry;var k0="@firebase/auth",F0="1.7.9";var Ny=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function hB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fB(t){qr(new Qt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eA(t)},l=new _y(r,i,s,u);return e2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qr(new Qt("auth-internal",e=>{let n=Pi(e.getProvider("auth").getImmediate());return(r=>new Ny(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),He(k0,F0,hB(t)),He(k0,F0,"esm2017")}var pB=5*60,gB=zm("authIdTokenMaxAge")||pB,L0=null,mB=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gB)return;let i=n?.token;L0!==i&&(L0=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Hy(t=Js()){let e=Wa(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Ly(t,{popupRedirectResolver:gA,persistence:[fA,cA,zy]}),r=zm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=mB(s.toString());qy(n,o,()=>o(n.currentUser)),$y(n,a=>o(a))}}let i=$m("auth");return i&&Vy(n,`http://${i}`),n}function yB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Qj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Ni("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",yB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fB("Browser");var mA="auth",Oi=class{constructor(e){return e}},rc=class{constructor(){return Ka(mA)}};var Gy=new q("angularfire2.auth-instances");function c$(t,e){let n=cd(mA,t,e);return n&&new Oi(n)}function u$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Oi(r)}}var l$={provide:rc,deps:[[new ct,Gy]]},d$={provide:Oi,useFactory:c$,deps:[[new ct,Gy],sr]},h$=(()=>{class t{constructor(){He("angularfire",Si.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Bt({type:t});static \u0275inj=jt({providers:[d$,l$]})}return t})();function JK(t,...e){return{ngModule:h$,providers:[{provide:Gy,useFactory:u$(t),multi:!0,deps:[pe,Ct,eo,Ri,[new ct,Xs],...e]}]}}var yA=Ge(jy,!0);var ZK=Ge(Hy,!0);var vA=Ge(By,!0);var _A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IA={};var Qr,Wy;(function(){var t;function e(T,y){function I(){}I.prototype=y.prototype,T.D=y.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(E,D,C){for(var w=Array(arguments.length-2),Vn=2;Vn<arguments.length;Vn++)w[Vn-2]=arguments[Vn];return y.prototype[D].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,y,I){I||(I=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(D=0;16>D;++D)E[D]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=T.g[0],I=T.g[1],D=T.g[2];var C=T.g[3],w=y+(C^I&(D^C))+E[0]+3614090360&4294967295;y=I+(w<<7&4294967295|w>>>25),w=C+(D^y&(I^D))+E[1]+3905402710&4294967295,C=y+(w<<12&4294967295|w>>>20),w=D+(I^C&(y^I))+E[2]+606105819&4294967295,D=C+(w<<17&4294967295|w>>>15),w=I+(y^D&(C^y))+E[3]+3250441966&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(C^I&(D^C))+E[4]+4118548399&4294967295,y=I+(w<<7&4294967295|w>>>25),w=C+(D^y&(I^D))+E[5]+1200080426&4294967295,C=y+(w<<12&4294967295|w>>>20),w=D+(I^C&(y^I))+E[6]+2821735955&4294967295,D=C+(w<<17&4294967295|w>>>15),w=I+(y^D&(C^y))+E[7]+4249261313&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(C^I&(D^C))+E[8]+1770035416&4294967295,y=I+(w<<7&4294967295|w>>>25),w=C+(D^y&(I^D))+E[9]+2336552879&4294967295,C=y+(w<<12&4294967295|w>>>20),w=D+(I^C&(y^I))+E[10]+4294925233&4294967295,D=C+(w<<17&4294967295|w>>>15),w=I+(y^D&(C^y))+E[11]+2304563134&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(C^I&(D^C))+E[12]+1804603682&4294967295,y=I+(w<<7&4294967295|w>>>25),w=C+(D^y&(I^D))+E[13]+4254626195&4294967295,C=y+(w<<12&4294967295|w>>>20),w=D+(I^C&(y^I))+E[14]+2792965006&4294967295,D=C+(w<<17&4294967295|w>>>15),w=I+(y^D&(C^y))+E[15]+1236535329&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(D^C&(I^D))+E[1]+4129170786&4294967295,y=I+(w<<5&4294967295|w>>>27),w=C+(I^D&(y^I))+E[6]+3225465664&4294967295,C=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(C^y))+E[11]+643717713&4294967295,D=C+(w<<14&4294967295|w>>>18),w=I+(C^y&(D^C))+E[0]+3921069994&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(D^C&(I^D))+E[5]+3593408605&4294967295,y=I+(w<<5&4294967295|w>>>27),w=C+(I^D&(y^I))+E[10]+38016083&4294967295,C=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(C^y))+E[15]+3634488961&4294967295,D=C+(w<<14&4294967295|w>>>18),w=I+(C^y&(D^C))+E[4]+3889429448&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(D^C&(I^D))+E[9]+568446438&4294967295,y=I+(w<<5&4294967295|w>>>27),w=C+(I^D&(y^I))+E[14]+3275163606&4294967295,C=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(C^y))+E[3]+4107603335&4294967295,D=C+(w<<14&4294967295|w>>>18),w=I+(C^y&(D^C))+E[8]+1163531501&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(D^C&(I^D))+E[13]+2850285829&4294967295,y=I+(w<<5&4294967295|w>>>27),w=C+(I^D&(y^I))+E[2]+4243563512&4294967295,C=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(C^y))+E[7]+1735328473&4294967295,D=C+(w<<14&4294967295|w>>>18),w=I+(C^y&(D^C))+E[12]+2368359562&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(I^D^C)+E[5]+4294588738&4294967295,y=I+(w<<4&4294967295|w>>>28),w=C+(y^I^D)+E[8]+2272392833&4294967295,C=y+(w<<11&4294967295|w>>>21),w=D+(C^y^I)+E[11]+1839030562&4294967295,D=C+(w<<16&4294967295|w>>>16),w=I+(D^C^y)+E[14]+4259657740&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(I^D^C)+E[1]+2763975236&4294967295,y=I+(w<<4&4294967295|w>>>28),w=C+(y^I^D)+E[4]+1272893353&4294967295,C=y+(w<<11&4294967295|w>>>21),w=D+(C^y^I)+E[7]+4139469664&4294967295,D=C+(w<<16&4294967295|w>>>16),w=I+(D^C^y)+E[10]+3200236656&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(I^D^C)+E[13]+681279174&4294967295,y=I+(w<<4&4294967295|w>>>28),w=C+(y^I^D)+E[0]+3936430074&4294967295,C=y+(w<<11&4294967295|w>>>21),w=D+(C^y^I)+E[3]+3572445317&4294967295,D=C+(w<<16&4294967295|w>>>16),w=I+(D^C^y)+E[6]+76029189&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(I^D^C)+E[9]+3654602809&4294967295,y=I+(w<<4&4294967295|w>>>28),w=C+(y^I^D)+E[12]+3873151461&4294967295,C=y+(w<<11&4294967295|w>>>21),w=D+(C^y^I)+E[15]+530742520&4294967295,D=C+(w<<16&4294967295|w>>>16),w=I+(D^C^y)+E[2]+3299628645&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(D^(I|~C))+E[0]+4096336452&4294967295,y=I+(w<<6&4294967295|w>>>26),w=C+(I^(y|~D))+E[7]+1126891415&4294967295,C=y+(w<<10&4294967295|w>>>22),w=D+(y^(C|~I))+E[14]+2878612391&4294967295,D=C+(w<<15&4294967295|w>>>17),w=I+(C^(D|~y))+E[5]+4237533241&4294967295,I=D+(w<<21&4294967295|w>>>11),w=y+(D^(I|~C))+E[12]+1700485571&4294967295,y=I+(w<<6&4294967295|w>>>26),w=C+(I^(y|~D))+E[3]+2399980690&4294967295,C=y+(w<<10&4294967295|w>>>22),w=D+(y^(C|~I))+E[10]+4293915773&4294967295,D=C+(w<<15&4294967295|w>>>17),w=I+(C^(D|~y))+E[1]+2240044497&4294967295,I=D+(w<<21&4294967295|w>>>11),w=y+(D^(I|~C))+E[8]+1873313359&4294967295,y=I+(w<<6&4294967295|w>>>26),w=C+(I^(y|~D))+E[15]+4264355552&4294967295,C=y+(w<<10&4294967295|w>>>22),w=D+(y^(C|~I))+E[6]+2734768916&4294967295,D=C+(w<<15&4294967295|w>>>17),w=I+(C^(D|~y))+E[13]+1309151649&4294967295,I=D+(w<<21&4294967295|w>>>11),w=y+(D^(I|~C))+E[4]+4149444226&4294967295,y=I+(w<<6&4294967295|w>>>26),w=C+(I^(y|~D))+E[11]+3174756917&4294967295,C=y+(w<<10&4294967295|w>>>22),w=D+(y^(C|~I))+E[2]+718787259&4294967295,D=C+(w<<15&4294967295|w>>>17),w=I+(C^(D|~y))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var I=y-this.blockSize,E=this.B,D=this.h,C=0;C<y;){if(D==0)for(;C<=I;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<y;)if(E[D++]=T.charCodeAt(C++),D==this.blockSize){i(this,E),D=0;break}}else for(;C<y;)if(E[D++]=T[C++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var I=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=I&255,I/=256;for(this.u(T),T=Array(16),y=I=0;4>y;++y)for(var E=0;32>E;E+=8)T[I++]=this.g[y]>>>E&255;return T};function s(T,y){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=y(T)}function o(T,y){this.h=y;for(var I=[],E=!0,D=T.length-1;0<=D;D--){var C=T[D]|0;E&&C==y||(I[D]=C,E=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?s(T,function(y){return new o([y|0],0>y?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var y=[],I=1,E=0;T>=I;E++)y[E]=T/I|0,I*=4294967296;return new o(y,0)}function h(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return R(h(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(y,8)),E=p,D=0;D<T.length;D+=8){var C=Math.min(8,T.length-D),w=parseInt(T.substring(D,D+C),y);8>C?(C=l(Math.pow(y,C)),E=E.j(C).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var T=0,y=1,I=0;I<this.g.length;I++){var E=this.i(I);T+=(0<=E?E:4294967296+E)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var y=l(Math.pow(T,6)),I=this,E="";;){var D=K(I,y).g;I=M(I,D.j(y));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=D,A(I))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=M(this,T),N(T)?-1:A(T)?0:1};function R(T){for(var y=T.g.length,I=[],E=0;E<y;E++)I[E]=~T.g[E];return new o(I,~T.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],E=0,D=0;D<=y;D++){var C=E+(this.i(D)&65535)+(T.i(D)&65535),w=(C>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);E=w>>>16,C&=65535,w&=65535,I[D]=w<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function M(T,y){return T.add(R(y))}t.j=function(T){if(A(this)||A(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(v)&&0>T.l(v))return l(this.m()*T.m());for(var y=this.g.length+T.g.length,I=[],E=0;E<2*y;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<T.g.length;D++){var C=this.i(E)>>>16,w=this.i(E)&65535,Vn=T.i(D)>>>16,Co=T.i(D)&65535;I[2*E+2*D]+=w*Co,B(I,2*E+2*D),I[2*E+2*D+1]+=C*Co,B(I,2*E+2*D+1),I[2*E+2*D+1]+=w*Vn,B(I,2*E+2*D+1),I[2*E+2*D+2]+=C*Vn,B(I,2*E+2*D+2)}for(E=0;E<y;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=y;E<2*y;E++)I[E]=0;return new o(I,0)};function B(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function z(T,y){this.g=T,this.h=y}function K(T,y){if(A(y))throw Error("division by zero");if(A(T))return new z(p,p);if(N(T))return y=K(R(T),y),new z(R(y.g),R(y.h));if(N(y))return y=K(T,R(y)),new z(R(y.g),y.h);if(30<T.g.length){if(N(T)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,E=y;0>=E.l(T);)I=Ce(I),E=Ce(E);var D=ee(I,1),C=ee(E,1);for(E=ee(E,2),I=ee(I,2);!A(E);){var w=C.add(E);0>=w.l(T)&&(D=D.add(I),C=w),E=ee(E,1),I=ee(I,1)}return y=M(T,D.j(y)),new z(D,y)}for(D=p;0<=T.l(y);){for(I=Math.max(1,Math.floor(T.m()/y.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=l(I),w=C.j(y);N(w)||0<w.l(T);)I-=E,C=l(I),w=C.j(y);A(C)&&(C=m),D=D.add(C),T=M(T,w)}return new z(D,T)}t.A=function(T){return K(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],E=0;E<y;E++)I[E]=this.i(E)&T.i(E);return new o(I,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],E=0;E<y;E++)I[E]=this.i(E)|T.i(E);return new o(I,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],E=0;E<y;E++)I[E]=this.i(E)^T.i(E);return new o(I,this.h^T.h)};function Ce(T){for(var y=T.g.length+1,I=[],E=0;E<y;E++)I[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(I,T.h)}function ee(T,y){var I=y>>5;y%=32;for(var E=T.g.length-I,D=[],C=0;C<E;C++)D[C]=0<y?T.i(C+I)>>>y|T.i(C+I+1)<<32-y:T.i(C+I);return new o(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Wy=IA.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Qr=IA.Integer=o}).apply(typeof _A<"u"?_A:typeof self<"u"?self:typeof window<"u"?window:{});var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ur={};var Ky,p$,ro,Qy,ic,Rd,Yy,Jy,Zy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sd=="object"&&Sd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,S){for(var O=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)O[Ee-2]=arguments[Ee];return d.prototype[b].apply(g,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,S=g.length||0;c.length=b+S;for(let O=0;O<S;O++)c[b+O]=g[O]}else c.push(g)}}class M{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function K(c){return K[" "](c),c}K[" "]=function(){};var Ce=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ee(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let S=0;S<I.length;S++)f=I[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Dh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Vn{constructor(){this.h=this.g=null}add(d,f){let g=Co.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Co=new M(()=>new SR,c=>c.reset());class SR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ao,So=!1,Dh=new Vn,aI=()=>{let c=a.Promise.resolve(void 0);Ao=()=>{c.then(RR)}};var RR=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){C(f)}var d=Co;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}So=!1};function fr(){this.s=this.s,this.C=this.C}fr.prototype.s=!1,fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var NR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ro(c,d){if(it.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ce){e:{try{K(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:xR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ro.aa.h.call(this)}}A(Ro,it);var xR={2:"touch",3:"pen",4:"mouse"};Ro.prototype.h=function(){Ro.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var No="closure_listenable_"+(1e6*Math.random()|0),MR=0;function PR(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++MR,this.da=this.fa=!1}function Rc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Nc(c){this.src=c,this.g={},this.h=0}Nc.prototype.add=function(c,d,f,g,b){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var O=Ch(c,d,g,b);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new PR(d,this.src,S,!!g,b),d.fa=f,c.push(d)),d};function bh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=b)&&Array.prototype.splice.call(g,b,1),S&&(Rc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ch(c,d,f,g){for(var b=0;b<c.length;++b){var S=c[b];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return b}return-1}var Ah="closure_lm_"+(1e6*Math.random()|0),Sh={};function cI(c,d,f,g,b){if(g&&g.once)return lI(c,d,f,g,b);if(Array.isArray(d)){for(var S=0;S<d.length;S++)cI(c,d[S],f,g,b);return null}return f=Mh(f),c&&c[No]?c.K(d,f,l(g)?!!g.capture:!!g,b):uI(c,d,f,!1,g,b)}function uI(c,d,f,g,b,S){if(!d)throw Error("Invalid event type");var O=l(b)?!!b.capture:!!b,Ee=Nh(c);if(Ee||(c[Ah]=Ee=new Nc(c)),f=Ee.add(d,f,g,O,S),f.proxy)return f;if(g=OR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)NR||(b=O),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(hI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function OR(){function c(f){return d.call(c.src,c.listener,f)}let d=kR;return c}function lI(c,d,f,g,b){if(Array.isArray(d)){for(var S=0;S<d.length;S++)lI(c,d[S],f,g,b);return null}return f=Mh(f),c&&c[No]?c.L(d,f,l(g)?!!g.capture:!!g,b):uI(c,d,f,!0,g,b)}function dI(c,d,f,g,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)dI(c,d[S],f,g,b);else g=l(g)?!!g.capture:!!g,f=Mh(f),c&&c[No]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=Ch(S,f,g,b),-1<f&&(Rc(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=Nh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ch(d,f,g,b)),(f=-1<c?d[c]:null)&&Rh(f))}function Rh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[No])bh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(hI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Nh(d))?(bh(f,c),f.h==0&&(f.src=null,d[Ah]=null)):Rc(c)}}}function hI(c){return c in Sh?Sh[c]:Sh[c]="on"+c}function kR(c,d){if(c.da)c=!0;else{d=new Ro(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Rh(c),c=f.call(g,d)}return c}function Nh(c){return c=c[Ah],c instanceof Nc?c:null}var xh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mh(c){return typeof c=="function"?c:(c[xh]||(c[xh]=function(d){return c.handleEvent(d)}),c[xh])}function st(){fr.call(this),this.i=new Nc(this),this.M=this,this.F=null}A(st,fr),st.prototype[No]=!0,st.prototype.removeEventListener=function(c,d,f,g){dI(this,c,d,f,g)};function ht(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new it(d,c);else if(d instanceof it)d.target=d.target||c;else{var b=d;d=new it(g,c),E(d,b)}if(b=!0,f)for(var S=f.length-1;0<=S;S--){var O=d.g=f[S];b=xc(O,g,!0,d)&&b}if(O=d.g=c,b=xc(O,g,!0,d)&&b,b=xc(O,g,!1,d)&&b,f)for(S=0;S<f.length;S++)O=d.g=f[S],b=xc(O,g,!1,d)&&b}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Rc(f[g]);delete c.g[d],c.h--}}this.F=null},st.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},st.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function xc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,S=0;S<d.length;++S){var O=d[S];if(O&&!O.da&&O.capture==f){var Ee=O.listener,Ze=O.ha||O.src;O.fa&&bh(c.i,O),b=Ee.call(Ze,g)!==!1&&b}}return b&&!g.defaultPrevented}function fI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function pI(c){c.g=fI(()=>{c.g=null,c.i&&(c.i=!1,pI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class FR extends fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:pI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xo(c){fr.call(this),this.h=c,this.g={}}A(xo,fr);var gI=[];function mI(c){ee(c.g,function(d,f){this.g.hasOwnProperty(f)&&Rh(d)},c),c.g={}}xo.prototype.N=function(){xo.aa.N.call(this),mI(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ph=a.JSON.stringify,LR=a.JSON.parse,VR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Oh(){}Oh.prototype.h=null;function yI(c){return c.h||(c.h=c.i())}function vI(){}var Mo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kh(){it.call(this,"d")}A(kh,it);function Fh(){it.call(this,"c")}A(Fh,it);var ei={},_I=null;function Mc(){return _I=_I||new st}ei.La="serverreachability";function II(c){it.call(this,ei.La,c)}A(II,it);function Po(c){let d=Mc();ht(d,new II(d))}ei.STAT_EVENT="statevent";function wI(c,d){it.call(this,ei.STAT_EVENT,c),this.stat=d}A(wI,it);function ft(c){let d=Mc();ht(d,new wI(d,c))}ei.Ma="timingevent";function EI(c,d){it.call(this,ei.Ma,c),this.size=d}A(EI,it);function Oo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ko(){this.g=!0}ko.prototype.xa=function(){this.g=!1};function UR(c,d,f,g,b,S){c.info(function(){if(c.g)if(S)for(var O="",Ee=S.split("&"),Ze=0;Ze<Ee.length;Ze++){var fe=Ee[Ze].split("=");if(1<fe.length){var ot=fe[0];fe=fe[1];var at=ot.split("_");O=2<=at.length&&at[1]=="type"?O+(ot+"="+fe+"&"):O+(ot+"=redacted&")}}else O=null;else O=S;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+O})}function jR(c,d,f,g,b,S,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+S+" "+O})}function Yi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+$R(c,f)+(g?" "+g:"")})}function BR(c,d){c.info(function(){return"TIMEOUT: "+d})}ko.prototype.info=function(){};function $R(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var O=1;O<b.length;O++)b[O]=""}}}}return Ph(f)}catch{return d}}var Pc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},TI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lh;function Oc(){}A(Oc,Oh),Oc.prototype.g=function(){return new XMLHttpRequest},Oc.prototype.i=function(){return{}},Lh=new Oc;function pr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new DI}function DI(){this.i=null,this.g="",this.h=!1}var bI={},Vh={};function Uh(c,d,f){c.L=1,c.v=Vc(Un(d)),c.m=f,c.P=!0,CI(c,null)}function CI(c,d){c.F=Date.now(),kc(c),c.A=Un(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),jI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new DI,c.g=iw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new FR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(gI[0]=b.toString()),b=gI);for(var S=0;S<b.length;S++){var O=cI(f,b[S],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Po(),UR(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;let d=this.M;d&&jn(c)==3?d.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{let at=jn(this.g);var d=this.g.Ba();let Xi=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||WI(this.g)))){this.J||at!=4||d==7||(d==8||0>=Xi?Po(3):Po(2)),jh(this);var f=this.g.Z();this.X=f;t:if(AI(this)){var g=WI(this.g);c="";var b=g.length,S=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ti(this),Fo(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,jR(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Ze=this.g;if((Ee=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Ee)){var fe=Ee;break t}}fe=null}if(f=fe)Yi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bh(this,f);else{this.o=!1,this.s=3,ft(12),ti(this),Fo(this);break e}}if(this.P){f=!0;let Xt;for(;!this.J&&this.C<O.length;)if(Xt=qR(this,O),Xt==Vh){at==4&&(this.s=4,ft(14),f=!1),Yi(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==bI){this.s=4,ft(15),Yi(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Yi(this.i,this.l,Xt,null),Bh(this,Xt);if(AI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||O.length!=0||this.h.h||(this.s=1,ft(16),f=!1),this.o=this.o&&f,!f)Yi(this.i,this.l,O,"[Invalid Chunked Response]"),ti(this),Fo(this);else if(0<O.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Wh(ot),ot.M=!0,ft(11))}}else Yi(this.i,this.l,O,null),Bh(this,O);at==4&&ti(this),this.o&&!this.J&&(at==4?ew(this.j,this):(this.o=!1,kc(this)))}else oN(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),ti(this),Fo(this)}}}catch{}finally{}};function AI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Vh:(f=Number(d.substring(f,g)),isNaN(f)?bI:(g+=1,g+f>d.length?Vh:(d=d.slice(g,g+f),c.C=g+f,d)))}pr.prototype.cancel=function(){this.J=!0,ti(this)};function kc(c){c.S=Date.now()+c.I,SI(c,c.I)}function SI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Oo(m(c.ba,c),d)}function jh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(BR(this.i,this.A),this.L!=2&&(Po(),ft(17)),ti(this),this.s=2,Fo(this)):SI(this,this.S-c)};function Fo(c){c.j.G==0||c.J||ew(c.j,c)}function ti(c){jh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,mI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Bh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||$h(f.h,c))){if(!c.K&&$h(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)qc(f),Bc(f);else break e;Gh(f),ft(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Oo(m(f.Za,f),6e3));if(1>=xI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ri(f,11)}else if((c.K||f.g==c)&&qc(f),!B(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let fe=b[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let ot=fe[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));let at=fe[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));let Xi=fe[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(g=1.5*Xi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Xt=c.g;if(Xt){let Hc=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hc){var S=g.h;S.g||Hc.indexOf("spdy")==-1&&Hc.indexOf("quic")==-1&&Hc.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(qh(S,S.h),S.h=null))}if(g.D){let Kh=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Kh&&(g.ya=Kh,Re(g.I,g.D,Kh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=rw(g,g.J?g.ia:null,g.W),O.K){MI(g.h,O);var Ee=O,Ze=g.L;Ze&&(Ee.I=Ze),Ee.B&&(jh(Ee),kc(Ee)),g.g=O}else ZI(g);0<f.i.length&&$c(f)}else fe[0]!="stop"&&fe[0]!="close"||ri(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?ri(f,7):Hh(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}Po(4)}catch{}}var zR=class{constructor(c,d){this.g=c,this.map=d}};function RI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function NI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function xI(c){return c.h?1:c.g?c.g.size:0}function $h(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function qh(c,d){c.g?c.g.add(d):c.h=d}function MI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}RI.prototype.cancel=function(){if(this.i=PI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function PI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function HR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function GR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function OI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=GR(c),g=HR(c),b=g.length,S=0;S<b;S++)d.call(void 0,g[S],f&&f[S],c)}var kI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var S=c[f].substring(0,g);b=c[f].substring(g+1)}else S=c[f];d(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ni(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ni){this.h=c.h,Fc(this,c.j),this.o=c.o,this.g=c.g,Lc(this,c.s),this.l=c.l;var d=c.i,f=new Uo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),FI(this,f),this.m=c.m}else c&&(d=String(c).match(kI))?(this.h=!1,Fc(this,d[1]||"",!0),this.o=Lo(d[2]||""),this.g=Lo(d[3]||"",!0),Lc(this,d[4]),this.l=Lo(d[5]||"",!0),FI(this,d[6]||"",!0),this.m=Lo(d[7]||"")):(this.h=!1,this.i=new Uo(null,this.h))}ni.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Vo(d,LI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Vo(d,LI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Vo(f,f.charAt(0)=="/"?YR:QR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Vo(f,ZR)),c.join("")};function Un(c){return new ni(c)}function Fc(c,d,f){c.j=f?Lo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Lc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function FI(c,d,f){d instanceof Uo?(c.i=d,XR(c.i,c.h)):(f||(d=Vo(d,JR)),c.i=new Uo(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function Vc(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Lo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Vo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,KR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function KR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var LI=/[#\/\?@]/g,QR=/[#\?:]/g,YR=/[#\?]/g,JR=/[#\?@]/g,ZR=/#/g;function Uo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function gr(c){c.g||(c.g=new Map,c.h=0,c.i&&WR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Uo.prototype,t.add=function(c,d){gr(this),this.i=null,c=Ji(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function VI(c,d){gr(c),d=Ji(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function UI(c,d){return gr(c),d=Ji(c,d),c.g.has(d)}t.forEach=function(c,d){gr(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){gr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let S=0;S<b.length;S++)f.push(d[g])}return f},t.V=function(c){gr(this);let d=[];if(typeof c=="string")UI(this,c)&&(d=d.concat(this.g.get(Ji(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return gr(this),this.i=null,c=Ji(this,c),UI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function jI(c,d,f){VI(c,d),0<f.length&&(c.i=null,c.g.set(Ji(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var b=S;O[g]!==""&&(b+="="+encodeURIComponent(String(O[g]))),c.push(b)}}return this.i=c.join("&")};function Ji(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function XR(c,d){d&&!c.j&&(gr(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(VI(this,g),jI(this,b,f))},c)),c.j=d}function eN(c,d){let f=new ko;if(a.Image){let g=new Image;g.onload=v(mr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(mr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(mr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(mr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function tN(c,d){let f=new ko,g=new AbortController,b=setTimeout(()=>{g.abort(),mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(b),S.ok?mr(f,"TestPingServer: ok",!0,d):mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),mr(f,"TestPingServer: error",!1,d)})}function mr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function nN(){this.g=new VR}function rN(c,d,f){let g=f||"";try{OI(c,function(b,S){let O=b;l(b)&&(O=Ph(b)),d.push(g+S+"="+encodeURIComponent(O))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function jo(c){this.l=c.Ub||null,this.j=c.eb||!1}A(jo,Oh),jo.prototype.g=function(){return new Uc(this.l,this.j)},jo.prototype.i=function(c){return function(){return c}}({});function Uc(c,d){st.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Uc,st),t=Uc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,$o(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;BI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function BI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Bo(this):$o(this),this.readyState==3&&BI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Bo(this))},t.Qa=function(c){this.g&&(this.response=c,Bo(this))},t.ga=function(){this.g&&Bo(this)};function Bo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,$o(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function $o(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $I(c){let d="";return ee(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function zh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=$I(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function Pe(c){st.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Pe,st);var iN=/^https?$/i,sN=["POST","PUT"];t=Pe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lh.g(),this.v=this.o?yI(this.o):yI(Lh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){qI(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sN,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,O]of f)this.g.setRequestHeader(S,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{GI(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){qI(this,S)}};function qI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,zI(c),jc(c)}function zI(c){c.A||(c.A=!0,ht(c,"complete"),ht(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ht(this,"complete"),ht(this,"abort"),jc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jc(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?HI(this):this.bb())},t.bb=function(){HI(this)};function HI(c){if(c.h&&typeof o<"u"&&(!c.v[1]||jn(c)!=4||c.Z()!=2)){if(c.u&&jn(c)==4)fI(c.Ea,0,c);else if(ht(c,"readystatechange"),jn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var b=String(c.D).match(kI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!iN.test(b?b.toLowerCase():"")}f=g}if(f)ht(c,"complete"),ht(c,"success");else{c.m=6;try{var S=2<jn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",zI(c)}}finally{jc(c)}}}}function jc(c,d){if(c.g){GI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ht(c,"ready");try{f.onreadystatechange=g}catch{}}}function GI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function jn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),LR(d)}};function WI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function oN(c){let d={};c=(c.g&&2<=jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(B(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[b]||[];d[b]=S,S.push(f)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function KI(c){this.Aa=0,this.i=[],this.j=new ko,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qo("baseRetryDelayMs",5e3,c),this.cb=qo("retryDelaySeedMs",1e4,c),this.Wa=qo("forwardChannelMaxRetries",2,c),this.wa=qo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new RI(c&&c.concurrentRequestLimit),this.Da=new nN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=KI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){ft(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=rw(this,null,this.W),$c(this)};function Hh(c){if(QI(c),c.G==3){var d=c.U++,f=Un(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),zo(c,f),d=new pr(c,c.j,d),d.L=2,d.v=Vc(Un(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=iw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),kc(d)}nw(c)}function Bc(c){c.g&&(Wh(c),c.g.cancel(),c.g=null)}function QI(c){Bc(c),c.u&&(a.clearTimeout(c.u),c.u=null),qc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function $c(c){if(!NI(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ao||aI(),So||(Ao(),So=!0),Dh.add(d,c),c.B=0}}function aN(c,d){return xI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Oo(m(c.Ga,c,d),tw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new pr(this,this.j,c),S=this.o;if(this.S&&(S?(S=y(S),E(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=JI(this,b,d),f=Un(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),zo(this,f),S&&(this.O?d="headers="+encodeURIComponent(String($I(S)))+"&"+d:this.m&&zh(f,this.m,S)),qh(this.h,b),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),b.T=!0,Uh(b,f,null)):Uh(b,f,d),this.G=2}}else this.G==3&&(c?YI(this,c):this.i.length==0||NI(this.h)||YI(this))};function YI(c,d){var f;d?f=d.l:f=c.U++;let g=Un(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),zo(c,g),c.m&&c.o&&zh(g,c.m,c.o),f=new pr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=JI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),qh(c.h,f),Uh(f,g,d)}function zo(c,d){c.H&&ee(c.H,function(f,g){Re(d,g,f)}),c.l&&OI({},function(f,g){Re(d,g,f)})}function JI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let S=-1;for(;;){let O=["count="+f];S==-1?0<f?(S=b[0].g,O.push("ofs="+S)):S=0:O.push("ofs="+S);let Ee=!0;for(let Ze=0;Ze<f;Ze++){let fe=b[Ze].g,ot=b[Ze].map;if(fe-=S,0>fe)S=Math.max(0,b[Ze].g-100),Ee=!1;else try{rN(ot,O,"req"+fe+"_")}catch{g&&g(ot)}}if(Ee){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function ZI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ao||aI(),So||(Ao(),So=!0),Dh.add(d,c),c.v=0}}function Gh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Oo(m(c.Fa,c),tw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,XI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Oo(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Bc(this),XI(this))};function Wh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function XI(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Un(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),zo(c,d),c.m&&c.o&&zh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Vc(Un(d)),f.m=null,f.P=!0,CI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Bc(this),Gh(this),ft(19))};function qc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function ew(c,d){var f=null;if(c.g==d){qc(c),Wh(c),c.g=null;var g=2}else if($h(c.h,d))f=d.D,MI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Mc(),ht(g,new EI(g,f)),$c(c)}else ZI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&aN(c,d)||g==2&&Gh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:ri(c,5);break;case 4:ri(c,10);break;case 3:ri(c,6);break;default:ri(c,2)}}}function tw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ri(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new ni(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fc(g,"https"),Vc(g),b?eN(g.toString(),f):tN(g.toString(),f)}else ft(2);c.G=0,c.l&&c.l.sa(d),nw(c),QI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function nw(c){if(c.G=0,c.ka=[],c.l){let d=PI(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function rw(c,d,f){var g=f instanceof ni?Un(f):new ni(f);if(g.g!="")d&&(g.g=d+"."+g.g),Lc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var S=new ni(null);g&&Fc(S,g),d&&(S.g=d),b&&Lc(S,b),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),zo(c,g),g}function iw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Pe(new jo({eb:f})):new Pe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sw(){}t=sw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zc(){}zc.prototype.g=function(c,d){return new At(c,d)};function At(c,d){st.call(this),this.g=new KI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!B(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Zi(this)}A(At,st),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Hh(this.g)},At.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Ph(c),c=f);d.i.push(new zR(d.Ya++,c)),d.G==3&&$c(d)},At.prototype.N=function(){this.g.l=null,delete this.j,Hh(this.g),delete this.g,At.aa.N.call(this)};function ow(c){kh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A(ow,kh);function aw(){Fh.call(this),this.status=1}A(aw,Fh);function Zi(c){this.g=c}A(Zi,sw),Zi.prototype.ua=function(){ht(this.g,"a")},Zi.prototype.ta=function(c){ht(this.g,new ow(c))},Zi.prototype.sa=function(c){ht(this.g,new aw)},Zi.prototype.ra=function(){ht(this.g,"b")},zc.prototype.createWebChannel=zc.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,Zy=ur.createWebChannelTransport=function(){return new zc},Jy=ur.getStatEventTarget=function(){return Mc()},Yy=ur.Event=ei,Rd=ur.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pc.NO_ERROR=0,Pc.TIMEOUT=8,Pc.HTTP_ERROR=6,ic=ur.ErrorCode=Pc,TI.COMPLETE="complete",Qy=ur.EventType=TI,vI.EventType=Mo,Mo.OPEN="a",Mo.CLOSE="b",Mo.ERROR="c",Mo.MESSAGE="d",st.prototype.listen=st.prototype.K,ro=ur.WebChannel=vI,p$=ur.FetchXmlHttpFactory=jo,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,Ky=ur.XhrIo=Pe}).apply(typeof Sd<"u"?Sd:typeof self<"u"?self:typeof window<"u"?window:{});var wA="@firebase/firestore";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var Do="10.14.0";var Vi=new Br("@firebase/firestore");function sc(){return Vi.logLevel}function V(t,...e){if(Vi.logLevel<=le.DEBUG){let n=e.map(L_);Vi.debug(`Firestore (${Do}): ${t}`,...n)}}function lr(t,...e){if(Vi.logLevel<=le.ERROR){let n=e.map(L_);Vi.error(`Firestore (${Do}): ${t}`,...n)}}function lo(t,...e){if(Vi.logLevel<=le.WARN){let n=e.map(L_);Vi.warn(`Firestore (${Do}): ${t}`,...n)}}function L_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function J(t="Unexpected state"){let e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+t;throw lr(e),new Error(e)}function we(t,e){t||J()}function X(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Od=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},iv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}},sv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},ov=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new Od(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new Je(e)}},av=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},cv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new av(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new uv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function g$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var kd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=g$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(t,e){return t<e?-1:t>e?1:0}function ho(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var rt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new rt(0,0))}static max(){return new t(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Fd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Me=class t extends Fd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},m$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lt=class t extends Fd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return m$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new F(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new F(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Me.fromString(e))}static fromName(e){return new t(Me.fromString(e).popFirst(5))}static empty(){return new t(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Me(e.slice()))}};var dv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};dv.UNKNOWN_ID=-1;function y$(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new Ui(i,H.empty(),e)}function v$(t){return new Ui(t.readTime,t.key,-1)}var Ui=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ie.min(),H.empty(),-1)}static max(){return new t(ie.max(),H.empty(),-1)}};function _$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}var I$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Dc(t){return _(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==I$)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function w$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bc(t){return t.name==="IndexedDbTransactionError"}var nS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function fh(t){return t==null}function dc(t){return t===0&&1/t==-1/0}function E$(t){return typeof t=="number"&&Number.isInteger(t)&&!dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var T$=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],d7=[...T$,"documentOverlays"],D$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],b$=D$,C$=[...b$,"indexConfiguration","indexState","indexEntries"];var h7=[...C$,"globals"];function EA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ke=class t{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ao(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ao(this.root,e,this.comparator,!1)}getReverseIterator(){return new ao(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ao(this.root,e,this.comparator,!0)}},ao=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var lt=class t{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ld(this.data.getIterator())}getIteratorFrom(e){return new Ld(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ld=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Yt=class t{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new t([])}unionWith(e){let n=new lt(Lt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Vd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dt.EMPTY_BYTE_STRING=new dt("");var A$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(t){if(we(!!t),typeof t=="string"){let e=0,n=A$.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(t.seconds),nanos:xe(t.nanos)}}function xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jr(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}function V_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function U_(t){let e=t.mapValue.fields.__previous_value__;return V_(e)?U_(e):e}function hc(t){let e=dr(t.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}var fv=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Ud=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Nd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?V_(t)?4:sS(t)?9007199254740991:iS(t)?10:11:J()}function kn(t,e){if(t===e)return!0;let n=ji(t);if(n!==ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hc(t).isEqual(hc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=dr(i.timestampValue),a=dr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Jr(i.bytesValue).isEqual(Jr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return xe(i.geoPointValue.latitude)===xe(s.geoPointValue.latitude)&&xe(i.geoPointValue.longitude)===xe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xe(i.integerValue)===xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=xe(i.doubleValue),a=xe(s.doubleValue);return o===a?dc(o)===dc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ho(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(EA(o)!==EA(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!kn(o[u],a[u])))return!1;return!0}(t,e);default:return J()}}function fc(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function fo(t,e){if(t===e)return 0;let n=ji(t),r=ji(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=xe(s.integerValue||s.doubleValue),u=xe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return TA(t.timestampValue,e.timestampValue);case 4:return TA(hc(t),hc(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Jr(s),u=Jr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ge(xe(s.latitude),xe(o.latitude));return a!==0?a:ge(xe(s.longitude),xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return DA(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,A=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=ge(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=A?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:DA(v,A)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Nd.mapValue&&o===Nd.mapValue)return 0;if(s===Nd.mapValue)return 1;if(o===Nd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ge(u[p],h[p]);if(m!==0)return m;let v=fo(a[u[p]],l[h[p]]);if(v!==0)return v}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw J()}}function TA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);let n=dr(t),r=dr(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function DA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=fo(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function po(t){return pv(t)}function pv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=pv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${pv(n.fields[o])}`;return i+"}"}(t.mapValue):J()}function bA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gv(t){return!!t&&"integerValue"in t}function j_(t){return!!t&&"arrayValue"in t}function CA(t){return!!t&&"nullValue"in t}function AA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Md(t){return!!t&&"mapValue"in t}function iS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ac(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ac(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ac(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ft=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Md(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(n)}setAll(e){let n=Lt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ac(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Md(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Md(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(ac(this.value))}};function oS(t){let e=[];return Wi(t.fields,(n,r)=>{let i=new Lt([n]);if(Md(r)){let s=oS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Yt(e)}var fn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ie.min(),ie.min(),ie.min(),Ft.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ie.min(),ie.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ie.min(),ie.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var go=class{constructor(e,n){this.position=e,this.inclusive=n}};function SA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=fo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function RA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}var mo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function S$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var jd=class{},ze=class t extends jd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yv(e,n,r):n==="array-contains"?new Iv(e,r):n==="in"?new wv(e,r):n==="not-in"?new Ev(e,r):n==="array-contains-any"?new Tv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vv(e,r):new _v(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fo(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison(fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},pn=class t extends jd{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return aS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function aS(t){return t.op==="and"}function cS(t){return R$(t)&&aS(t)}function R$(t){for(let e of t.filters)if(e instanceof pn)return!1;return!0}function mv(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+po(t.value);if(cS(t))return t.filters.map(e=>mv(e)).join(",");{let e=t.filters.map(n=>mv(n)).join(",");return`${t.op}(${e})`}}function uS(t,e){return t instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&kn(r.value,i.value)}(t,e):t instanceof pn?function(r,i){return i instanceof pn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&uS(o,i.filters[a]),!0):!1}(t,e):void J()}function lS(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${po(n.value)}`}(t):t instanceof pn?function(n){return n.op.toString()+" {"+n.getFilters().map(lS).join(" ,")+"}"}(t):"Filter"}var yv=class extends ze{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},vv=class extends ze{constructor(e,n){super(e,"in",n),this.keys=dS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},_v=class extends ze{constructor(e,n){super(e,"not-in",n),this.keys=dS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function dS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var Iv=class extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return j_(n)&&fc(n.arrayValue,this.value)}},wv=class extends ze{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&fc(this.value.arrayValue,n)}},Ev=class extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!fc(this.value.arrayValue,n)}},Tv=class extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!j_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fc(this.value.arrayValue,r))}};var Dv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function NA(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Dv(t,e,n,r,i,s,o)}function B_(t){let e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>po(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>po(r)).join(",")),e.ue=n}return e.ue}function $_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!S$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!RA(t.startAt,e.startAt)&&RA(t.endAt,e.endAt)}function bv(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Bi=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function N$(t,e,n,r,i,s,o,a){return new Bi(t,e,n,r,i,s,o,a)}function q_(t){return new Bi(t)}function xA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hS(t){return t.collectionGroup!==null}function cc(t){let e=X(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new lt(Lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new mo(s,r))}),n.has(Lt.keyField().canonicalString())||e.ce.push(new mo(Lt.keyField(),r))}return e.ce}function Pn(t){let e=X(t);return e.le||(e.le=x$(e,cc(t))),e.le}function x$(t,e){if(t.limitType==="F")return NA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new mo(i.field,s)});let n=t.endAt?new go(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new go(t.startAt.position,t.startAt.inclusive):null;return NA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cv(t,e){let n=t.filters.concat([e]);return new Bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Av(t,e,n){return new Bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ph(t,e){return $_(Pn(t),Pn(e))&&t.limitType===e.limitType}function fS(t){return`${B_(Pn(t))}|lt:${t.limitType}`}function io(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>lS(i)).join(", ")}]`),fh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>po(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>po(i)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function gh(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of cc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=SA(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,cc(r),i)||r.endAt&&!function(o,a,u){let l=SA(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,cc(r),i))}(t,e)}function M$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pS(t){return(e,n)=>{let r=!1;for(let i of cc(t)){let s=P$(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function P$(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?fo(u,l):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}var Zr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return rS(this.inner)}size(){return this.innerSize}};var O$=new ke(H.comparator);function hr(){return O$}var gS=new ke(H.comparator);function oc(...t){let e=gS;for(let n of t)e=e.insert(n.key,n);return e}function mS(t){let e=gS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ki(){return uc()}function yS(){return uc()}function uc(){return new Zr(t=>t.toString(),(t,e)=>t.isEqual(e))}var k$=new ke(H.comparator),F$=new lt(H.comparator);function de(...t){let e=F$;for(let n of t)e=e.add(n);return e}var L$=new lt(ge);function V$(){return L$}function z_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function vS(t){return{integerValue:""+t}}function U$(t,e){return E$(e)?vS(e):z_(t,e)}var yo=class{constructor(){this._=void 0}};function j$(t,e,n){return t instanceof vo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&V_(s)&&(s=U_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof $i?IS(t,e):t instanceof qi?wS(t,e):function(i,s){let o=_S(i,s),a=MA(o)+MA(i.Pe);return gv(o)&&gv(i.Pe)?vS(a):z_(i.serializer,a)}(t,e)}function B$(t,e,n){return t instanceof $i?IS(t,e):t instanceof qi?wS(t,e):n}function _S(t,e){return t instanceof _o?function(r){return gv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var vo=class extends yo{},$i=class extends yo{constructor(e){super(),this.elements=e}};function IS(t,e){let n=ES(e);for(let r of t.elements)n.some(i=>kn(i,r))||n.push(r);return{arrayValue:{values:n}}}var qi=class extends yo{constructor(e){super(),this.elements=e}};function wS(t,e){let n=ES(e);for(let r of t.elements)n=n.filter(i=>!kn(i,r));return{arrayValue:{values:n}}}var _o=class extends yo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function MA(t){return xe(t.integerValue||t.doubleValue)}function ES(t){return j_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $$(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof $i&&i instanceof $i||r instanceof qi&&i instanceof qi?ho(r.elements,i.elements,kn):r instanceof _o&&i instanceof _o?kn(r.Pe,i.Pe):r instanceof vo&&i instanceof vo}(t.transform,e.transform)}var Sv=class{constructor(e,n){this.version=e,this.transformResults=n}},Jt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Io=class{};function TS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wo(t.key,Jt.none()):new zi(t.key,t.data,Jt.none());{let n=t.data,r=Ft.empty(),i=new lt(Lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Fn(t.key,r,new Yt(i.toArray()),Jt.none())}}function q$(t,e,n){t instanceof zi?function(i,s,o){let a=i.value.clone(),u=OA(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Fn?function(i,s,o){if(!Pd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=OA(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(DS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lc(t,e,n,r){return t instanceof zi?function(s,o,a,u){if(!Pd(s.precondition,o))return a;let l=s.value.clone(),h=kA(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fn?function(s,o,a,u){if(!Pd(s.precondition,o))return a;let l=kA(s.fieldTransforms,u,o),h=o.data;return h.setAll(DS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Pd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function z$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=_S(r.transform,i||null);s!=null&&(n===null&&(n=Ft.empty()),n.set(r.field,s))}return n||null}function PA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ho(r,i,(s,o)=>$$(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var zi=class extends Io{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Fn=class extends Io{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function DS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function OA(t,e,n){let r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,B$(o,a,n[i]))}return r}function kA(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,j$(s,o,e))}return r}var wo=class extends Io{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Rv=class extends Io{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Nv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&q$(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=yS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=TS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(n,r)=>PA(n,r))&&ho(this.baseMutations,e.baseMutations,(n,r)=>PA(n,r))}},xv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return k$}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Mv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Pv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var $e,he;function H$(t){switch(t){default:return J();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function bS(t){if(t===void 0)return lr("GRPC error has no .code"),x.UNKNOWN;switch(t){case $e.OK:return x.OK;case $e.CANCELLED:return x.CANCELLED;case $e.UNKNOWN:return x.UNKNOWN;case $e.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case $e.INTERNAL:return x.INTERNAL;case $e.UNAVAILABLE:return x.UNAVAILABLE;case $e.UNAUTHENTICATED:return x.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case $e.NOT_FOUND:return x.NOT_FOUND;case $e.ALREADY_EXISTS:return x.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return x.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case $e.ABORTED:return x.ABORTED;case $e.OUT_OF_RANGE:return x.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return x.UNIMPLEMENTED;case $e.DATA_LOSS:return x.DATA_LOSS;default:return J()}}(he=$e||($e={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var FA=null;function G$(){return new TextEncoder}var W$=new Qr([4294967295,4294967295],0);function LA(t){let e=G$().encode(t),n=new Wy;return n.update(e),new Uint8Array(n.digest())}function VA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qr([n,r],0),new Qr([i,s],0)]}var Ov=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fi(`Invalid padding: ${n}`);if(r<0)throw new Fi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Qr.fromNumber(r)));return i.compare(W$)===1&&(i=new Qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=LA(e),[r,i]=VA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=LA(e),[r,i]=VA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Fi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Bd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ie.min(),i,new ke(ge),hr(),de())}},pc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var co=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},$d=class{constructor(e,n){this.targetId=e,this.me=n}},qd=class{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},zd=class{constructor(){this.fe=0,this.ge=jA(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new pc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=jA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},kv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=hr(),this.qe=UA(),this.Qe=new ke(ge)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(bv(s))if(r===0){let o=new H(s.path);this.Ue(n,o,fn.newNoDocument(o,ie.min()))}else we(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}FA?.et(function(h,p,m,v,A){var N,R,M,B,z,K;let Ce={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ee=p.unchangedNames;return ee&&(Ce.bloomFilter={applied:A===0,hashCount:(N=ee?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(B=(M=(R=ee?.bits)===null||R===void 0?void 0:R.bitmap)===null||M===void 0?void 0:M.length)!==null&&B!==void 0?B:0,padding:(K=(z=ee?.bits)===null||z===void 0?void 0:z.padding)!==null&&K!==void 0?K:0,mightContain:T=>{var y;return(y=v?.mightContain(T))!==null&&y!==void 0&&y}}),Ce}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Jr(r).toUint8Array()}catch(u){if(u instanceof Vd)return lo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ov(o,i,s)}catch(u){return lo(u instanceof Fi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&bv(a.target)){let u=new H(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,fn.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Bd(e,n,this.Qe,this.ke,r);return this.ke=hr(),this.qe=UA(),this.Qe=new ke(ge),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new zd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function UA(){return new ke(H.comparator)}function jA(){return new ke(H.comparator)}var K$={asc:"ASCENDING",desc:"DESCENDING"},Q$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y$={and:"AND",or:"OR"},Fv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Lv(t,e){return t.useProto3Json||fh(e)?e:{value:e}}function Hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function J$(t,e){return Hd(t,e.toTimestamp())}function On(t){return we(!!t),ie.fromTimestamp(function(n){let r=dr(n);return new rt(r.seconds,r.nanos)}(t))}function H_(t,e){return Vv(t,e).canonicalString()}function Vv(t,e){let n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function AS(t){let e=Me.fromString(t);return we(MS(e)),e}function Uv(t,e){return H_(t.databaseId,e.path)}function Xy(t,e){let n=AS(e);if(n.get(1)!==t.databaseId.projectId)throw new F(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(RS(n))}function SS(t,e){return H_(t.databaseId,e)}function Z$(t){let e=AS(t);return e.length===4?Me.emptyPath():RS(e)}function jv(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RS(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function BA(t,e,n){return{name:Uv(t,e),fields:n.value.mapValue.fields}}function X$(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(we(h===void 0||typeof h=="string"),dt.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?x.UNKNOWN:bS(l.code);return new F(h,l.message||"")}(o);n=new qd(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Xy(t,r.document.name),s=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):ie.min(),a=new Ft({mapValue:{fields:r.document.fields}}),u=fn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new co(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Xy(t,r.document),s=r.readTime?On(r.readTime):ie.min(),o=fn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new co([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Xy(t,r.document),s=r.removedTargetIds||[];n=new co([],s,i,null)}else{if(!("filter"in e))return J();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Pv(i,s),a=r.targetId;n=new $d(a,o)}}return n}function eq(t,e){let n;if(e instanceof zi)n={update:BA(t,e.key,e.value)};else if(e instanceof wo)n={delete:Uv(t,e.key)};else if(e instanceof Fn)n={update:BA(t,e.key,e.data),updateMask:uq(e.fieldMask)};else{if(!(e instanceof Rv))return J();n={verify:Uv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof vo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $i)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _o)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:J$(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function tq(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?On(i.updateTime):On(s);return o.isEqual(ie.min())&&(o=On(s)),new Sv(o,i.transformResults||[])}(n,e))):[]}function nq(t,e){return{documents:[SS(t,e.path)]}}function rq(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SS(t,i);let s=function(l){if(l.length!==0)return xS(pn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:so(m.field),direction:oq(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Lv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function iq(t){let e=Z$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){we(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=NS(p);return m instanceof pn&&cS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(A){return new mo(oo(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,fh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new go(v,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new go(v,m)}(n.endAt)),N$(e,i,o,s,a,"F",u,l)}function sq(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=oo(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=oo(n.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=oo(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=oo(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(oo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pn.create(n.compositeFilter.filters.map(r=>NS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function oq(t){return K$[t]}function aq(t){return Q$[t]}function cq(t){return Y$[t]}function so(t){return{fieldPath:t.canonicalString()}}function oo(t){return Lt.fromServerFormat(t.fieldPath)}function xS(t){return t instanceof ze?function(n){if(n.op==="=="){if(AA(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NAN"}};if(CA(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(AA(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NAN"}};if(CA(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(n.field),op:aq(n.op),value:n.value}}}(t):t instanceof pn?function(n){let r=n.getFilters().map(i=>xS(i));return r.length===1?r[0]:{compositeFilter:{op:cq(n.op),filters:r}}}(t):J()}function uq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var gc=class t{constructor(e,n,r,i,s=ie.min(),o=ie.min(),a=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Bv=class{constructor(e){this.ct=e}};function lq(t){let e=iq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Av(e,e.limit,"L"):e}var Gd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(xe(e.integerValue));else if("doubleValue"in e){let r=xe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),dc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=dr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Jr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?sS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):iS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):J()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(xe(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),H.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Gd.vt=new Gd;var $v=class{constructor(){this.un=new qv}addToCollectionParentIndex(e,n){return this.un.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Ui.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},qv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new lt(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lt(Me.comparator)).toArray()}};var p7=new Uint8Array(0);var Nn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(41943040,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);var mc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var zv=class{constructor(){this.changes=new Zr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Hv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Gv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&lc(r.mutation,i,Yt.empty(),rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=ki();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=oc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hr(),o=uc(),a=function(){return uc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Fn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),lc(h.mutation,l,h.mutation.getFieldMask(),rt.now())):o.set(l.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Hv(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=uc(),i=new ke((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Yt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=yS();h.forEach(m=>{if(!s.has(m)){let v=TS(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):P.resolve(ki()),a=-1,u=s;return o.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:a,changes:mS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=oc();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,u=>{let l=function(p,m){return new Bi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,fn.newInvalidDocument(h)))});let a=oc();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&lc(h.mutation,l,Yt.empty(),rt.now()),gh(n,l)&&(a=a.insert(u,l))}),a})}};var Wv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return P.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:lq(i.bundledQuery),readTime:On(i.readTime)}}(n)),P.resolve()}};var Kv=class{constructor(){this.overlays=new ke(H.comparator),this.Ir=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ki();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=ki(),s=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ke((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=ki(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ki(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Mv(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Qv=class{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var yc=class{constructor(){this.Tr=new lt(qe.Er),this.dr=new lt(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new H(new Me([])),r=new qe(n,e),i=new qe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new H(new Me([])),r=new qe(n,e),i=new qe(n,e+1),s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||H.comparator(e.key,n.key)}};var Yv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(qe.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Nv(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(ge);return n.forEach(i=>{let s=new qe(i,0),o=new qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;H.isDocumentKey(s)||(s=s.child(""));let o=new qe(new H(s),0),a=new lt(ge);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),P.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(n.mutations,i=>{let s=new qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new qe(n,0),i=this.br.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Jv=class{constructor(e){this.Mr=e,this.docs=function(){return new ke(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hr(),o=n.path,a=new H(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||_$(v$(h),r)<=0||(i.has(h.key)||gh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J()}Or(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Zv(this)}getSize(e){return P.resolve(this.size)}},Zv=class extends zv{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Xv=class{constructor(e){this.persistence=e,this.Nr=new Zr(n=>B_(n),$_),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yc,this.targetCount=0,this.kr=mc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),P.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new mc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Kn(n),P.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Br.containsKey(n))}};var e_=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new nS(0),this.Kr=!1,this.Kr=!0,this.$r=new Qv,this.referenceDelegate=e(this),this.Ur=new Xv(this),this.indexManager=new $v,this.remoteDocumentCache=function(i){return new Jv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Bv(n),this.Gr=new Wv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Kv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Yv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new t_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},t_=class extends hv{constructor(e){super(),this.currentSequenceNumber=e}},n_=class t{constructor(e){this.persistence=e,this.Jr=new yc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),P.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=H.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return P.or([()=>P.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var r_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var i_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var s_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return i0()?8:w$(Ye())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new i_;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(sc()<=le.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(sc()<=le.DEBUG&&V("QueryEngine","Query:",io(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(sc()<=le.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):P.resolve())}Yi(e,n){if(xA(n))return P.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Av(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=de(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,Av(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return xA(n)||i.isEqual(ie.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?P.resolve(null):(sc()<=le.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),io(n)),this.rs(e,o,n,y$(i,-1)).next(a=>a))})}ts(e,n){let r=new lt(pS(e));return n.forEach((i,s)=>{gh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return sc()<=le.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",io(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ui.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var o_=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ke(ge),this._s=new Zr(s=>B_(s),$_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gv(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function dq(t,e,n,r){return new o_(t,e,n,r)}function PS(t,e){return _(this,null,function*(){let n=X(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=de();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function hq(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=P.resolve();return m.forEach(A=>{v=v.next(()=>h.getEntry(u,A)).next(N=>{let R=l.docVersions.get(A);we(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function OS(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function fq(t,e){let n=X(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(dt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,R,M){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(m,v,h)&&a.push(n.Ur.updateTargetData(s,v))});let u=hr(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(pq(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ie.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function pq(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hr();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function gq(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mq(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new gc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function a_(t,e,n){return _(this,null,function*(){let r=X(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!bc(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function $A(t,e,n){let r=X(t),i=ie.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=X(u),m=p._s.get(h);return m!==void 0?P.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,Pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ie.min(),n?s:de())).next(a=>(yq(r,M$(e),a),{documents:a,Ts:s})))}function yq(t,e,n){let r=t.us.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var Wd=class{constructor(){this.activeTargetIds=V$()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var c_=class{constructor(){this.so=new Wd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var u_=class{_o(e){}shutdown(){}};var Kd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xd=null;function ev(){return xd===null?xd=function(){return 268435456+Math.round(2147483648*Math.random())}():xd++,"0x"+xd.toString(16)}var vq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var l_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ut="WebChannelConnection",d_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=ev(),u=this.xo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(V("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw lo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=vq[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=ev();return new Promise((o,a)=>{let u=new Ky;u.setWithCredentials(!0),u.listenOnce(Qy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ic.NO_ERROR:let h=u.getResponseJson();V(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ic.TIMEOUT:V(ut,`RPC '${e}' ${s} timed out`),a(new F(x.DEADLINE_EXCEEDED,"Request time out"));break;case ic.HTTP_ERROR:let p=u.getStatus();if(V(ut,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let A=function(R){let M=R.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(M)>=0?M:x.UNKNOWN}(v.status);a(new F(A,v.message))}else a(new F(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new F(x.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{V(ut,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(ut,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=ev(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Zy(),a=Jy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(ut,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,v=!1,A=new l_({Io:R=>{v?V(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(V(ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(ut,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,M,B)=>{R.listen(M,z=>{try{B(z)}catch(K){setTimeout(()=>{throw K},0)}})};return N(p,ro.EventType.OPEN,()=>{v||(V(ut,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),N(p,ro.EventType.CLOSE,()=>{v||(v=!0,V(ut,`RPC '${e}' stream ${i} transport closed`),A.So())}),N(p,ro.EventType.ERROR,R=>{v||(v=!0,lo(ut,`RPC '${e}' stream ${i} transport errored:`,R),A.So(new F(x.UNAVAILABLE,"The operation could not be completed")))}),N(p,ro.EventType.MESSAGE,R=>{var M;if(!v){let B=R.data[0];we(!!B);let z=B,K=z.error||((M=z[0])===null||M===void 0?void 0:M.error);if(K){V(ut,`RPC '${e}' stream ${i} received error:`,K);let Ce=K.status,ee=function(I){let E=$e[I];if(E!==void 0)return bS(E)}(Ce),T=K.message;ee===void 0&&(ee=x.INTERNAL,T="Unknown error status: "+Ce+" with message "+K.message),v=!0,A.So(new F(ee,T)),p.close()}else V(ut,`RPC '${e}' stream ${i} received:`,B),A.bo(B)}}),N(a,Yy.STAT_EVENT,R=>{R.stat===Rd.PROXY?V(ut,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Rd.NOPROXY&&V(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function tv(){return typeof document<"u"?document:null}function mh(t){return new Fv(t,!0)}var Qd=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Yd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Qd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new F(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},h_=class extends Yd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=X$(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?On(o.readTime):ie.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=jv(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=bv(u)?{documents:nq(s,u)}:{query:rq(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=CS(s,o.resumeToken);let l=Lv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ie.min())>0){a.readTime=Hd(s,o.snapshotVersion.toTimestamp());let l=Lv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=sq(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=jv(this.serializer),n.removeTarget=e,this.a_(n)}},f_=class extends Yd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=tq(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=jv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>eq(this.serializer,r))};this.a_(n)}};var p_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Vv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(x.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Vv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},g_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(lr(n),this.D_=!1):V("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var m_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){Ki(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=X(u);l.L_.add(4),yield Cc(l),l.q_.set("Unknown"),l.L_.delete(4),yield yh(l)})}(this))}))}),this.q_=new g_(r,i)}};function yh(t){return _(this,null,function*(){if(Ki(t))for(let e of t.B_)yield e(!0)})}function Cc(t){return _(this,null,function*(){for(let e of t.B_)yield e(!1)})}function kS(t,e){let n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Q_(n)?K_(n):bo(n).r_()&&W_(n,e))}function G_(t,e){let n=X(t),r=bo(n);n.N_.delete(e),r.r_()&&FS(n,e),n.N_.size===0&&(r.r_()?r.o_():Ki(n)&&n.q_.set("Unknown"))}function W_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).A_(e)}function FS(t,e){t.Q_.xe(e),bo(t).R_(e)}function K_(t){t.Q_=new kv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.q_.v_()}function Q_(t){return Ki(t)&&!bo(t).n_()&&t.N_.size>0}function Ki(t){return X(t).L_.size===0}function LS(t){t.Q_=void 0}function _q(t){return _(this,null,function*(){t.q_.set("Online")})}function Iq(t){return _(this,null,function*(){t.N_.forEach((e,n)=>{W_(t,e)})})}function wq(t,e){return _(this,null,function*(){LS(t),Q_(t)?(t.q_.M_(e),K_(t)):t.q_.set("Unknown")})}function Eq(t,e,n){return _(this,null,function*(){if(t.q_.set("Online"),e instanceof qd&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jd(t,r)}else if(e instanceof co?t.Q_.Ke(e):e instanceof $d?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{let r=yield OS(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),FS(s,u);let p=new gc(h.target,u,l,h.sequenceNumber);W_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Jd(t,r)}})}function Jd(t,e,n){return _(this,null,function*(){if(!bc(e))throw e;t.L_.add(1),yield Cc(t),t.q_.set("Offline"),n||(n=()=>OS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield yh(t)}))})}function VS(t,e){return e().catch(n=>Jd(t,n,e))}function vh(t){return _(this,null,function*(){let e=X(t),n=Xr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Tq(e);)try{let i=yield gq(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Dq(e,i)}catch(i){yield Jd(e,i)}US(e)&&jS(e)})}function Tq(t){return Ki(t)&&t.O_.length<10}function Dq(t,e){t.O_.push(e);let n=Xr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function US(t){return Ki(t)&&!Xr(t).n_()&&t.O_.length>0}function jS(t){Xr(t).start()}function bq(t){return _(this,null,function*(){Xr(t).p_()})}function Cq(t){return _(this,null,function*(){let e=Xr(t);for(let n of t.O_)e.m_(n.mutations)})}function Aq(t,e,n){return _(this,null,function*(){let r=t.O_.shift(),i=xv.from(r,e,n);yield VS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield vh(t)})}function Sq(t,e){return _(this,null,function*(){e&&Xr(t).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return H$(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();Xr(r).s_(),yield VS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield vh(r)}})}(t,e)),US(t)&&jS(t)})}function qA(t,e){return _(this,null,function*(){let n=X(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=Ki(n);n.L_.add(3),yield Cc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield yh(n)})}function Rq(t,e){return _(this,null,function*(){let n=X(t);e?(n.L_.delete(2),yield yh(n)):e||(n.L_.add(2),yield Cc(n),n.q_.set("Unknown"))})}function bo(t){return t.K_||(t.K_=function(n,r,i){let s=X(n);return s.w_(),new h_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:_q.bind(null,t),Ro:Iq.bind(null,t),mo:wq.bind(null,t),d_:Eq.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.K_.s_(),Q_(t)?K_(t):t.q_.set("Unknown")):(yield t.K_.stop(),LS(t))}))),t.K_}function Xr(t){return t.U_||(t.U_=function(n,r,i){let s=X(n);return s.w_(),new f_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bq.bind(null,t),mo:Sq.bind(null,t),f_:Cq.bind(null,t),g_:Aq.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.U_.s_(),yield vh(t)):(yield t.U_.stop(),t.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var y_=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Y_(t,e){if(lr("AsyncQueue",`${e}: ${t}`),bc(t))return new F(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Zd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=oc(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Xd=class{constructor(){this.W_=new ke(H.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Eo=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Zd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var v_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},__=class{constructor(){this.queries=zA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=X(n),s=i.queries;i.queries=zA(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new F(x.ABORTED,"Firestore shutting down"))}};function zA(){return new Zr(t=>fS(t),ph)}function BS(t,e){return _(this,null,function*(){let n=X(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new v_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Y_(o,`Initialization of query '${io(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&J_(n)})}function $S(t,e){return _(this,null,function*(){let n=X(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Nq(t,e){let n=X(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&J_(n)}function xq(t,e,n){let r=X(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function J_(t){t.Y_.forEach(e=>{e.next()})}var I_,HA;(HA=I_||(I_={})).ea="default",HA.Cache="cache";var eh=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==I_.Cache}};var th=class{constructor(e){this.key=e}},nh=class{constructor(e){this.key=e}},w_=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=pS(e),this.Ra=new Zd(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Xd,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=gh(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?A!==N&&(r.track({type:3,doc:v}),R=!0):this.ga(m,v)||(r.track({type:2,doc:v}),R=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,A){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return N(v)-N(A)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new Eo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new nh(r))}),this.da.forEach(r=>{e.has(r)||n.push(new th(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Eo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},E_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},T_=class{constructor(e){this.key=e,this.va=!1}},D_=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zr(a=>fS(a),ph),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(H.comparator),this.Na=new Map,this.La=new yc,this.Ba={},this.ka=new Map,this.qa=mc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Mq(t,e,n=!0){return _(this,null,function*(){let r=KS(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield qS(r,e,n,!0),i})}function Pq(t,e){return _(this,null,function*(){let n=KS(t);yield qS(n,e,!0,!1)})}function qS(t,e,n,r){return _(this,null,function*(){let i=yield mq(t.localStore,Pn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield Oq(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&kS(t.remoteStore,i),a})}function Oq(t,e,n,r,i){return _(this,null,function*(){t.Ka=(p,m,v)=>function(N,R,M,B){return _(this,null,function*(){let z=R.view.ma(M);z.ns&&(z=yield $A(N.localStore,R.query,!1).then(({documents:T})=>R.view.ma(T,z)));let K=B&&B.targetChanges.get(R.targetId),Ce=B&&B.targetMismatches.get(R.targetId)!=null,ee=R.view.applyChanges(z,N.isPrimaryClient,K,Ce);return WA(N,R.targetId,ee.wa),ee.snapshot})}(t,p,m,v);let s=yield $A(t.localStore,e,!0),o=new w_(e,s.Ts),a=o.ma(s.documents),u=pc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);WA(t,n,l.wa);let h=new E_(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function kq(t,e,n){return _(this,null,function*(){let r=X(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ph(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield a_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&G_(r.remoteStore,i.targetId),b_(r,i.targetId)}).catch(Dc))):(b_(r,i.targetId),yield a_(r.localStore,i.targetId,!0))})}function Fq(t,e){return _(this,null,function*(){let n=X(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),G_(n.remoteStore,r.targetId))})}function Lq(t,e,n){return _(this,null,function*(){let r=zq(t);try{let i=yield function(o,a){let u=X(o),l=rt.now(),h=a.reduce((v,A)=>v.add(A.key),de()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let A=hr(),N=de();return u.cs.getEntries(v,h).next(R=>{A=R,A.forEach((M,B)=>{B.isValidDocument()||(N=N.add(M))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,A)).next(R=>{p=R;let M=[];for(let B of a){let z=z$(B,p.get(B.key).overlayedDocument);z!=null&&M.push(new Fn(B.key,z,oS(z.value.mapValue),Jt.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,M,a)}).next(R=>{m=R;let M=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(v,R.batchId,M)})}).then(()=>({batchId:m.batchId,changes:mS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new ke(ge)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Ac(r,i.changes),yield vh(r.remoteStore)}catch(i){let s=Y_(i,"Failed to persist write");n.reject(s)}})}function zS(t,e){return _(this,null,function*(){let n=X(t);try{let r=yield fq(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?we(o.va):i.removedDocuments.size>0&&(we(o.va),o.va=!1))}),yield Ac(n,r,e)}catch(r){yield Dc(r)}})}function GA(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=X(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&J_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Vq(t,e,n){return _(this,null,function*(){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new ke(H.comparator);o=o.insert(s,fn.newNoDocument(s,ie.min()));let a=de().add(s),u=new Bd(ie.min(),new Map,new ke(ge),o,a);yield zS(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Z_(r)}else yield a_(r.localStore,e,!1).then(()=>b_(r,e,n)).catch(Dc)})}function Uq(t,e){return _(this,null,function*(){let n=X(t),r=e.batch.batchId;try{let i=yield hq(n.localStore,e);GS(n,r,null),HS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ac(n,i)}catch(i){yield Dc(i)}})}function jq(t,e,n){return _(this,null,function*(){let r=X(t);try{let i=yield function(o,a){let u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(we(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);GS(r,e,n),HS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ac(r,i)}catch(i){yield Dc(i)}})}function HS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function GS(t,e,n){let r=X(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function b_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||WS(t,r)})}function WS(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(G_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Z_(t))}function WA(t,e,n){for(let r of n)r instanceof th?(t.La.addReference(r.key,e),Bq(t,r)):r instanceof nh?(V("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||WS(t,r.key)):J()}function Bq(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(V("SyncEngine","New document in limbo: "+n),t.xa.add(r),Z_(t))}function Z_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new H(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new T_(n)),t.Oa=t.Oa.insert(n,r),kS(t.remoteStore,new gc(Pn(q_(n.path)),r,"TargetPurposeLimboResolution",nS.oe))}}function Ac(t,e,n){return _(this,null,function*(){let r=X(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=r_.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return _(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>P.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!bc(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),A=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(A);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function $q(t,e){return _(this,null,function*(){let n=X(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield PS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new F(x.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ac(n,r.hs)}})}function qq(t,e){let n=X(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function KS(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vq.bind(null,e),e.Ca.d_=Nq.bind(null,e.eventManager),e.Ca.$a=xq.bind(null,e.eventManager),e}function zq(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jq.bind(null,e),e}var KA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=mh(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return dq(this.persistence,new s_,n.initialUser,this.serializer)}Ga(n){return new e_(n_.Zr,this.serializer)}Wa(n){return new c_}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var Hq=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>GA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$q.bind(null,this.syncEngine),yield Rq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new __}()}createDatastore(n){let r=mh(n.databaseInfo.databaseId),i=function(o){return new d_(o)}(n.databaseInfo);return function(o,a,u,l){return new p_(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new m_(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>GA(this.syncEngine,r,0),function(){return Kd.D()?new Kd:new u_}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let m=new D_(s,o,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(s){return _(this,null,function*(){let o=X(s);V("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Cc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var rh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var C_=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=kd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){V("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(V("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Y_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function nv(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield PS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function QA(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Gq(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>qA(e.remoteStore,i)),t._onlineComponents=e})}function Gq(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),yield nv(t,new KA)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield nv(t,new KA);return t._offlineComponents})}function QS(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield QA(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield QA(t,new Hq))),t._onlineComponents})}function Wq(t){return QS(t).then(e=>e.syncEngine)}function A_(t){return _(this,null,function*(){let e=yield QS(t),n=e.eventManager;return n.onListen=Mq.bind(null,e.syncEngine),n.onUnlisten=kq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Pq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Fq.bind(null,e.syncEngine),n})}function Kq(t,e,n={}){let r=new xn;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,u,l){let h=new rh({next:m=>{h.Za(),o.enqueueAndForget(()=>$S(s,p)),m.fromCache&&u.source==="server"?l.reject(new F(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new eh(a,h,{includeMetadataChanges:!0,_a:!0});return BS(s,p)}(yield A_(t),t.asyncQueue,e,n,r)})),r.promise}function YS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var YA=new Map;function JS(t,e,n){if(!n)throw new F(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Qq(t,e,n,r){if(e===!0&&r===!0)throw new F(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function JA(t){if(!H.isDocumentKey(t))throw new F(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ZA(t){if(H.isDocumentKey(t))throw new F(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _h(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=_h(t);throw new F(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var ih=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},To=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ih({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ih(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iv;switch(r.type){case"firstParty":return new cv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=YA.get(n);r&&(V("ComponentProvider","Removing Datastore"),YA.delete(n),r.terminate())}(this),Promise.resolve()}};function ZS(t,e,n,r={}){var i;let s=(t=Zt(t,To))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Je.MOCK_USER;else{a=ZC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new F(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Je(l)}t._authCredentials=new sv(new Od(a,u))}}var Hi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},It=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Yr=class t extends Hi{constructor(e,n,r){super(e,n,q_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function XS(t,e,...n){if(t=Ve(t),JS("collection","path",e),t instanceof To){let r=Me.fromString(e,...n);return ZA(r),new Yr(t,null,r)}{if(!(t instanceof It||t instanceof Yr))throw new F(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return ZA(r),new Yr(t.firestore,null,r)}}function eR(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=kd.newId()),JS("doc","path",e),t instanceof To){let r=Me.fromString(e,...n);return JA(r),new It(t,null,new H(r))}{if(!(t instanceof It||t instanceof Yr))throw new F(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return JA(r),new It(t.firestore,t instanceof Yr?t.converter:null,new H(r))}}var sh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Qd(this,"async_queue_retry"),this.Vu=()=>{let r=tv();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=tv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=tv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new xn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bc(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw lr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=y_.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&J()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function XA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Ln=class extends To{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new sh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new sh(e),this._firestoreClient=void 0,yield e}})}};function tR(t,e){let n=typeof t=="object"?t:Js(),r=typeof t=="string"?t:e||"(default)",i=Wa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=JC("firestore");s&&ZS(i,...s)}return i}function Ih(t){if(t._terminated)throw new F(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Yq(t),t._firestoreClient}function Yq(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new fv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,YS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new C_(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var vc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(dt.fromBase64String(e))}catch(n){throw new F(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Gi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var _c=class{constructor(e){this._methodName=e}};var Ic=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var wc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Jq=/^__.*__$/,S_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fn(e,this.data,this.fieldMask,n,this.fieldTransforms):new zi(e,this.data,n,this.fieldTransforms)}},oh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function nR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var R_=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ch(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nR(this.Cu)&&Jq.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},N_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mh(e)}Qu(e,n,r,i=!1){return new R_({Cu:e,methodName:n,qu:r,path:Lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wh(t){let e=t._freezeSettings(),n=mh(t._databaseId);return new N_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rR(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);X_("Data must be an object, but it was:",o,r);let a=oR(r,o),u,l;if(s.merge)u=new Yt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=x_(e,p,n);if(!o.contains(m))throw new F(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);cR(h,m)||h.push(m)}u=new Yt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new S_(new Ft(a),u,l)}var ah=class t extends _c{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function iR(t,e,n,r){let i=t.Qu(1,e,n);X_("Data must be an object, but it was:",i,r);let s=[],o=Ft.empty();Wi(r,(u,l)=>{let h=eI(e,u,n);l=Ve(l);let p=i.Nu(h);if(l instanceof ah)s.push(h);else{let m=Sc(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Yt(s);return new oh(o,a,i.fieldTransforms)}function sR(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[x_(e,r,n)],u=[i];if(s.length%2!=0)throw new F(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(x_(e,s[m])),u.push(s[m+1]);let l=[],h=Ft.empty();for(let m=a.length-1;m>=0;--m)if(!cR(l,a[m])){let v=a[m],A=u[m];A=Ve(A);let N=o.Nu(v);if(A instanceof ah)l.push(v);else{let R=Sc(A,N);R!=null&&(l.push(v),h.set(v,R))}}let p=new Yt(l);return new oh(h,p,o.fieldTransforms)}function Zq(t,e,n,r=!1){return Sc(n,t.Qu(r?4:3,e))}function Sc(t,e){if(aR(t=Ve(t)))return X_("Unsupported field value:",e,t),oR(t,e);if(t instanceof _c)return function(r,i){if(!nR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Sc(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return U$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=rt.fromDate(r);return{timestampValue:Hd(i.serializer,s)}}if(r instanceof rt){let s=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hd(i.serializer,s)}}if(r instanceof Ic)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vc)return{bytesValue:CS(i.serializer,r._byteString)};if(r instanceof It){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:H_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return z_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${_h(r)}`)}(t,e)}function oR(t,e){let n={};return rS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(t,(r,i)=>{let s=Sc(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function aR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof Ic||t instanceof vc||t instanceof It||t instanceof _c||t instanceof wc)}function X_(t,e,n){if(!aR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=_h(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function x_(t,e,n){if((e=Ve(e))instanceof Gi)return e._internalPath;if(typeof e=="string")return eI(t,e);throw ch("Field path arguments must be of type string or ",t,!1,void 0,n)}var Xq=new RegExp("[~\\*/\\[\\]]");function eI(t,e,n){if(e.search(Xq)>=0)throw ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gi(...e.split("."))._internalPath}catch{throw ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ch(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new F(x.INVALID_ARGUMENT,a+t+u)}function cR(t,e){return t.some(n=>n.isEqual(e))}var uh=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new M_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(tI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},M_=class extends uh{data(){return super.data()}};function tI(t,e){return typeof e=="string"?eI(t,e):e instanceof Gi?e._internalPath:e._delegate._internalPath}function uR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ec=class{},P_=class extends Ec{};function lR(t,e,...n){let r=[];e instanceof Ec&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof O_).length,a=s.filter(u=>u instanceof lh).length;if(o>1||o>0&&a>0)throw new F(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var lh=class t extends P_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return hR(e._query,n),new Hi(e.firestore,e.converter,Cv(e._query,n))}_parse(e){let n=wh(e.firestore);return function(s,o,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){tS(p,h);let v=[];for(let A of p)v.push(eS(u,s,A));m={arrayValue:{values:v}}}else m=eS(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||tS(p,h),m=Zq(a,o,p,h==="in"||h==="not-in");return ze.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function dR(t,e,n){let r=e,i=tI("where",t);return lh._create(i,r,n)}var O_=class t extends Ec{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)hR(o,u),o=Cv(o,u)}(e._query,n),new Hi(e.firestore,e.converter,Cv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function eS(t,e,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new F(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hS(e)&&n.indexOf("/")!==-1)throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Me.fromString(n));if(!H.isDocumentKey(r))throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bA(t,new H(r))}if(n instanceof It)return bA(t,n._key);throw new F(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(n)}.`)}function tS(t,e){if(!Array.isArray(t)||t.length===0)throw new F(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hR(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var k_=class{convertValue(e,n="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Wi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>xe(o.doubleValue));return new wc(s)}convertGeoPoint(e){return new Ic(xe(e.latitude),xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=U_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){let n=dr(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Me.fromString(e);we(MS(r));let i=new Ud(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||lr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function fR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Li=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dh=class extends uh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new uo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(tI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},uo=class extends dh{data(e={}){return super.data(e)}},hh=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Li(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uo(this._firestore,this._userDataWriter,r.key,r,new Li(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new uo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Li(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new uo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Li(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:ez(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function ez(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}var Tc=class extends k_{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}};function pR(t){t=Zt(t,Hi);let e=Zt(t.firestore,Ln),n=Ih(e),r=new Tc(e);return uR(t._query),Kq(n,t._query).then(i=>new hh(e,r,t,i))}function gR(t,e,n){t=Zt(t,It);let r=Zt(t.firestore,Ln),i=fR(t.converter,e,n);return Eh(r,[rR(wh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Jt.none())])}function mR(t,e,n,...r){t=Zt(t,It);let i=Zt(t.firestore,Ln),s=wh(i),o;return o=typeof(e=Ve(e))=="string"||e instanceof Gi?sR(s,"updateDoc",t._key,e,n,r):iR(s,"updateDoc",t._key,e),Eh(i,[o.toMutation(t._key,Jt.exists(!0))])}function yR(t){return Eh(Zt(t.firestore,Ln),[new wo(t._key,Jt.none())])}function nI(t,...e){var n,r,i;t=Ve(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||XA(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(XA(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof It)l=Zt(t.firestore,Ln),h=q_(t._key.path),u={next:p=>{e[o]&&e[o](tz(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=Zt(t,Hi);l=Zt(p.firestore,Ln),h=p._query;let m=new Tc(l);u={next:v=>{e[o]&&e[o](new hh(l,m,p,v))},error:e[o+1],complete:e[o+2]},uR(t._query)}return function(m,v,A,N){let R=new rh(N),M=new eh(v,R,A);return m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return BS(yield A_(m),M)})),()=>{R.Za(),m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return $S(yield A_(m),M)}))}}(Ih(l),h,a,u)}function Eh(t,e){return function(r,i){let s=new xn;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Lq(yield Wq(r),i,s)})),s.promise}(Ih(t),e)}function tz(t,e,n){let r=n.docs.get(e._key),i=new Tc(t);return new dh(t,i,e._key,r,new Li(n.hasPendingWrites,n.fromCache),e.converter)}var F_=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wh(e)}set(e,n,r){this._verifyNotCommitted();let i=rv(e,this._firestore),s=fR(i.converter,n,r),o=rR(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Jt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=rv(e,this._firestore),o;return o=typeof(n=Ve(n))=="string"||n instanceof Gi?sR(this._dataReader,"WriteBatch.update",s._key,n,r,i):iR(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Jt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=rv(e,this._firestore);return this._mutations=this._mutations.concat(new wo(n._key,Jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function rv(t,e){if((t=Ve(t)).firestore!==e)throw new F(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function vR(t){return Ih(t=Zt(t,Ln)),new F_(t,e=>Eh(t,e))}(function(e,n=!0){(function(i){Do=i})(zr),qr(new Qt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ln(new ov(r.getProvider("auth-internal")),new lv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ud(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),He(wA,"4.7.3",e),He(wA,"4.7.3","esm2017")})();var Th=function(){return Th=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Th.apply(this,arguments)};var iz={includeMetadataChanges:!1};function rI(t,e){return e===void 0&&(e=iz),new ne(function(n){var r=nI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function _R(t){return rI(t,{includeMetadataChanges:!0})}function IR(t,e){return e===void 0&&(e={}),_R(t).pipe(Z(function(n){return iI(n,e)}))}function iI(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Th(Th({},r),(n={},n[e.idField]=t.id,n))}function wR(t){return rI(t,{includeMetadataChanges:!0}).pipe(Z(function(e){return e.docs}))}function ER(t,e){return e===void 0&&(e={}),wR(t).pipe(Z(function(n){return n.map(function(r){return iI(r,e)})}))}var Qi=class{constructor(e){return e}},TR="firestore",sI=class{constructor(){return Ka(TR)}};var oI=new q("angularfire2.firestore-instances");function sz(t,e){let n=cd(TR,t,e);return n&&new Qi(n)}function oz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Qi(r)}}var az={provide:sI,deps:[[new ct,oI]]},cz={provide:Qi,useFactory:sz,deps:[[new ct,oI],sr]},uz=(()=>{class t{constructor(){He("angularfire",Si.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Bt({type:t});static \u0275inj=jt({providers:[cz,az]})}return t})();function UQ(t,...e){return{ngModule:uz,providers:[{provide:oI,useFactory:oz(t),multi:!0,deps:[pe,Ct,eo,Ri,[new ct,rc],[new ct,Xs],...e]}]}}var jQ=Ge(ER,!0);var BQ=Ge(IR,!0);var DR=Ge(XS,!0);var $Q=Ge(yR,!0);var bR=Ge(eR,!0);var CR=Ge(pR,!0);var qQ=Ge(tR,!0);var zQ=Ge(lR,!0);var AR=Ge(gR,!0);var HQ=Ge(mR,!0);var GQ=Ge(dR,!0),WQ=Ge(vR,!0);var JQ=(()=>{let e=class e{constructor(r,i,s){this.router=r,this.auth=i,this.db=s,this.token=null,localStorage.getItem("token")&&(this.token=localStorage.getItem("token"),this.auth.onAuthStateChanged(()=>this.getUid()))}passwdValidation(r){let i=r.value||"",s=/[A-Z]/.test(i),o=/[a-z]/.test(i),a=/\d/.test(i),u=/[\W\_]/.test(i);return s&&o&&a&&u?null:{passwordStrength:!0}}emailExists(r){return _(this,null,function*(){return(yield this.emailsAlreadyRegisterd()).includes(r)?{emailExists:!0}:null})}signUp(r){return _(this,null,function*(){try{yield yA(this.auth,r.email,r.passwd);let i=this.auth.currentUser.uid;return yield this.signupUserData(i,r),"success"}catch(i){return console.log(i),"could not create a user: "+i.message}})}signupUserData(r,i){return _(this,null,function*(){let s=bR(this.db,"user",r);try{let o=i,{passwd:a}=o,u=Qh(o,["passwd"]);return yield AR(s,Ne(L({},u),{role:1})),"success"}catch(a){throw console.log(a),new Error("Error saving user data: "+a)}})}login(r){return vA(this.auth,r.email,r.passwd).then(()=>this.auth.currentUser?.getIdToken().then(i=>(this.token=i,localStorage.setItem("token",i),!0))).catch(i=>(console.log(i),!1))}isLoggedIn(){return this.token!=null}logOut(){this.router.navigate([""]),this.token=null,localStorage.removeItem("token"),this.auth.signOut()}emailsAlreadyRegisterd(){return _(this,null,function*(){let r=[];try{let i=DR(this.db,"user");return(yield CR(i)).forEach(o=>{let a=o.data();r.push(a.email)}),r}catch(i){return console.error("Error fetching registered emails:",i),[]}})}getUid(){return this.auth.currentUser?this.auth.currentUser.uid:this.token?JSON.parse(atob(this.token.split(".")[1])).user_id:null}};e.\u0275fac=function(i){return new(i||e)(U(Kt),U(Oi),U(Qi))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();export{L as a,Ne as b,_ as c,Fe as d,ne as e,We as f,Xe as g,Te as h,W as i,ls as j,Z as k,Wo as l,hs as m,mu as n,LN as o,gf as p,zN as q,et as r,HN as s,wr as t,GN as u,zn as v,Hw as w,ci as x,QN as y,YN as z,_u as A,_f as B,Ue as C,$ as D,OE as E,j as F,jt as G,q as H,U as I,k as J,ct as K,Vt as L,YE as M,Bt as N,Rr as O,JE as P,Vx as Q,Ns as R,N6 as S,x6 as T,og as U,ag as V,Ct as W,En as X,Tn as Y,Rt as Z,ug as _,qt as $,M6 as aa,dg as ba,Dn as ca,IP as da,P6 as ea,Ae as fa,Ii as ga,ll as ha,Ms as ia,pe as ja,Pr as ka,mk as la,Cg as ma,Sk as na,Ag as oa,qk as pa,rb as qa,zk as ra,L6 as sa,ub as ta,lb as ua,Sg as va,V6 as wa,r1 as xa,Rg as ya,U6 as za,j6 as Aa,B6 as Ba,$6 as Ca,hb as Da,fb as Ea,q6 as Fa,z6 as Ga,p1 as Ha,pb as Ia,g1 as Ja,H6 as Ka,mb as La,G6 as Ma,W6 as Na,K6 as Oa,Q6 as Pa,ha as Qa,Os as Ra,ks as Sa,pa as Ta,Fs as Ua,nt as Va,Vs as Wa,y5 as Xa,v5 as Ya,_5 as Za,I5 as _a,mF as $a,vF as ab,AF as bb,M5 as cb,Y5 as db,sL as eb,Ur as fb,kL as gb,Kt as hb,uC as ib,p8 as jb,g8 as kb,m8 as lb,JC as mb,ZC as nb,kt as ob,Ve as pb,Qt as qb,qr as rb,Wa as sb,zr as tb,Js as ub,He as vb,Si as wb,cd as xb,Ka as yb,Xs as zb,eo as Ab,Ge as Bb,sr as Cb,Ri as Db,rK as Eb,iK as Fb,rc as Gb,JK as Hb,ZK as Ib,Qi as Jb,UQ as Kb,jQ as Lb,BQ as Mb,DR as Nb,$Q as Ob,bR as Pb,qQ as Qb,zQ as Rb,AR as Sb,HQ as Tb,GQ as Ub,WQ as Vb,JQ as Wb};
