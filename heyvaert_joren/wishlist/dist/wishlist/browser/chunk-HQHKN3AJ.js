import{F as m,I as a,Jb as c,Lb as n,Mb as u,Nb as d,Ob as A,Pb as s,Sb as f,f as l,h as o}from"./chunk-VUSBVABX.js";var I=(()=>{let e=class e{constructor(t){this.db=t,this.users=[],this.admins=[],this.IsAdmin=new l}getAllUsers(){return n(d(this.db,"user"),{idField:"id"})}getAllUsersPut(){this.getAllUsers().subscribe({next:t=>{this.users=t},error:t=>console.log("error: ",t)})}getAllAdmins(){return n(d(this.db,"admin"),{idField:"id"})}getAllAdminsPutAssignRoles(){this.getAllAdmins().subscribe({next:t=>{this.admins=t,this.assignRoles()},error:t=>console.log("error: ",t)})}assignRoles(){this.users.forEach(t=>{for(let i of this.admins)if(t.id==i.id){t.role="Admin";break}else t.role="User"})}addAdmin(t){let i=s(this.db,"/admin",t.id);return o(f(i,{email:t.email}))}deleteAdmin(t){let i=s(this.db,"/admin",t.id);return o(A(i))}getAdmin(t){return u(s(this.db,"/admin/"+t))}checkAdmin(t){this.IsAdmin.next(t),t==!0?localStorage.setItem("isAdmin",JSON.stringify(!0)):localStorage.removeItem("isAdmin")}getStoredAdminStatus(){return localStorage.getItem("isAdmin")==="true"}};e.\u0275fac=function(i){return new(i||e)(a(c))},e.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();export{I as a};
