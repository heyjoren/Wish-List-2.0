{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/HEYVA/OneDrive - Thomas More/Documenten/School/School jaar 2024 - 2025/Web development/Labo/Eigen/Project/Wish-List-2.0/wishlist/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./new-item.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./new-item.component.css?ngResource\";\nimport { Component } from '@angular/core';\nimport { DialogService } from '../../dialog.service';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { ItemService } from '../item.service';\nimport { Router } from '@angular/router';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { FormBuilder, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\n;\nimport { ImgNamePipe } from '../../img-name.pipe';\nimport { CommonModule } from '@angular/common';\nimport { AuthService } from '../../auth/auth.service';\nlet NewItemComponent = class NewItemComponent {\n  constructor(Dialogservice, dialogref, itemService, router, http, imgNamePipe, fb, auth) {\n    this.Dialogservice = Dialogservice;\n    this.dialogref = dialogref;\n    this.itemService = itemService;\n    this.router = router;\n    this.http = http;\n    this.imgNamePipe = imgNamePipe;\n    this.fb = fb;\n    this.auth = auth;\n    this.filled = false;\n    this.toevoegenSwitch = false;\n    this.file = null;\n  }\n  ngOnInit() {\n    this.form = this.fb.group({\n      'naam': ['', Validators.required],\n      'prijs': [0, [Validators.required, Validators.min(0.01)]],\n      'beschrijving': [''],\n      'fabrikant': ['', Validators.required]\n    });\n  }\n  closeDialog() {\n    if (!this.toevoegenSwitch) {\n      const prijsString = this.form.value.prijs.toFixed(2).toString();\n      if (this.form.value.naam !== \"\" || this.form.value.fabrikant !== \"\" || prijsString !== '0.00') {\n        this.filled = true;\n      }\n      if (this.filled) {\n        const confirmClose = confirm('Je hebt nog niet opgeslagen. Ben je zeker dat je niet wilt opslaan?');\n        if (!confirmClose) {\n          return;\n        }\n      }\n    }\n    this.Dialogservice.closeDialog(this.dialogref);\n    this.router.navigate(['items']);\n  }\n  toevoegen() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (_this.form.valid) {\n        _this.toevoegenSwitch = true;\n        const nieuwitem = {\n          naam: _this.form.value.naam,\n          prijs: _this.form.value.prijs.toFixed(2),\n          beschrijving: _this.form.value.beschrijving,\n          fabrikant: _this.form.value.fabrikant,\n          img: \"\",\n          uid: _this.auth.getUid() ?? '',\n          toegevoegOp: new Date()\n        };\n        const newId = _this.itemService.createItemId();\n        if (_this.file) {\n          const path = 'item/' + newId + '/' + _this.file.name;\n          nieuwitem.img = yield _this.itemService.uploadImg(path, _this.file);\n        } else {\n          nieuwitem.img = \"\";\n        }\n        _this.itemService.addItems(nieuwitem, newId).subscribe({\n          next: () => {\n            _this.closeDialog();\n            _this.router.navigate(['items']);\n          },\n          error: error => {\n            console.error('Error: ', error);\n          }\n        });\n      }\n    })();\n  }\n  selectImg(event) {\n    const target = event.target;\n    if (target.files && target.files[0]) {\n      this.file = target.files[0];\n    }\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: DialogService\n  }, {\n    type: MatDialogRef\n  }, {\n    type: ItemService\n  }, {\n    type: Router\n  }, {\n    type: HttpClient\n  }, {\n    type: ImgNamePipe\n  }, {\n    type: FormBuilder\n  }, {\n    type: AuthService\n  }];\n};\nNewItemComponent = __decorate([Component({\n  selector: 'app-new-item',\n  standalone: true,\n  imports: [MatIconModule, MatTooltipModule, ReactiveFormsModule, CommonModule],\n  template: __NG_CLI_RESOURCE__0,\n  providers: [ImgNamePipe],\n  styles: [__NG_CLI_RESOURCE__1]\n})], NewItemComponent);\nexport { NewItemComponent };","map":{"version":3,"names":["Component","DialogService","MatDialogRef","ItemService","Router","MatIconModule","MatTooltipModule","FormBuilder","ReactiveFormsModule","Validators","HttpClient","ImgNamePipe","CommonModule","AuthService","NewItemComponent","constructor","Dialogservice","dialogref","itemService","router","http","imgNamePipe","fb","auth","filled","toevoegenSwitch","file","ngOnInit","form","group","required","min","closeDialog","prijsString","value","prijs","toFixed","toString","naam","fabrikant","confirmClose","confirm","navigate","toevoegen","_this","_asyncToGenerator","valid","nieuwitem","beschrijving","img","uid","getUid","toegevoegOp","Date","newId","createItemId","path","name","uploadImg","addItems","subscribe","next","error","console","selectImg","event","target","files","_","__decorate","selector","standalone","imports","template","__NG_CLI_RESOURCE__0","providers"],"sources":["C:\\Users\\HEYVA\\OneDrive - Thomas More\\Documenten\\School\\School jaar 2024 - 2025\\Web development\\Labo\\Eigen\\Project\\Wish-List-2.0\\wishlist\\src\\app\\item-component\\new-item\\new-item.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { DialogService } from '../../dialog.service';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { ItemService } from '../item.service';\r\nimport { Router } from '@angular/router';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { HttpClient } from '@angular/common/http';;\r\nimport { ImgNamePipe } from '../../img-name.pipe';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AuthService } from '../../auth/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-new-item',\r\n  standalone: true,\r\n  imports: [MatIconModule, MatTooltipModule, ReactiveFormsModule, CommonModule],\r\n  templateUrl: './new-item.component.html',\r\n  styleUrl: './new-item.component.css',\r\n  providers: [ImgNamePipe],\r\n})\r\nexport class NewItemComponent {\r\n  filled: boolean = false;\r\n  toevoegenSwitch: boolean= false;\r\n  file: File | null = null;\r\n  form!: FormGroup;\r\n\r\n\r\n  constructor(private Dialogservice: DialogService, private dialogref: MatDialogRef<NewItemComponent>, \r\n    private itemService: ItemService, private router: Router, private http: HttpClient, private imgNamePipe: ImgNamePipe, private fb : FormBuilder,\r\n    private auth: AuthService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.fb.group({\r\n      'naam': ['', Validators.required],\r\n      'prijs': [0, [Validators.required, Validators.min(0.01)]],\r\n      'beschrijving': [''],\r\n      'fabrikant': ['', Validators.required],\r\n    });\r\n  }\r\n\r\n\r\n  closeDialog(): void \r\n  {\r\n    if(!this.toevoegenSwitch)\r\n    {    \r\n      const prijsString: string = this.form.value.prijs.toFixed(2).toString();\r\n\r\n      if(this.form.value.naam !== \"\" || this.form.value.fabrikant !== \"\" || prijsString !== '0.00')\r\n      {\r\n        this.filled = true;\r\n      }\r\n\r\n      if(this.filled)\r\n      {\r\n        const confirmClose = confirm('Je hebt nog niet opgeslagen. Ben je zeker dat je niet wilt opslaan?');\r\n        if (!confirmClose) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    this.Dialogservice.closeDialog(this.dialogref)\r\n    this.router.navigate(['items']);\r\n  }\r\n\r\n  async toevoegen(){\r\n\r\n    if(this.form.valid)\r\n    {\r\n    this.toevoegenSwitch = true\r\n\r\n      const nieuwitem = {\r\n        naam: this.form.value.naam,\r\n        prijs: this.form.value.prijs.toFixed(2),\r\n        beschrijving: this.form.value.beschrijving,\r\n        fabrikant: this.form.value.fabrikant,\r\n        img: \"\",\r\n        uid: this.auth.getUid() ?? '',\r\n        toegevoegOp: new Date(),\r\n      }\r\n\r\n      const newId = this.itemService.createItemId();\r\n      if(this.file)\r\n      {\r\n        const path = 'item/' + newId + '/' + this.file.name;\r\n        nieuwitem.img = await this.itemService.uploadImg(path, this.file);\r\n      }\r\n      else{\r\n        nieuwitem.img = \"\";\r\n      }\r\n      this.itemService.addItems(nieuwitem, newId).subscribe({\r\n        next: () => {\r\n          this.closeDialog();\r\n          this.router.navigate(['items']);\r\n        },\r\n        error: (error) => {\r\n          console.error('Error: ', error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  selectImg(event: Event): void {\r\n    const target = event.target as HTMLInputElement;\r\n\r\n    if (target.files && target.files[0])\r\n    {\r\n      this.file = target.files[0];\r\n\r\n    }\r\n  }\r\n\r\n\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}