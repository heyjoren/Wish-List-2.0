{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/HEYVA/OneDrive - Thomas More/Documenten/School/School jaar 2024 - 2025/Web development/Labo/Eigen/Project/Wish-List-2.0/wishlist/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./aanpas-item.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./aanpas-item.component.css?ngResource\";\nimport { Component } from '@angular/core';\nimport { FormBuilder, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { ActivatedRoute, Router, RouterOutlet } from '@angular/router';\nimport { ItemService } from '../item.service';\nimport { item } from '../item.model';\nimport { ImgNamePipe } from '../../img-name.pipe';\nimport { CommonModule } from '@angular/common';\nlet AanpasItemComponent = class AanpasItemComponent {\n  constructor(itemService, route, router, imgNamePipe, fb) {\n    this.itemService = itemService;\n    this.route = route;\n    this.router = router;\n    this.imgNamePipe = imgNamePipe;\n    this.fb = fb;\n    this.item = new item();\n    // naam: string = '';\n    // prijs: number = 0;\n    // beschrijving: string = '';\n    // img: string = '';\n    // // img: File | null =null;\n    // selectedFile: File | null = null;\n    // fabrikant: string = '';\n    // nieuw\n    this.idFromRoute = null;\n    this.saved = false;\n    this.filled = false;\n    this.toevoegenSwitch = false;\n    this.file = null;\n    this.isSubmitting = false;\n  }\n  ngOnInit() {\n    this.form = this.fb.group({\n      naam: ['', Validators.required],\n      prijs: ['', Validators.required],\n      beschrijving: [''],\n      fabrikant: ['', Validators.required]\n    });\n    this.route.paramMap.subscribe(params => {\n      this.idFromRoute = params.get('id');\n      this.route.params.subscribe(params => {\n        this.itemService.getItem(params['id']).subscribe({\n          next: response => {\n            if (response) {\n              this.item = response;\n              this.vulInput();\n            } else {\n              console.log('Geen item gevonden');\n            }\n          },\n          error: error => console.log('error: ', error)\n        });\n      });\n    });\n  }\n  vulInput() {\n    this.form.setValue({\n      'naam': this.item.naam,\n      'prijs': this.item.prijs,\n      'beschrijving': this.item.beschrijving,\n      'fabrikant': this.item.fabrikant\n    });\n  }\n  // onFileSelected(event: any) {\n  //   this.selectedFile = event.target.files[0];\n  // }\n  closeSccreen() {\n    if (!this.toevoegenSwitch) {\n      // const prijsString: string = this.prijs.toFixed(2).toString();\n      console.log(this.form.value.prijs.toFixed(2));\n      const prijsString = this.form.value.prijs.toFixed(2).toString();\n      if (this.form.value.naam !== \"\" || this.form.value.fabrikant !== \"\" || prijsString !== '0.00') {\n        this.filled = true;\n      }\n      if (this.filled) {\n        const confirmClose = confirm('Je hebt nog niet opgeslagen. Ben je zeker dat je niet wilt opslaan?');\n        if (!confirmClose) {\n          return;\n        }\n      }\n    }\n    this.router.navigate(['items']);\n  }\n  aanpassen() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (_this.isSubmitting) return;\n      _this.isSubmitting = true;\n      _this.saved = true;\n      if (_this.file) {\n        if (_this.item.img) {\n          yield _this.itemService.deleteImg(_this.item.img);\n        }\n        const path = 'item/' + _this.idFromRoute + '/' + _this.file.name;\n        _this.item.img = yield _this.itemService.uploadImg(path, _this.file);\n      }\n      let prijsString = \"\";\n      prijsString = _this.form.value.prijs.toString();\n      if (prijsString.length < 4) {\n        prijsString = _this.form.value.prijs.toFixed(2).toString();\n      }\n      _this.item.naam = _this.form.value.naam;\n      _this.item.prijs = prijsString;\n      _this.item.fabrikant = _this.form.value.fabrikant;\n      _this.item.beschrijving = _this.form.value.beschrijving;\n      _this.itemService.updateItem(_this.item, _this.idFromRoute) // this.idFromRoute! het ! is om te zeggen dat het niet null mag zijn.\n      .then(() => {\n        _this.router.navigate(['items']);\n      }).catch(error => {\n        console.log('error: ', error);\n      });\n    })();\n  }\n  canDeactivate() {\n    if (!this.saved) {\n      return confirm('Je hebt nog niet opgeslagen. Ben je zeker dat je niet wilt opslaan?');\n    }\n    return true;\n  }\n  selectImg(event) {\n    const target = event.target;\n    if (target.files && target.files[0]) {\n      this.file = target.files[0];\n    }\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: ItemService\n  }, {\n    type: ActivatedRoute\n  }, {\n    type: Router\n  }, {\n    type: ImgNamePipe\n  }, {\n    type: FormBuilder\n  }];\n};\nAanpasItemComponent = __decorate([Component({\n  selector: 'app-aanpas-item',\n  standalone: true,\n  imports: [MatIconModule, MatTooltipModule, RouterOutlet, FormsModule, CommonModule, ReactiveFormsModule],\n  template: __NG_CLI_RESOURCE__0,\n  providers: [ImgNamePipe],\n  styles: [__NG_CLI_RESOURCE__1]\n})], AanpasItemComponent);\nexport { AanpasItemComponent };","map":{"version":3,"names":["Component","FormBuilder","FormsModule","ReactiveFormsModule","Validators","MatIconModule","MatTooltipModule","ActivatedRoute","Router","RouterOutlet","ItemService","item","ImgNamePipe","CommonModule","AanpasItemComponent","constructor","itemService","route","router","imgNamePipe","fb","idFromRoute","saved","filled","toevoegenSwitch","file","isSubmitting","ngOnInit","form","group","naam","required","prijs","beschrijving","fabrikant","paramMap","subscribe","params","get","getItem","next","response","vulInput","console","log","error","setValue","closeSccreen","value","toFixed","prijsString","toString","confirmClose","confirm","navigate","aanpassen","_this","_asyncToGenerator","img","deleteImg","path","name","uploadImg","length","updateItem","then","catch","canDeactivate","selectImg","event","target","files","_","__decorate","selector","standalone","imports","template","__NG_CLI_RESOURCE__0","providers"],"sources":["C:\\Users\\HEYVA\\OneDrive - Thomas More\\Documenten\\School\\School jaar 2024 - 2025\\Web development\\Labo\\Eigen\\Project\\Wish-List-2.0\\wishlist\\src\\app\\item-component\\aanpas-item\\aanpas-item.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { ActivatedRoute, Params, Router, RouterOutlet } from '@angular/router';\r\nimport { ItemService } from '../item.service';\r\nimport { item } from '../item.model';\r\nimport { ImgNamePipe } from '../../img-name.pipe';\r\nimport { CanComponentDeactivate } from '../../auth/route-access.guard';\r\nimport { Observable } from 'rxjs';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n\r\n@Component({\r\n  selector: 'app-aanpas-item',\r\n  standalone: true,\r\n  imports: [MatIconModule, MatTooltipModule, RouterOutlet, FormsModule, CommonModule, ReactiveFormsModule],\r\n  templateUrl: './aanpas-item.component.html',\r\n  styleUrl: './aanpas-item.component.css',\r\n  providers: [ImgNamePipe],\r\n})\r\nexport class AanpasItemComponent implements CanComponentDeactivate {\r\n  item: item = new item();\r\n  // naam: string = '';\r\n  // prijs: number = 0;\r\n  // beschrijving: string = '';\r\n  // img: string = '';\r\n  // // img: File | null =null;\r\n  // selectedFile: File | null = null;\r\n  // fabrikant: string = '';\r\n\r\n  // nieuw\r\n  idFromRoute: string | null = null;\r\n  saved: boolean = false;\r\n  filled: boolean = false;\r\n  toevoegenSwitch: boolean= false;\r\n  file: File | null = null;\r\n  form!: FormGroup;\r\n  isSubmitting: boolean = false;\r\n\r\n\r\n  constructor(private itemService: ItemService, private route: ActivatedRoute, private router: Router, private imgNamePipe: ImgNamePipe,\r\n    private fb : FormBuilder){ }\r\n\r\n  ngOnInit(){\r\n    this.form = this.fb.group({\r\n      naam: ['', Validators.required],\r\n      prijs: ['', Validators.required],\r\n      beschrijving: [''],\r\n      fabrikant: ['', Validators.required],\r\n      });\r\n\r\n    this.route.paramMap\r\n      .subscribe((params) => {\r\n      this.idFromRoute = params.get('id');\r\n\r\n      this.route.params.subscribe((params: Params) => {\r\n        this.itemService.getItem(params['id']!).subscribe({\r\n          next: (response: item | undefined) => {\r\n            if (response) {\r\n            this.item = response;\r\n            this.vulInput();\r\n            }\r\n            else {\r\n              console.log('Geen item gevonden');\r\n            }\r\n          },\r\n          error: (error) => console.log('error: ', error)\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  vulInput(){\r\n    this.form.setValue({\r\n      'naam' : this.item.naam,\r\n      'prijs' : this.item.prijs,\r\n      'beschrijving' : this.item.beschrijving,\r\n      'fabrikant' : this.item.fabrikant\r\n\r\n    })\r\n  }\r\n\r\n  // onFileSelected(event: any) {\r\n  //   this.selectedFile = event.target.files[0];\r\n  // }\r\n\r\n  closeSccreen(){\r\n    if(!this.toevoegenSwitch)\r\n      {    \r\n        // const prijsString: string = this.prijs.toFixed(2).toString();\r\n        console.log(this.form.value.prijs.toFixed(2))\r\n        const prijsString: string = this.form.value.prijs.toFixed(2).toString();\r\n  \r\n        if(this.form.value.naam !== \"\" || this.form.value.fabrikant !== \"\" || prijsString !== '0.00')\r\n        {\r\n          this.filled = true;\r\n        }\r\n  \r\n        if(this.filled)\r\n        {\r\n          const confirmClose = confirm('Je hebt nog niet opgeslagen. Ben je zeker dat je niet wilt opslaan?');\r\n          if (!confirmClose) {\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    this.router.navigate(['items']);\r\n  }\r\n\r\n  async aanpassen(){\r\n    if (this.isSubmitting) return;\r\n    this.isSubmitting = true;\r\n    this.saved = true;\r\n\r\n    if(this.file)\r\n    {\r\n      if(this.item.img)\r\n      {\r\n        await this.itemService.deleteImg(this.item.img);\r\n      }\r\n\r\n      const path = 'item/' + this.idFromRoute + '/' + this.file.name;\r\n      this.item.img = await this.itemService.uploadImg(path, this.file);\r\n    }\r\n\r\n    let prijsString: string = \"\";\r\n    prijsString = this.form.value.prijs.toString();\r\n\r\n\r\n    if(prijsString.length < 4)\r\n    {\r\n      prijsString = this.form.value.prijs.toFixed(2).toString();\r\n    }\r\n\r\n    this.item.naam = this.form.value.naam;\r\n    this.item.prijs = prijsString;\r\n    this.item.fabrikant = this.form.value.fabrikant;\r\n    this.item.beschrijving = this.form.value.beschrijving;\r\n\r\n\r\n    this.itemService.updateItem(this.item, this.idFromRoute!) // this.idFromRoute! het ! is om te zeggen dat het niet null mag zijn.\r\n      .then(() => {\r\n        this.router.navigate(['items']);\r\n      })\r\n      .catch((error) => {\r\n        console.log('error: ', error);\r\n      });\r\n  }\r\n\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean {\r\n    if (!this.saved)\r\n    {\r\n      return confirm('Je hebt nog niet opgeslagen. Ben je zeker dat je niet wilt opslaan?');\r\n    }\r\n    return true;\r\n  }\r\n\r\n  selectImg(event: Event): void {\r\n    const target = event.target as HTMLInputElement;\r\n\r\n    if (target.files && target.files[0])\r\n    {\r\n      this.file = target.files[0];\r\n\r\n    }\r\n  }\r\n  \r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}